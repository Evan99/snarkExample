webpackJsonp([19],{0:function(m,n,h){h(351);h(352);h(213);h(353);h(291);h(1706);h(284);h(283);h(346);h(1629);h(354);h(285);h(286);h(1088);h(1089);h(287);h(66);h(355);h(356);h(85);h(357);h(293);h(294);h(1707);h(295);h(296);h(82);h(358);h(1718);h(292);h(150);h(151);h(1719);h(298);h(299);h(92);h(359);h(360);h(361);h(362);h(363);h(1720);h(364);h(365);h(366);h(367);h(1721);h(191)},66:function(m,n,h){YUI.add("squarespace-models-member-account",function(a){var d=a.namespace("Squarespace.Models").MemberAccount=
a.Base.create("MemberAccount",a.Model,[a.Squarespace.ModelSync.REST],{root:"/api/member-accounts",serialize:function(){return a.JSON.stringify(this._getServerRelevantFields())},_getServerRelevantFields:function(){var b=a.Array.reduce("id firstName lastName displayName location websiteUrl bio email siteSubscriptions storeSubscriptions googlePlusProfile avatarId socialOptions developerAccount developerAccountMarketingDetails siteTemplateInstallationPreviews pseudonymAccount notificationsRead tutorialsCompleted phoneNumber".split(" "),
{},function(a,b){a[b]=this.get(b);return a},this);a.Lang.isObject(b.notificationsRead)&&(b.notificationsRead=a.Object.keys(b.notificationsRead));a.Lang.isObject(b.tutorialsCompleted)&&(b.tutorialsCompleted=a.Object.keys(b.tutorialsCompleted));return b},isMe:function(){return this.get("id")==Static.SQUARESPACE_CONTEXT.authenticatedAccount.id},sendVerificationEmail:function(){var b=this.getURL();return a.Squarespace.Promises.create(function(c,e){a.Data.post({secure:!0,url:b+"/verification-email",success:c,
failure:e})})},setPassword:function(b,c,e){return new a.Promise(a.bind(function(d,f){a.Data.put({secure:!0,url:this.getURL()+"/password",data:{newPassword:b,newPasswordConfirm:c,currentPassword:e},success:function(){this.set("emailAccount",!0);d()},failure:function(a){f(a)}},this)},this))},requestActivation:function(b){a.Data.post({url:this.getURL("update")+"/activation-emails",success:function(a){b()},failure:function(a){b(a)}})},replaceAuthor:function(b,c){a.Data.post({url:this.getURL()+"/replace-author",
data:{replacementId:b},success:function(a){c()},failure:function(a){c(a)}})},setPreviewInstallationId:function(b){var c=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]);a.Lang.isValue(b)?this.set("siteTemplateInstallationPreviews."+c,b):(b=this.get("siteTemplateInstallationPreviews"),delete b[c],this.set("siteTemplateInstallationPreviews",b))},getPreviewInstallationId:function(){return this.get("siteTemplateInstallationPreviews."+a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website",
"id"]))},createTwoFactorAuthSetting:function(){var b=this.getURL();return a.Squarespace.Promises.create(function(c,e){a.Data.post({secure:!0,url:b+"/two-factor-settings",json:!0,success:c,failure:e})})},getTwoFactorAuthSettings:function(){var b=this.getURL();return a.Squarespace.Promises.create(function(c,e){a.Data.get({secure:!0,url:b+"/two-factor-settings",success:c,failure:e})})},setTwoFactorAuthSettings:function(b){var c=this.getURL(),e=this;return a.Squarespace.Promises.create(function(d,f){a.Data.put({secure:!0,
url:c+"/two-factor-settings",json:!0,data:b,success:function(a){e.set("twoFactorAuthEnabled",b.enabled);d(a)},failure:f})})},updateScratchCodes:function(){var b=this.getURL();return a.Squarespace.Promises.create(function(c,e){a.Data.post({secure:!0,url:b+"/two-factor-settings/scratch-codes",json:!0,success:c,failure:e})})}},{ATTRS:{notificationsRead:{value:{}}}});a.namespace("Squarespace.Singletons");a.Squarespace.Singletons.AuthenticatedMemberAccount=Static&&Static.SQUARESPACE_CONTEXT&&Static.SQUARESPACE_CONTEXT.authenticatedAccount?
new d(Static.SQUARESPACE_CONTEXT.authenticatedAccount):new d({})},"1.0",{requires:"base model promise squarespace-attr-validators squarespace-model-sync-rest squarespace-promises".split(" ")})},82:function(m,n,h){YUI.add("squarespace-form-utils",function(a){var d=a.namespace("Squarespace.FormUtils");d.setData=function(b,c){a.Lang.isValue(c)&&a.Array.each(b,function(b){var d=c[b.get("name")];a.Lang.isUndefined(d)||b.set("data",d)})};d.getData=function(b){b=b||[];return a.Array.reduce(b,{},function(b,
e){var d=e.get("data");!a.Lang.isUndefined(d)&&a.Lang.isValue(e.get("name"))&&(b[e.get("name")]=d);return b})};d.template=function(b,c){a.Lang.isArray(c)?a.Array.each(c,function(a){var c=a.get("name"),d=b.one('[data-field-name="'+c+'"]');d?a.render(d):console.warn('No target node found for widget "'+c+'".')}):a.Lang.isObject(c)&&a.Object.each(c.groups||{},function(c,d){var f=b.one('[data-field-group="'+d+'"]');f&&a.Array.each(c,function(a){a.render(f)})})};d.validate=function(b){return a.Array.reduce(b,
{},function(b,e){if(a.Lang.isFunction(e.getErrors)){var d=e.getErrors();d.length&&(b[e.get("name")]=d[0])}return b})};d.showErrors=function(b,c){a.Array.each(b,function(b){var d=c[b.get("name")];a.Lang.isValue(d)&&""!==d&&a.Lang.isFunction(b.showError)&&b.showError(d)})};d.hideErrors=function(b){a.Array.each(b,function(b){a.Lang.isFunction(b.hideError)&&b.hideError()})}},"1.0",{requires:["node","array-extras"]})},85:function(m,n,h){YUI.add("squarespace-widgets-alert",function(a){a.namespace("Squarespace.Widgets");
a.Squarespace.Widgets.Alert=a.Base.create("alert",a.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:a.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:a.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{className:{value:"alert"},style:{value:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},92:function(m,n,h){YUI.add("squarespace-object-builder",function(a){function d(){var b=
Array.prototype.slice.call(arguments),c=b.shift(),e=b[b.length-1],d="prependArrays"==e;"prependArrays"==e||"appendArrays"==e?b.pop():e=null;for(var f=0,k=b.length;f<k;f++)if(b[f])for(var l in b[f])e&&b[f][l]&&a.Lang.isArray(b[f][l])?c[l]=(d?b[f][l]:c[l]||[]).concat((d?c[l]:b[f][l])||[]):c[l]=b[f][l];return c}function b(c,e){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)&&!(c[d]instanceof a.Base)&&!a.Lang.isFunction(c[d])){for(var f=c[d],k=0;k<e.length;k++){if("undefined"===typeof e[k].test||
e[k].test(c[d],d,c))e[k].each&&e[k].each(c[d],d,c),e[k].map&&(c[d]=e[k].map(c[d],d,c));if("undefined"===typeof c[d])break}null!==c[d]&&("object"===typeof c[d]&&!f.$dontRecurse)&&b(c[d],e);if(c[d]instanceof Array)for(f=0;f<e.length;f++)if("undefined"===typeof e[f].postTest||e[f].postTest(c[d]))e[f].post&&(c[d]=e[f].post(c[d],d,c))}return c}function c(c,e,f){var k={include:{test:function(a){return a&&a.$include},map:function(b){var c,e=b.$include;!a.Lang.isArray(e)&&!a.Lang.isObject(e[0])&&(e=[e]);
for(var k=0,g=e.length;k<g;k++){var r=e[k],h;if("string"===typeof r){var x=r.split(".");h=f;for(var u=0,m=x.length;u<m;u++)if(h[x[u]])h=a.clone(h[x[u]]);else throw Error("Bad path `"+r+"`: `"+x[u]+"` not found.");}else{if("object"===typeof r)for(var n in r)if("string"==typeof n&&-1!==n.indexOf(".")){x=n.split(".");for(u=h;0!==x.length;)if(m=x.shift(),0===x.length){u[m]=r[n];break}else{var D=[m].concat(x).join(".");u.hasOwnProperty(D)?x=[D]:(u.hasOwnProperty(m)||(u[m]={}),u=u[m])}delete r[n]}h=r}c=
d(c||(a.Lang.isArray(h)?[]:{}),h,"prependArrays")}b.$update&&(c.$update=b.$update);b.$concat&&(c.$concat=b.$concat);b.$when&&(c.$when=b.$when);return c}},update:{test:function(a){return a&&a.$update},each:function(c){function e(a,b){return function(c,e){return e===a&&c===b}}function d(b){return function(c,e,d){a.mix(d,b,!0)}}var f=[],k=c.$update;delete c.$update;for(var g in k)"."==g[0]?f.push({test:e("name",g.slice(1)),each:d(k[g])}):f.push({test:e("type",g),each:d(k[g])});return b(c,f)}},when:{test:function(a){return a&&
a.$when},map:function(b){if(a.Lang.isFunction(b.$when)&&b.$when(f)){if(b.$value)return b.$value;delete b.$when;return b}}},value:{test:function(a){return a&&a.$value},map:function(a){return f[a.$value]}},valueFn:{test:function(a){return a&&a.$valueFn},map:function(a){return a.$valueFn(f)}},template:{test:function(b,c,e){return a.Squarespace.StringTemplate&&"string"===typeof b&&!e.$escape},map:function(b){return a.Squarespace.StringTemplate.template(b,f)}},concat:{postTest:function(a){var b=!1;if(a&&
a instanceof Array)for(var c=0;c<a.length;c++)a[c]&&(a[c]instanceof Array&&a[c].$concat)&&(b=b||a[c].$concat);return b},post:function(a,b,c){b=[];for(c=0;c<a.length;c++)a[c]&&a[c]instanceof Array&&a[c].$concat?b=b.concat(a[c]):b.push(a[c]);return b}},trim:{postTest:function(b){return a.Lang.isArray(b)},post:function(b,c,e){c=b.filter(function(b){return!a.Lang.isUndefined(b)});b.$concat&&(c.$concat=b.$concat);return c}}};return b(a.merge(e),c.map(function(a){return k[a]}))}function e(a,b,e){a=c(["include",
"update"],a,b);return a=c("when value valueFn template concat trim".split(" "),a,e)}var k=a.namespace("Squarespace.StringTemplate");k.filters={lower:function(a){return(a||"").toLowerCase()},capitalize:function(a){return 1>=a.length?a:a.charAt(0).toUpperCase()+a.slice(1)},withIndefiniteArticle:function(a){var b=["a","e","i","o","u"];return 0===a.length?a:-1!==b.indexOf(a.charAt(0).toLowerCase())?"an "+a:"a "+a}};k.template=function(b,c,e){e=a.merge(k.filters,e);return b.replace(/\{(\s*)([^\s|]+)((?:\|[^}]+)?)(\s*)\}/g,
function(a,b,d,f,k){var g=c[d],h=!1;"undefined"==typeof g&&(h=!0);if(f){f=f.split("|").filter(function(a){return a});for(var m=0,x=f.length;m<x;m++){var n=f[m].split(/[:,\s]+/g),y=n.shift();if(y)if(e[y])g=e[y](g,n,c);else if("'"==y[0]&&"'"===y[y.length-1]||'"'==y[9]&&'"'===y[y.length-1])g||(g=y.slice(1,-1));else throw"Unknown filter: `"+y+'` in "'+a+'"';}}h&&!g&&console.warn("Template var `"+d+'` not found in context. String: "'+a+'" Context:',c);return b+(g||"")+k})};var f=a.namespace("Squarespace.ObjectBuilder");
f.operations="include update when value template concat trim".split(" ");f.walkObject=b;f.build=c;f.make=e;f.makeArray=function(a){return e({obj:a}).obj}},"1.0",{requires:["oop"]})},150:function(m,n,h){YUI.add("squarespace-plugin-progress-bar",function(a){a.namespace("Squarespace.Plugin");var d=a.Squarespace.Plugin.ProgressBar=a.Base.create("ProgressBar",a.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){d.superclass._renderContent.call(this);this._syncProgressBar()},_bindAttributeChanges:function(){d.superclass._bindAttributeChanges.call(this);
this.after("progressChange",this._syncProgressBar,this)},_syncProgressBar:function(){var a=this._meterEl.one(".bar-inner"),c=this.get("progress"),c=Math.max(0,Math.min(100,0+c));a.setStyle("width",c+"%")}},{NS:"progress-bar",PROGRESS_METER_TEMPLATE:'<div class="bar"><div class="bar-inner"></div></div>',ATTRS:{progress:{value:0,validator:function(b,c){return a.Lang.isNumber(b)&&0<=b&&100>=b}}}})},"1.0",{requires:["base","squarespace-plugin-progress-base"]})},151:function(m,n,h){YUI.add("squarespace-plugin-progress-base",
function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.ProgressBase=a.Base.create("ProgressBase",a.Plugin.Base,[],{initializer:function(){this._renderContent();this._bindAttributeChanges();this._setClasses();this._bindContent()},destructor:function(){var d=this._contentEl;d&&d.getDOMNode()&&(d.setStyle("opacity",0),a.later(this.get("unplugDelay"),d,d.remove));this._cancelEl=this._meterEl=this._contentEl=null;this.get("host").removeClass("progress-show-meter");this.get("host").removeClass("progress-show-cancel")},
_renderContent:function(){var d=this._contentEl=a.Node.create('<div class="progress-container"><div class="progress"><div class="cancel-process">Cancel</div></div></div>'),b=d.one(".progress");this._meterEl=a.Node.create(this.constructor.PROGRESS_METER_TEMPLATE);b.prepend(this._meterEl);this._cancelEl=d.one(".cancel-process");b=this.get("host");this.get("append")?b.append(d):b.prepend(d)},_bindAttributeChanges:function(){this.after(["showChange","showCancelChange"],this._setClasses,this)},_setClasses:function(){var a=
this.get("host"),b=this.get("show"),c=this.get("showCancel");a.toggleClass("progress-show-meter",b);this._meterEl.toggleClass("visible",b);a.toggleClass("progress-show-cancel",c);this._cancelEl.toggleClass("visible",c)},_bindContent:function(){this._cancelEl.on("click",function(a){a.halt();this.fire("cancel")},this)}},{NS:"progress",PROGRESS_METER_TEMPLATE:"",ATTRS:{show:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},showCancel:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},
unplugDelay:{value:300,validator:a.Squarespace.AttrValidators.isNumber},append:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","plugin","squarespace-attr-validators"]})},191:function(m,n,h){YUI.add("squarespace-markdown",function(a){a.namespace("Squarespace.Lang");a.Squarespace.Lang.markdownFromHTML=function(a){var b=h(1881);return!a?"":b(a)};a.Squarespace.Lang.markdownToHTML=function(a){var b=h(1882);return!a?"":(new b.converter).makeHtml(a)}},
"1.0",{requires:[]})},213:function(m,n,h){YUI.add("squarespace-json-template",function(a){function d(a){return a.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function b(a,b){var c=p[a+b];void 0===c&&(c="("+d(a)+"\\S.*?"+d(b)+"\n?)",c=RegExp(c,"g"));return c}function c(a,b){var c=[{context:a,index:-1}];return{PushSection:function(a){if(void 0===a||null===a)return null;a="@"==a?c[c.length-1].context:c[c.length-1].context[a]||null;c.push({context:a,index:-1});return a},Pop:function(){c.pop()},next:function(){var a=
c[c.length-1];-1==a.index&&(a={context:null,index:0},c.push(a));var b=c[c.length-2].context;if(a.index==b.length)c.pop();else return a.context=b[a.index++],!0},_Undefined:function(a){return void 0===b?null:b},_LookUpStack:function(a){for(var b=c.length-1;;){var e=c[b];if("@index"==a){if(-1!=e.index)return e.index}else if(e=e.context,"object"===typeof e&&(e=e[a],void 0!==e))return e;b--;if(-1>=b)return this._Undefined(a)}},get:function(a){if("@"==a)return c[c.length-1].context;var b=a.split("."),e=
this._LookUpStack(b[0]);if(1<b.length)for(var d=1;d<b.length;d++){if(null===e)return"[JSONT: Can't resolve '"+a+"'.]";e=e[b[d]];if(void 0===e)return this._Undefined(b[d])}return e}}}function e(a,b,c){for(var e=0;e<a.length;e++){var d=a[e];if("string"==typeof d)c(d);else(0,d[0])(d[1],b,c)}}function k(a,b,c){var e;e=b.get(a.name);for(var d=0;d<a.formatters.length;d++){var f=a.formatters[d];e=(0,f[0])(e,b,f[1])}c(e)}function f(a,b,c){var d=b.PushSection(a.section_name),f=!1;d&&(f=!0);d&&0===d.length&&
(f=!1);f?(e(a.Statements(),b,c),b.Pop()):(b.Pop(),e(a.Statements("or"),b,c))}function g(a,b,c){for(var d=b.get("@"),f=0;f<a.clauses.length;f++){var k=a.clauses[f],g=k[1];if((0,k[0][0])(d,b,k[0][1])){e(g,b,c);break}}}function r(a,b,c){var d=b.PushSection(a.section_name);if(d&&0<d.length){var d=d.length-1,f=a.Statements();a=a.Statements("alternate");for(var k=0;void 0!==b.next();k++)e(f,b,c),k!=d&&e(a,b,c)}else e(a.Statements("or"),b,c);b.Pop()}function h(c,e){function d(b){if(b.startsWith(u)){var c=
e.partials[b.substr(u.length)];if(c)return[function(b,e,d){return a.JSONTemplate.evaluateJsonTemplate(c,b)},null];throw{name:"BadPartialInclude",message:b.substr(u)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."};}var f=W.lookup(b);if(!f[0])throw{name:"BadFormatter",message:b+" is not a valid formatter"};return f}function p(a){var b=v.lookup(a);if(!b[0])throw{name:"BadPredicate",message:a+" is not a valid predicate"};return b}var W=
new t([w(a.JSONTemplate.DEFAULT_FORMATTERS),l(a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),v=t([w(a.JSONTemplate.DEFAULT_PREDICATES),l(a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),L=e.format_char||"|";if(":"!=L&&"|"!=L)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var z=e.meta||"{}",M=z.length;if(1==M%2)throw{name:"ConfigurationError",message:z+" has an odd number of metacharacters"};for(var S=z.substring(0,M/2),z=z.substring(M/2,M),M=b(S,z),B=m({}),N=[B],
J=S.length,C,q,O=0;;){C=M.exec(c);if(null===C)break;else q=C[0];C.index>O&&(O=c.slice(O,C.index),B.Append(O));O=M.lastIndex;C=!1;"\n"==q.slice(-1)&&(q=q.slice(null,-1),C=!0);q=q.slice(J,-J);if("#"!=q.charAt(0)){if("."==q.charAt(0)){q=q.substring(1,q.length);var E={"meta-left":S,"meta-right":z,space:" ",tab:"\t",newline:"\n"}[q];if(void 0!==E){B.Append(E);continue}if(E=q.match(H)){q=E[3];E[1]?(C=r,q=n({section_name:q})):(C=f,q=m({section_name:q}));B.Append([C,q]);N.push(q);B=q;continue}var P;if(E=
q.match(y)){C=(P=E[1])?p(P):null;B.NewOrClause(C);continue}var E=!1,F=q.match(G);if(F){if(P=F[1],E=!0,-1==P.indexOf("?")){C=[function(a){return function(b,c){var e,d,f;if(-1!==a.indexOf(" || ")){e=a.split("||");for(f=0;f<e.length;f++)if(d=e[f].trim(),c.get(d))return!0;return!1}if(-1!==a.indexOf(" && ")){e=a.split(" && ");for(f=0;f<e.length;f++)if(d=e[f].trim(),!c.get(d))return!1;return!0}return c.get(a)}}(P),null];q=x();q.NewOrClause(C);B.Append([g,q]);N.push(q);B=q;continue}}else if("?"==q.charAt(q.length-
1)||"?"==q.split(" ")[0].charAt(q.split(" ")[0].length-1))P=q,E=!0;if(E){C=P?p(P):null;q=x();q.NewOrClause(C);B.Append([g,q]);N.push(q);B=q;continue}if("alternates with"==q){B.AlternatesWith();continue}if("end"==q){N.pop();if(0<N.length)B=N[N.length-1];else throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};continue}}F=q.split(L);if(1==F.length)E=[d("str")];else{E=[];for(q=1;q<F.length;q++)E.push(d(F[q]));q=F[0]}B.Append([k,{name:q,formatters:E}]);C&&B.Append("\n")}}B.Append(c.slice(O));
if(1!==N.length)throw{name:"TemplateSyntaxError",message:"Got too few {end} statements."};return B}a.namespace("JSONTemplate");var u="apply ",p={};a.JSONTemplate.DEFAULT_FORMATTERS=a.Squarespace.TEMPLATE_FORMATTERS;a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(a.Squarespace.TEMPLATE_PREFIX_FORMATTERS,[{name:"pluralize",func:function(a,b,c){switch(c.length){case 0:b="";c="s";break;case 1:b="";c=c[0];break;case 2:b=c[0];c=c[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"};
}return 1==a?b:c}},{name:"encode-space",func:function(a,b,c){return a.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(a,b,c){b=c[0]||100;c=c[1]||"...";a&&a.length>b&&(a=a.substring(0,b),a=a.replace(/\w+$/,""),a+=c);return a}},{name:"date",func:function(b,c,e){var d=0,d=(new Date(b)).getTimezoneOffset();if(!a.Lang.isNumber(b))return"Invalid date.";if("undefined"!==typeof TimezoneJS){var f;try{f=new TimezoneJS.Date(b,c.get("website.timeZone"))}catch(k){return"Invalid Timezone"}d=(isNaN(f.getTimezoneOffset())?
0:f.getTimezoneOffset())-d}else c=-parseInt(c.get("website.timeZoneOffset"),10)/6E4,f=(new Date).getTimezoneOffset(),d=c-f;b=new Date(b-6E4*d);e=e.join(" ");return a.DataType.Date.format(b,{format:e})}},{name:"image",func:function(b,c,e){var d;b.mediaFocalPoint&&(d=b.mediaFocalPoint.x+","+b.mediaFocalPoint.y);return'<img class="'+(e[0]?e[0]:"thumb-image")+'" '+(b.title?'alt="'+a.Squarespace.Escaping.escapeForHtmlTag(b.title)+'" ':"")+' data-image="'+b.assetUrl+'" data-image-dimensions="'+b.originalSize+
'" data-image-focal-point="'+d+'"/>'}},{name:"timesince",func:function(b,c,e){if(!a.Lang.isNumber(b))return"Invalid date.";e.join(" ");return'<span class="timesince" data-date="'+b+'">'+a.Squarespace.DateUtils.humanizeDate(b)+"</span>"}},{name:"resizedHeightForWidth",func:function(a,b,c){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/a;return parseInt(b*c,10)}},{name:"resizedWidthForHeight",func:function(a,
b,c){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/b;return parseInt(a*c,10)}},{name:"squarespaceThumbnailForWidth",func:function(b,c,e){return a.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(e[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(b,c,e){c=b.split("x");if(2!=c.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(c[0],10);c=parseInt(c[1],
10);e=parseInt(e[0],10)/c;e=parseInt(b*e,10);return a.Squarespace.Rendering.getSquarespaceSizeForWidth(e)}},{name:"cycle",func:function(a,b,c){return c[(a-1)%c.length]}}]);var w=function(a){return{lookup:function(b){return[a[b]||null,null]}}},l=function(a){return{lookup:function(b){for(var c=0;c<a.length;c++){var e=a[c].name,d=a[c].func;if(b.slice(0,e.length)==e)return c=b.charAt(e.length),b=""===c?[]:b.split(c).slice(1),[d,b]}return[null,null]}}},t=function(a){return{lookup:function(b){for(var c=
0;c<a.length;c++){var e=a[c].lookup(b);if(e[0])return e}return[null,null]}}},v=function(a){var b={current_clause:[],Append:function(a){b.current_clause.push(a)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"};},NewOrClause:function(a){throw{name:"NotImplemented"};}};return b},m=function(a){var b=v(a);b.statements={"default":b.current_clause};b.section_name=a.section_name;b.Statements=function(a){return b.statements[a||
"default"]||[]};b.NewOrClause=function(a){if(a)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};b.current_clause=[];b.statements.or=b.current_clause};return b},n=function(a){var b=m(a);b.AlternatesWith=function(){b.current_clause=[];b.statements.alternate=b.current_clause};return b},x=function(a){var b=v(a);b.clauses=[];b.NewOrClause=function(a){a=a||[function(a){return!0},null];b.current_clause=[];b.clauses.push([a,b.current_clause])};return b},
H=/(repeated)?\s*(section)\s+(\S+)?/,y=/^or(?:[\s\-]+(.+))?/,G=/^if(?:[\s\-]+(.+))?/;a.JSONTemplate.Template=Class.create({initialize:function(a,b,c){a=this.removeMultilineComments(a);this._options=b||{};this._program=h(a,this._options)},removeMultilineComments:function(a){for(var b=a.search("{##"),c;0<=b;)c=a.substr(b),a=a.substr(0,b)+c.substr(c.search("##}")+3),b=a.search("{##");return a},render:function(a,b){var d=c(a,this._options.undefined_str);e(this._program.Statements(),d,b)},expand:function(a){var b=
[];this.render(a,function(a){b.push(a)});return b.join("")}});a.JSONTemplate.DEFAULT_PREDICATES=a.Squarespace.TEMPLATE_PREDICATES;a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=a.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES;a.JSONTemplate.evaluateJsonTemplate=function(b,c,e){return"string"!=typeof b?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof b+", template: "+JSON.stringify(b)+", dictionary: "+JSON.stringify(c)+", partials: "+JSON.stringify(e)+")":(new a.JSONTemplate.Template(b,
{partials:e})).expand(c)}},"1.0",{requires:"datatype-date-format squarespace-common squarespace-util squarespace-date-utils json squarespace-template-helpers".split(" ")})},283:function(m,n,h){YUI.add("squarespace-dialog-hidden",function(a){var d=function(){};a.namespace("Squarespace.DialogFields").Hidden=a.Base.create("hidden",a.Squarespace.DialogField2,[],{initializer:function(){this.unplug(a.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:d,bindUI:d,syncUI:d},{CSS_PREFIX:"sqs-hidden",
ATTRS:{visible:{value:!1},focusable:{value:!1}}});a.Squarespace.DialogFields.HiddenField=a.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","base-build","squarespace-dialog-field-2"]})},284:function(m,n,h){YUI.add("squarespace-dialog-description",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.Description=a.Squarespace.DialogFields.DescriptionField=a.Base.create("DescriptionField",a.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},
renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-description");a.Lang.isArray(b)&&0<b.length&&this._descEl.setStyles({paddingTop:b[0],paddingBottom:b[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){d.superclass.bindUI.call(this);this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){d.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},
_attachNode:function(b){var c=this.get(b);a.Lang.isString(c)&&0<c.length&&(attrNode=a.Node.create('<div class="'+b+'">'+c+"</div>"),this._descEl.append(attrNode))},_getAsString:function(b){return!a.Lang.isValue(b)?"":b+""},setTitle:function(a){this.set("title",a)},setText:function(a){this.set("text",a)}},{CSS_PREFIX:"sqs-description",TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",
validator:a.Lang.isString},padding:{value:[],validator:a.Lang.isArray},focusable:{value:!1}}})},"1.0.0",{requires:["node","base","squarespace-dialog-field-2"]})},285:function(m,n,h){YUI.add("squarespace-google-domains-utils",function(a){a.namespace("Squarespace.GoogleDomains");var d=function(b){a.Lang.isString(b)||(b="");(new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Failed to add domain</div><div class="description">'+b+
'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:!0})).show()};a.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var b=window.location.search;return{userId:a.QueryString.parse(b.substr(1)).userId||null,domainName:a.QueryString.parse(b.substr(1)).domainName||null}};a.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var b=a.Squarespace.SessionStorage.getSessionData("googleDomain");if(a.Lang.isObject(b))return!0;b=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();
return!a.Lang.isNull(b.userId)&&!a.Lang.isNull(b.domainName)?!0:!1};a.Squarespace.GoogleDomains.showConfirmMessage=function(b,c,e){var d=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams().userId,f=new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Link Domain: '+c+'</div><div class="description">Your site <strong>'+("http://"+window.location.hostname)+"</strong> will be available at <strong>http://www."+c+'</strong>.</div><div class="buttons"><input type="button" class="login-button" name="login" value="Link Domain"/></div></div>',
noHeightConstrain:!0});f.show();f.getContentEl().on("click",function(){f.hide();e(b,d,c)})};a.Squarespace.GoogleDomains.startConsentFlow=function(b,c,e){var k=new a.Squarespace.Spinner({color:"light",size:"large",render:a.one(".spinner-wrapper")});k.spin();a.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");return a.Squarespace.GoogleDomainsConsentService.getConsent(e,c,b).then(function(b){(new a.Squarespace.Domains.Models.GoogleDomain({googleAuthRequestId:b.requestId})).save({},
function(b){k.stop();a.Lang.isValue(b)?d(b.responseJSON.message):window.location="/config#/settings/domains"})},function(b){a.Squarespace.Analytics.trackInternal("domain_link_domain_failure",{host:"google"});k.stop();d(b)})}},"1.0",{requires:["querystring","squarespace-google-domains-consent-service","squarespace-domains-models-google-domain","squarespace-session-storage"]})},286:function(m,n,h){YUI.add("squarespace-google-domains-consent-service",function(a){a.namespace("Squarespace");a.Squarespace.GoogleDomainsConsentService=
new (a.Base.create("domainConsentService",a.Base,[],{initializer:function(){this._openWindows={};this._messageCallbacks={};this._messageEventHandler=window.addEventListener("message",a.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler);this._endMonitor()},getConsent:function(d,b,c){return a.Squarespace.Promises.create(function(a,k){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):k()};this._openConsentWindow(d,
b,c)},this)},getConsentForNewSite:function(d,b){return a.Squarespace.Promises.create(function(a,e){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):e()};this._openSignupConsentWindow(d,b)},this)},getConsentForDomain:function(d){return a.Squarespace.Promises.create(function(a,c){this._messageCallbacks[d]=function(e){e.consentGranted?a(e.requestId):c(e)};this._openListConsentWindow(d)},this)},getDomainOnlyConsent:function(d,b,c){return a.Squarespace.Promises.create(function(a,
k){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):k()};this._openDomainConsentOnlyWindow(d,b,c)},this)},getConsentForList:function(){return a.Squarespace.Promises.create(function(d,b){var c=a.guid();this._messageCallbacks[c]=function(a){a.consentGranted?d({requestId:a.requestId}):b()};this._openListConsentWindow(c)},this)},_routeMessage:function(d){var b=d.data.domain;if(a.Lang.isString(b)){var c=this._messageCallbacks[b];a.Lang.isFunction(c)&&(c.call(this,d.data),
delete this._messageCallbacks[b])}},_registerOpenWindow:function(d,b){0>=a.Object.size(this._openWindows)&&this._beginMonitor();this._openWindows[d]=b},_unregisterOpenWindow:function(d){delete this._openWindows[d];0>=a.Object.size(this._openWindows)&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=a.later(300,this,function(){var d=[];a.Object.each(this._openWindows,function(a,c){a.closed&&(this._routeMessage({data:{domain:c,
consentGranted:!1}}),d.push(c))},this);a.Array.each(d,this._unregisterOpenWindow,this)},null,!0)},_openListConsentWindow:function(d){var b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}",{identifier:d,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,d)},_openDomainConsentOnlyWindow:function(d,b,c){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}",
{requestId:b,domain:d,websiteId:c,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,d)},_openConsentWindow:function(d,b,c){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}",{domain:d,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:c||"",userId:b});this._openConsentPopup(b,d)},_openSignupConsentWindow:function(d,b){var c=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}",
{domain:d,userId:b,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(c,d)},_openConsentPopup:function(a,b){var c=window.open(a,"Google Domains Consent","status=0,width=1020,height=520");this._registerOpenWindow(b,c)}}))},"1.0",{requires:["base","promise","squarespace-promises"]})},287:function(m,n,h){YUI.add("squarespace-session-storage",function(a){a.namespace("Squarespace");var d=function(){return a.Lang.isValue(window.localStorage)};a.Squarespace.SessionStorage={saveSessionData:function(b,
c,e){c={value:c};a.Lang.isDate(e)?c.expires=e.getTime():e=null;c=btoa(a.JSON.stringify(c));d()?window.localStorage.setItem(b,c):null===e?a.Cookie.set(b,c,{path:"/"}):a.Cookie.set(b,c,{path:"/",expires:e})},getSessionData:function(b){var c;c=d()?window.localStorage.getItem(b):a.Cookie.get(b);if(!a.Lang.isValue(c))return null;c=a.JSON.parse(atob(c));return a.Lang.isNumber(c.expires)&&c.expires<(new Date).getTime()?(d()&&window.localStorage.removeItem(b),null):c.value},removeSessionData:function(b){d()&&
window.localStorage.removeItem(b);a.Cookie.remove(b)}}},"1.0",{requires:["base","cookie"]})},291:function(m,n,h){YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var d=function(a,c){return function(e){e.halt();a.call(c,e)}};a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{initializer:function(b){!a.Lang.isValue(b.data)&&a.Lang.isValue(b.defaultValue)&&this.set("data",b.defaultValue)},bindUI:function(){a.Squarespace.DialogFields.Check.superclass.bindUI.call(this);
a.Squarespace.Utils.onPointerAction(this.get("boundingBox"),d(this._toggleActive,this));this.get("boundingBox").after("mousedown",function(a){a.halt()},this)},syncUI:function(){a.Squarespace.DialogFields.Check.superclass.syncUI.call(this);this.get("contentBox").empty().setHTML(this.renderTemplate());a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_toggleActive:function(a){this.set("data",!this.get("data"),
{click:a})}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:!1}}})},"1.0",{requires:"base base-build event-tap squarespace-dialog-field-2 squarespace-dialog-check-template squarespace-util".split(" ")})},292:function(m,n,h){YUI.add("squarespace-dialog-password",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.Password=a.Base.create("Password",a.Squarespace.DialogFields.Text,[],{initializer:function(){this.publish("forgot-password",
{emitFacade:!0});this.get("strengthMeterVisible")&&typeof zxcvbn!==typeof Function&&a.Get.js("https://static."+Static.SQUARESPACE_CONTEXT.appDomain+"/universal/scripts-thirdparty/zxcvbn/zxcvbn-min.js",function(a){a?console.error("[Password strength] Error loading zxcvbn."):console.log("[Password strength] Loaded zxcvbn.")});this._barColor="red"},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox");this.get("strengthMeterVisible")&&(this._strengthMeter=b.plug(a.Squarespace.Plugin.ProgressBar,
{show:!0,append:!0})[a.Squarespace.Plugin.ProgressBar.NS]);this._forgotNode=b.appendChild(this.getProperty("FORGOT_PASSWORD_TEMPLATE"))},bindUI:function(){d.superclass.bindUI.call(this);this._forgotNode.on("click",function(a){a.halt();this.fire("forgot-password")},this);this.get("strengthMeterVisible")&&this.after("dataChange",this._updateStrengthMeter,this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("boundingBox");b.toggleClass("has-title",a.Lang.isValue(this.get("strings.title")));
b.toggleClass("forgot-visible",this.get("forgotVisible")&&""===this.get("data").trim())},_updateStrengthMeter:function(){if(typeof zxcvbn===typeof Function){var a=this.get("data"),c=zxcvbn(a),c=100*((Math.log(c.crack_time)+7)/30),c=null===a||""===a?Math.max(Math.min(c,100),0):Math.max(Math.min(c,100),3);33>c?this._setBarColor("red"):33<=c&&67>c?this._setBarColor("yellow"):67<=c&&this._setBarColor("green");this._strengthMeter.set("progress",c)}},_setBarColor:function(a){var c=this._strengthMeter._meterEl.one(".bar-inner");
c.toggleClass(this._barColor,!1);c.toggleClass(a,!0);this._barColor=a}},{FORGOT_PASSWORD_TEMPLATE:'<a class="forgot">Forgot?</a>',CSS_PREFIX:"sqs-dialog-password",ATTRS:{forgotVisible:{value:!1,validator:a.Lang.isBoolean},strengthMeterVisible:{value:!1,validator:a.Lang.isBoolean,writeOnce:"initOnly"},password:{value:!0,readOnly:!0}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-plugin-progress-bar"]})},293:function(m,n,h){YUI.add("squarespace-dialog-text",function(a){a.namespace("Squarespace.DialogFields");
var d=a.Squarespace.DialogFields.Text=a.Squarespace.DialogFields.TextField=a.Base.create("text",a.Squarespace.DialogField2,[],{destructor:function(){this._textField&&this._textField.remove(!0);this._textField=null},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("name"),b=this.get("autocompleteType");this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",
this.get("password")?"password":"text");a&&this._textField.setAttribute("name",a);b&&this._textField.setAttribute("x-autocompletetype",b);this.get("autocompleteEnabled")||(this.get("password")&&this.get("contentBox").prepend('<input type="password" tabindex="-1" class="sqs-offscreen" />'),this._textField.setAttribute("autocomplete","off"));this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this.get("data"))},bindUI:function(){d.superclass.bindUI.call(this);this.get("id");this.after("dataChange",
this._afterDataChange);this._textField.after("valuechange",this._afterValueChange,this);this.after("disabledChange",this.syncUI);var b=this._textField.getDOMNode(),c="addEventListener";a.Lang.isFunction(b.attachEvent)&&(c="attachEvent");b[c]("focus",a.bind(this._afterFocus,this));b[c]("blur",a.bind(this._afterBlur,this));this._textField.on("click",function(a){a.halt()});this._textField.after("keyup",function(a){13===a.keyCode&&this.get("submitOnEnter")?(this.fire("submit"),(a=this.get("dialog"))&&
a.saveAndClose()):27===a.keyCode&&a.halt()},this);this._textField.on("keypress",this.applyKeyFilter,this);!0===this.get("mailcheck")&&this._textField.plug(a.Squarespace.Plugin.MailCheck,{field:this});this.on("readOnlyChange",function(a){a.newVal?this._textField.setAttribute("readonly","readonly"):this._textField.removeAttribute("readonly")},this)},syncUI:function(){d.superclass.syncUI.call(this);var a=this.get("strings.placeholder");a&&this._textField.setAttribute("placeholder",a);this.get("disabled")?
this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var a=this.get("data");return this.get("validator")(a)?this.get("required")&&this.isEmpty()?[this.get("strings.requiredFieldEmptyMessage")]:[]:[this.get("strings.validationFailMessage")]},isEmpty:function(){return""===this.get("data")},focus:function(){d.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},
blur:function(){d.superclass.blur.call(this);this.get("rendered")&&this._textField&&this._textField.blur()},disable:function(){d.superclass.disable.call(this);this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){d.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(b){var c=this.get("keyFilter"),e=this.get("keyFilterExplanation"),d;if(c&&(0===a.UA.gecko||b._event.isChar)&&!(13===b.charCode&&
this.get("submitOnEnter")))d=String.fromCharCode(b.which),!d.match(RegExp(c))&&0<d.length&&(e&&this.showError(e),b.halt())},_afterDataChange:function(a){a.dataSync||this._textField.set("value",a.newVal||"",{dataSync:!0});this.hideError()},_afterValueChange:function(a){a.dataSync||this.set("data",a.newVal,{dataSync:!0})},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!0);a.UA.ie||this.focus()},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",
!1);this._textField&&this.set("data",this._textField.get("value"),{dataSync:!0});this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:"This must be a string.",requiredFieldEmptyMessage:"This is a required field."}},data:{value:"",setter:function(b){a.Lang.isValue(b)||(b="");return b},validator:function(b){return a.Lang.isString(b)||!a.Lang.isValue(b)}},validator:{value:a.Lang.isString},password:{value:!1,validator:a.Lang.isBoolean},
submitOnEnter:{value:!1,validator:a.Lang.isBoolean},disabled:{value:!1,validator:a.Lang.isBoolean},autocompleteType:a.Squarespace.AutocompleteTypeATTR,autocompleteEnabled:{value:!0,validator:a.Lang.isBoolean,writeOnce:"initOnly"},mailcheck:{value:!1,validator:a.Lang.isBoolean},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:!1},selectAllOnFocus:{value:!1}}});a.Squarespace.DialogFields.LabeledText=a.Base.create("labeledText",a.Squarespace.DialogFields.Text,[a.Squarespace.DialogFields.DialogFieldLabel],
{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var b=a.Squarespace.DialogFields.MoneyText=a.Base.create("moneyText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){b.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var a=this.get("contentBox").one("input");a.on("valuechange",function(){this.set("data",a.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},
ATTRS:{data:{value:0,validator:a.Lang.isNumber},validator:{value:a.Lang.isNumber},prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}}}}),c=a.Squarespace.DialogFields.Email=a.Base.create("emailText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){c.superclass.renderUI.call(this);this.get("contentBox").one("input").setAttribute("type","email")}},{CSS_PREFIX:"sqs-email-text",ATTRS:{mailcheck:{value:!0}}}),e=a.Squarespace.DialogFields.Url=a.Base.create("urlText",a.Squarespace.DialogFields.Text,
[],{renderUI:function(){e.superclass.renderUI.call(this);this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var a=this.get("contentBox").one(".sqs-input-wrapper-content");a.wrap('<div class="sqs-input-wrapper"></div>');a.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){e.superclass.bindUI.call(this);this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(b){var c=this.get("filter"),e;if("url-slug"===c||"url-slug-with-slash"==c)e=this._textField.get("value"),
c="url-slug"===c?a.Squarespace.Utils.createUrl(e):a.Squarespace.Utils.createUrlWithSlash(e),b=this._textField.selectionStart-(32==b.keyCode?0:1),e!=c&&(this._textField.set("value",c),this._textField.selectionStart=b,this._textField.selectionEnd=b)}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:"url-slug-with-slash"},prefix:{value:"/"}}})},"1.0",{requires:"base base-build event-valuechange squarespace-dialog-field-2 squarespace-autocomplete-types squarespace-dialog-text-template squarespace-dialog-label squarespace-mailcheck squarespace-attr-validators".split(" ")})},
294:function(m,n,h){YUI.add("squarespace-autocomplete-types",function(a){a.namespace("Squarespace.Constants");a.Squarespace.Constants.AutocompleteTypes={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};a.Squarespace.AutocompleteTypeATTR={value:null,writeOnce:"initOnly",validator:function(d){if(a.Lang.isNull(d)||
a.Object.hasValue(a.Squarespace.Constants.AutocompleteTypes,d))return!0;console.warn(this.name+": That constant is not an available autocomplete type.");return!1}}},"1.0")},295:function(m,n,h){YUI.add("squarespace-dialog-label",function(a){a.namespace("Squarespace.Plugin").DialogFieldLabel=a.Base.create("dialogFieldLabel",a.Plugin.Base,[],{initializer:function(a){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){a.detach(this.get("id")+
"|*");var d=this.get("host"),b=d.get("boundingBox");d.get("rendered")&&(b&&b._node)&&d.get("boundingBox").removeClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},renderLabel:function(){this._labelNode=a.Node.create("<label></label>");this._labelNode.addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);
var d=this._labelNode;this.get("inField");var b=this.get("renderNode");this.get("strings.text");var c=this.get("className"),e=this.get("forNode"),k=this.get("host").get("contentBox");c&&d.addClass(c);b?(a.Lang.isString(b)&&(b=k.one(b)),b.appendChild(d)):e?(a.Lang.isString(e)&&(e=k.one(e)),(b=e.getAttribute("id"))&&d.setAttribute("for",b),e.insert(d,"before")):(k.one("input")||k.one("select")||k.one("textarea")||k.one("button")).insert(d,"before")},bindLabel:function(){var a=this.get("id");this.on(a+
"|classNameChange",function(a){this._labelNode.removeClass(a.prevVal);this._labelNode.addClass(a.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});a.namespace("Squarespace.DialogFields").DialogFieldLabel=function(d){a.Do.before(function(){this.plug(a.Squarespace.Plugin.DialogFieldLabel,a.merge({renderNode:d.labelRenderNode||
null,forNode:d.labelForNode||null,className:d.labelClassName||null,"strings.text":this.get("strings.label")},d.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,"renderUI",this)};a.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]})},296:function(m,n,h){YUI.add("squarespace-mailcheck",function(a){var d=h(2009);d.defaultTopLevelDomains.push("au","com.au","se","de","me","dk","co.nz","it","be");a.namespace("Squarespace.Plugin");
a.Squarespace.Plugin.MailCheck=a.Base.create("MailCheck",a.Plugin.Base,[],{initializer:function(a){this._host=a.host;this._host.on("blur",this.checkMailAddress,this)},checkMailAddress:function(b){b=this._host.get("value");null!==b&&3<b.length&&d.run({email:b,suggested:a.bind(this.emailSuggestions,this),empty:a.bind(this.noEmailSuggestions,this)})},emailSuggestions:function(b){this._host.hasPlugin("flyoutPlugin")||this._host.plug(a.Squarespace.Animations.Flyout,{duration:0.3});this.get("field").showError('Did you mean <a class="corrected-email" href="#">'+
b.full+"</a>?");if(a.one(".corrected-email"))a.one(".corrected-email").once("click",this._onClick,this)},noEmailSuggestions:function(a){(a=this._host.flyoutPlugin)&&a.hide()},_onClick:function(a){a.preventDefault();a.halt();if(a=this._host.flyoutPlugin)this._host.set("value",a.get("node").one("a").getHTML()),a.hide(),this.get("field").clearError()},destructor:function(){}},{NS:"mailCheck",ATTRS:{field:{}}})},"1.0",{requires:["squarespace-node-flyout"]})},298:function(m,n,h){YUI.add("squarespace-widgets-password-recovery",
function(a){var d={ctor:a.Squarespace.DialogFields.Text,config:{name:"email",submitOnEnter:!0,strings:{placeholder:"Email Address"}}},b={ctor:a.Squarespace.DialogFields.Description,config:{name:"description",text:"Please enter the email address that you used when creating your account."}};a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.PasswordRecovery=a.Base.create("passwordRecovery",a.Squarespace.EditingDialog,[],{initialize:function(){c.superclass.initialize.call(this);var a=this._passwordRecoveryDialogConfig();
this.setParams(a);this.on("send-requested",this._onSubmit,this);this.on("cancel-click",this._onCancel,this)},_passwordRecoveryDialogConfig:function(){return{name:"password-recovery",style:"flyout",savingText:"Sending",overlay:0.5,width:370,zIndex:100001,closeOthers:!1,discardChangesConfirmation:!1,buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Send Email"}],tabs:[{title:"Password Recovery",fields:[b,d]}]}},_onSubmit:function(){var b=this._getEmail();this._isValidEmail(b)?this._sendPasswordReset(b).then(a.bind(this._sentSuccessfully,
this),a.bind(this._sendFailed,this)):this.showErrors({email:"You need a valid email address."})},_getEmail:function(){return this.getData().email},_isValidEmail:function(b){return a.Lang.isString(b)&&0<b.indexOf("@")},_sentSuccessfully:function(){this.close();var b=this._getEmail();(new a.Squarespace.Widgets.Alert({"strings.title":"Sent","strings.message":"We've sent an email to "+b+" with further instructions on resetting your password.","strings.confirm":"Dismiss"})).on("confirm",this.destroy,this)},
_sendFailed:function(b){a.Lang.isObject(b.errors)?this.showErrors(b.errors):new a.Squarespace.Widgets.Alert({"strings.title":"An error occurred","strings.message":"An error occurred while sending your email.  Please try again."})},_onCancel:function(){this.destroy()},_sendPasswordReset:function(b){return new a.Promise(function(c,d){a.Data.post({url:"/api/auth/password-reset/email",secure:!0,json:!0,data:{email:b},success:c,failure:d})})}},{})},"1.0",{requires:["base","squarespace-dialog","squarespace-dialog-text",
"squarespace-widgets-alert"]})},299:function(m,n,h){YUI.add("squarespace-widgets-two-factor-auth",function(a){var d={name:"two-factor-auth",style:"flyout",savingText:"Checking",zIndex:2E5,width:400,height:190,closeOthers:!1,discardChangesConfirmation:!1,title:"Enter your verification code",disableOverlayCancel:!0,initialData:{email:{$value:"email"}},buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:{$value:"saveButtonText"}}],fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:'Open <a href="https://support.google.com/accounts/answer/1066447?hl=en" target="_blank">Google Authenticator</a> to view your code'}},
{ctor:a.Squarespace.DialogFields.Text,config:{name:"code",submitOnEnter:!0,className:"large",strings:{placeholder:"Verification Code"}}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"sendSms",text:'Click <a class="send-sms" href="" onclick="javascript:noop();">here</a> to send your code via SMS'}}]},b={saveButtonText:"Login",email:null};a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.TwoFactorAuth=a.Base.create("TwoFactorAuth",a.Squarespace.EditingDialog,[],{initialize:function(e){c.superclass.initialize.call(this);
e=a.merge(b,e);e=a.Squarespace.ObjectBuilder.make(a.clone(d),{},e);this.setParams(e);this.on("send-requested",this._submit,this);this.onceAfter("ready",this._bindSendSms,this);this.publish("success",{emitFacade:!0})},_bindSendSms:function(){this.getField("sendSms").get("contentBox").one(".send-sms").on("click",this._sendSms,this)},_sendSms:function(b){b&&b.halt();var c=this.getData();a.Squarespace.Promises.create(function(b,e){a.Data.post({url:"/api/auth/two-factor/recovery-notifications/sms",secure:!0,
json:!0,data:c,success:b,failure:e})}).then(this._showSendSmsConfirm.bind(this),this._handleFailure.bind(this))},_showSendSmsConfirm:function(b){new a.Squarespace.Widgets.Information({"strings.title":"Sent",width:200})},_submit:function(b){b.halt();var c=this.getData();a.Squarespace.Promises.create(function(b,e){a.Data.post({url:"/api/auth/two-factor",secure:!0,json:!0,data:c,success:b,failure:e})}).then(this._handleSuccess.bind(this),this._handleFailure.bind(this))},_handleSuccess:function(){this.fire("success")},
_handleFailure:function(b){if(b.twoFactorAuthException){var c=a.Squarespace.TwoFactorAuthExceptionType;switch(b.exceptionCode){case c.LOGIN_REQUIRED:this.showErrors({code:"Please log in again"});break;case c.INVALID_CODE:this.showErrors({code:"Invalid code"});break;case c.NO_PHONE_NUMBER:new a.Squarespace.Widgets.Alert({"strings.title":"No phone number","strings.message":"We could not find a phone number for this account."});break;default:console.warn("Unexcepted TwoFactorAuthExceptionType: "+b.exceptionCode)}}else new a.Squarespace.Widgets.Alert({"strings.title":"An unexpected error occurred",
"strings.message":"Please try again"})}})},"1.0",{requires:"base squarespace-dialog squarespace-dialog-description squarespace-dialog-text squarespace-enum squarespace-object-builder squarespace-promises squarespace-widgets-alert squarespace-widgets-information".split(" ")})},346:function(m,n,h){YUI.add("squarespace-dialog-multi-option",function(a){var d=a.namespace("Squarespace.DialogFields").MultiOption=a.Base.create("multiOption",a.Squarespace.DialogField2,[],{initializer:function(b){this.get("data");
!this.get("data")&&!a.Lang.isUndefined(b.defaultValue)&&this.set("data",b.defaultValue);this._selectedOptionEl=null;this.publish("option-click",{broadcast:2})},renderUI:function(){d.superclass.renderUI.call(this);this._calculateMargins();this._renderTitle();this._renderOptions()},bindUI:function(){this.get("contentBox").delegate("click",this._onOptionClick,".option",this);this.after("optionsChange",this._renderOptions,this);this.after("stringsChange",this._renderTitle,this)},syncUI:function(){d.superclass.syncUI.call(this);
this._setupOptionWidths()},getBBInnerWidth:function(){var a=this.get("boundingBox");return a.get("offsetWidth")-(parseInt(a.getComputedStyle("paddingLeft"),10)+parseInt(a.getComputedStyle("paddingRight"),10))},selectOption:function(a){this.get("contentBox").all(".option").each(function(c){this._optionMatchesData(c,a)&&this._selectOption(c)},this)},addOption:function(a){a=this.get("options");a.push(optionOjb);this.set("options",a)},_renderTitle:function(){var b=this.get("strings.title"),c=this.get("contentBox"),
e=c.one(".title");b&&a.Lang.isNull(e)?c.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):b?e.empty().setHTML(this.get("strings.title")):!b&&!a.Lang.isNull(e)&&e.remove(!0)},_renderOptions:function(){var b=this.get("contentBox"),c=this.get("options"),e=this._getOptionWidth();b.all(".option").remove();a.Array.each(c,function(c){if(c.section)b.append(a.Node.create('<div class="option-label">'+c.section+"</div>"));else{var d=a.Node.create(a.Lang.sub('<div class="option" data-value="{value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',
c));d.setData(c);d.setStyles({width:e});var g=c.description;g&&d.one(".option-content").append(a.Node.create('<div class="option-description">'+g+"</div>"));c.icon?d.addClass("icon-"+c.icon):d.addClass("no-icon");b.append(d);this._optionMatchesData(d)&&this._markSelected(d);c.upgradeLocked&&(d.addClass("upgrade-locked"),new a.Squarespace.ToolTip({target:".option.upgrade-locked",title:"Upgrade to Connect",body:"You must be on the Business Plan to use this feature.",dialogTooltip:!0,showTimeout:350}),
d.on("click",function(){(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Do you want to upgrade?","strings.message":"Upgrading to the Business Plan will enable this feature."})).on("confirm",c.upgradeConfirmCb)}))}},this)},_selectOptions:function(){this.get("contentBox").all(".option").each(function(a){this._optionMatchesData(a)&&this._selectOption(a)},this)},_optionMatchesData:function(b,c){a.Lang.isUndefined(c)&&(c=this.get("data"));
var e=b.getData("value");if(this.get("numeric"))return c===a.Number.parse(e);a.Lang.isObject(e)&&a.Lang.isObject(c)&&console.warn("Trying to compare to objects, which is a bit out of scope.");return c===e},_onOptionClick:function(b){b.halt();b=b.target.hasClass("option")?b.target:b.target.ancestor(".option");var c=this.get("optionClickCb");b.hasClass("upgrade-locked")||this._selectOption(b);a.Lang.isFunction(c)&&c(this.get("data"));this.fire("option-click",{option:this.get("data")})},_markSelected:function(a){a!=
this._selectedOptionEl&&(this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected"),a.addClass("selected"),this._selectedOptionEl=a)},_selectOption:function(b){if(b!=this._selectedOptionEl){this._markSelected(b);b=b.getData("value");if(this.get("numeric")){var c=a.Number.parse(b);a.Lang.isNumber(c)&&(b=c)}this.set("data",b);this.get("submitOnSelect")&&(b=this.get("dialog"),a.Lang.isValue(b)&&b.saveAndClose())}},_getOptionWidth:function(){var b=this.get("optionWidth");if(a.Lang.isValue(b))return b;
b=this.get("options");b=parseInt(this.get("columns"),10)||b.length;return this.getBBInnerWidth()/b-this.get("marginOffset")},_calculateMargins:function(){var b=a.Node.create('<div class="option" style="visibility:hidden;"></div>');this.get("contentBox").append(b);var c=parseInt(b.getStyle("marginLeft"),10),e=parseInt(b.getStyle("marginRight"),10);this.set("marginOffset",c+e);b.remove()},_setupOptionWidths:function(){var a=this.get("columns")||this.get("options").length;0<parseInt(a,10)&&this.get("boundingBox").addClass("columns-"+
a);this.get("contentBox").all(".option").setStyle("width",this._getOptionWidth())}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(b){return this.get("numeric")?a.Number.parse(b):b}},options:{value:null},optionClickCb:{value:null,setter:function(b){return!a.Lang.isFunction(b)?null:b}},optionWidth:{value:null},submitOnSelect:{value:!1},columns:{value:null},marginOffset:{value:0,validator:a.Lang.isNumber},numeric:{value:!1,validator:a.Lang.isBoolean},readOnly:{value:!0}}})},"1.0",{requires:["base",
"datatype-number-parse","squarespace-dialog-field-2","squarespace-widgets-confirmation"]})},351:function(m,n,h){YUI.add("squarespace-comments",function(a){a.namespace("Squarespace");a.Squarespace.Comments=Class.create({initialize:function(b){this.settings={likesAllowed:b.likesAllowed,flagsAllowed:b.flagsAllowed,threaded:b.threaded,approvalRequired:b.approvalRequired,allowAnon:b.allowAnon,avatarsHidden:!b.avatarsOn,readOnly:b.readOnly};this.commentData=new a.Squarespace.CommentData({target:b.identifier,
targetType:b.type,settings:this.settings,formatter:a.bind(this.formatData,this)});this.targetId=b.identifier;this.params=b||{design:{}};this.replyCompleteEvents={};this.threadState=!1;this.lastSortTime=new Date;this.lastHashChangeTime=new Date;this.PaginationModes={EXTEND:1,PAGE:2};this.containerEl=a.one(this.params.containerEl);this.params.paginationMode=this.PaginationModes.EXTEND;this.type=a.Squarespace.BlockType.COMMENT;this.currentPage=1;this.maxComments=50;this.sortOrderLookup=[null];this.sortOrderLookup.push("Oldest First",
"Newest First","Most Liked","Least Liked");this.sortOrder=this.params.sortType;this.commentsEl=a.Node.create('<div class="comments-content"><div class="comment-list"></div></div>');this.settings.readOnly&&this.commentsEl.addClass("read-only");this.commentsEl.appendTo(this.containerEl);this.loadMoreNode=a.Node.create('<div class="load-more"><div class="view-more-btn">Load More Comments</div></div>');this.fullViewNode=a.Node.create('<div class="full-view-btn">View full comment thread</div>');this.history=
new a.HistoryHash;this.commentsEl.delegate("click",this.onReplyToggleClick,".reply",this);this.commentsEl.delegate("click",this.onLikeClick,".comment:not(.liked):not(.read-only) .like",this);this.commentsEl.delegate("click",this.onUnlikeClick,".comment.liked:not(.read-only) .like",this);this.commentsEl.delegate("click",this.onFlagClick,".comment:not(.flagged):not(.read-only) .flag",this);this.commentsEl.delegate("click",this.onUnflagClick,".comment.flagged:not(.read-only) .flag",this);this.commentsEl.delegate("click",
this.onApproveClick,".comment.unmoderated:not(.read-only) .approve",this);this.commentsEl.delegate("click",this.onDeleteClick,".comment:not(.read-only) .delete",this);this.commentsEl.delegate("click",this.replyBtnOnClick,".reply-area-wrapper .comment-btn:not(.read-only)",this);this.commentsEl.delegate("click",this.togglePreview,".reply-area-wrapper .preview-comment",this);this.commentsEl.delegate("click",this.showSubscribe,".subscribe",this);this.commentsEl.delegate("click",this.unsubscribe,".unsubscribe",
this);this.history.on("commentIdChange",this.commentIdHashOnChange,this);this.history.on("commentIdRemove",this.commentIdHashOnRemove,this);this.containerEl.delegate("click",function(){var a,b,d;return function(f){SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,allowAnonymous:this.settings.allowAnon,overlayOpacity:0.5});f=function(){this.onLoading();this.commentData.visibleComments=0;this.retrieveComments({onSuccess:function(a){this.fullDataRender(a)},page:1,order:this.sortOrder},
this);a.detach();d.detach()};a=SQUARESPACE_LOGIN.once("cancel",function(){b.detach();d.detach()},this);b=SQUARESPACE_LOGIN.once("login",f,this);d=SQUARESPACE_LOGIN.once("guestLogin",f,this);SQUARESPACE_LOGIN.show()}}(),".squarespace-comment-login",this);SQUARESPACE_LOGIN.on("login",function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.moderationMode=a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_ACTIVITY_COMMENTS)},this);SQUARESPACE_LOGIN.on("logout",
function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.refreshSubscribeControl();this.moderationMode=!1},this);this.containerEl.delegate("click",function(a){SQUARESPACE_LOGIN.onLogoutClick()},".squarespace-comment-logout",this);this.containerEl.delegate("focus",function(){this.set("text","");this.setAttribute("data-edited",!0)},".comment-input");this.containerEl.delegate("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",!1)},".comment-input");this.containerEl.delegate("focus",
function(a){a.target.setAttribute("data-edited",!0)},".new-comment-area textArea",this);this.containerEl.delegate("click",this.extendComments,".view-more-btn",this);this.containerEl.delegate("click",this.fullViewOnClick,".full-view-btn",this);this.containerEl.delegate("click",this.commentBtnOnClick,".top-level-comment-area .comment-btn:not(.read-only)",this);this.containerEl.delegate("click",this.togglePreview,".top-level-comment-area .preview-comment",this);this.containerEl.delegate("change",function(a){this.sort(a.target.get("value"))},
".hidden-ordering",this);a.Cookie.remove("displayName",{path:"/"});this.subscribeDialogParams={name:"subscribe",style:"flyout",flyoutPointerDirection:"top",width:320,position:"center",closeable:!0,overlay:0.5,top:200,discardChangesConfirmation:!1,title:"Subscribe by Email",primaryTabs:[{title:"Subscribe by Email",icon:"/universal/images-v6/standard/icon_invites_24_light.png",fields:[{type:"text",required:!0,name:"email",title:"Email",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},
{ctor:a.Squarespace.DialogFields.Description,config:{text:"Subscribe to this comment thread by email.",padding:[0,0]}}]}],buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Submit"}]}},doAfterLogin:function(a,c,e){var d,f,g;f=a.once("login",function(){c.call(this);g.detach();d.detach()},e);g=a.once("guestLogin",function(){f.detach();d.detach()});d=a.once("cancel",function(){f.detach();g.detach()})},doAfterGuestLogin:function(a,c,e){var d,f,g;f=a.once("guestLogin",function(){c.call(this);
g.detach();d.detach()},e);g=a.once("login",function(){f.detach();d.detach()});d=a.once("cancel",function(){f.detach();g.detach()})},fullViewOnClick:function(){this.history.addValue("commentId",null)},updateTopLevelButton:function(){var b=a.one(".top-level-comment-area .comment-btn"),c=this.renderToFragment({newCommentAreaTop:{authenticatedAccount:null===SQUARESPACE_LOGIN.account?void 0:SQUARESPACE_LOGIN.account},comments:[{}]}).one(".top-level-comment-area .comment-btn");b&&(b.ancestor(".comment-btn-wrapper").append(c),
b.remove(!0))},updateReplyAreaButtons:function(){var a=this.renderToFragment({comments:[{authenticatedAccount:SQUARESPACE_LOGIN.account}]}).one(".reply-area-wrapper .comment-btn");a&&this.commentsEl.all(".reply-area-wrapper .comment-btn").each(function(c){c.insert(a.cloneNode(!0),"after");c.remove(!0)})},refreshCommentPostButtons:function(){this.updateTopLevelButton();this.updateReplyAreaButtons()},refreshSubscribeControl:function(){SQUARESPACE_LOGIN.account||(Static.SQUARESPACE_CONTEXT.subscribed=
!1);var b,c=this.renderToFragment(this.scatterData({subscribed:Static.SQUARESPACE_CONTEXT.subscribed,comments:[{}]})).one(".subscribe-control");c&&(b=a.one(".subscribe-control"),b.insert(c,"after"),b.remove(!0))},generatePreview:function(b){var c=a.Squarespace.Escaping.escapeForHtml(b.get("value")),e={comments:[{}]},d=null,f=null,d=e.comments[0];b.ancestor(".reply-area-wrapper");var g=!b.ancestor(".reply-area-wrapper"),r;g?b=0:(r=a.one('.comment[data-commentId="'+b.ancestor(".reply-area-wrapper").getAttribute("data-commentId")+
'"]'),b=r.hasAttribute("data-depth")?parseInt(r.getAttribute("data-depth"),10)+1:1);d.body=a.Squarespace.Lang.markdownToHTML(a.Squarespace.Utils.preFormatMarkdown(c));d.memberAccount=a.clone(SQUARESPACE_LOGIN.account);d.authorName=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a.Cookie.get("displayName"))||"Not Logged In";d.addedOn=(new Date).getTime();d.depth=b;f=this.renderToFragment(this.scatterData(e));d=f.one(".comment");d.addClass("comment-preview");g?d.addClass("top-level"):
(d.setAttribute("data-previewId",r.getAttribute("data-commentId")),d.setAttribute("data-replyTo",r.getAttribute("data-commentId")));return f},replyBtnOnClick:function(b){var c=b.target.ancestor(".reply-area-wrapper"),e=c.getAttribute("data-commentId"),d=a.one('.comment[data-commentId="'+e+'"]'),e=c.one("textArea"),f=e.get("value");""===f.trim()?this.showEmptyText():(d=this.injectReply(f,d),this.replyTo(c.getAttribute("data-commentId"),f,d,e));b.stopImmediatePropagation()},subscribe:function(b){a.Data.post({url:"/api/comment/Subscribe",
secure:!0,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=!0;this.refreshSubscribeControl();new a.Squarespace.Widgets.Information({"strings.title":"Subscribed","strings.message":"Successfully subscribed"})},failure:function(){SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.subscribe(b)},this);SQUARESPACE_LOGIN.showCommentLogin("Log In to Subscribe","Subscribe",!1)}},
this)},unsubscribe:function(b){a.Data.post({url:"/api/comment/Unsubscribe",secure:!0,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=!1;this.refreshSubscribeControl();new a.Squarespace.Widgets.Information({"strings.title":"Unsubscribed","strings.message":"Successfully unsubscribed"})},failure:function(a){a.loginRequired&&(SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unsubscribe(b)},
this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Unsubscribe","Unsubscribe",!1))}},this)},showSubscribe:function(b){(new a.Squarespace.Widgets.Confirmation({"strings.confirm":"Subscribe","strings.title":"Subscribe to Thread","strings.message":"Are you sure you wish to subscribe to this comment thread?You will receive updates via the email on file in your profile."})).on("confirm",this.subscribe,this)},togglePreview:function(a){var c=a.target.ancestor(".reply-area-wrapper"),c=c?c.one("textArea"):
a.target.ancestor(".top-level-comment-area").one("textArea");""!==c.get("value")&&("open"===a.target.getAttribute("data-state")?(a.target.setAttribute("data-state","closed"),this.hidePreview(c)):(a.target.setAttribute("data-state","open"),this.showPreview(c)))},showPreview:function(b){if(b){var c=this.generatePreview(b).one(".comment"),d=b.ancestor(".reply-area-wrapper"),k=b.ancestor(".input"),f=!d,g;c.wrap('<div class="new comment-preview-wrapper closed"></div>');g=c.ancestor(".comment-preview-wrapper");
f?(g.addClass("top-level"),a.one(".comment-list").prepend(g)):(d.insert(g,"after"),g.setAttribute("data-commentId",d.getAttribute("data-commentId")));b.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML","Edit");k.setStyle("height",k.get("offsetHeight"));b=new a.Anim({node:k,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:0}});b.on("start",function(){this._node.setStyle("overflow","hidden")});b.run();c=new a.Anim({node:g,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:c.get("offsetHeight")+
parseInt(c.getComputedStyle("paddingBottom"),10)+parseInt(c.getComputedStyle("marginBottom"),10)}});c.on("end",function(){this._node.addClass("open")});c.run()}},hideAllPreviews:function(){a.all(".comment-preview-wrapper:not(.top-level)").each(function(b){b=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:0}});b.on("end",function(){this._node.remove(!0)});b.run()},this);a.all('.preview-comment[data-state="open"]:not(.top-level-preview-btn)').each(function(a){a.setAttribute("data-state",
"closed");a.set("innerHTML","Preview")},this)},hidePreview:function(b){if(b){var c=b.ancestor(".reply-area-wrapper"),c=c?a.one('.comment-preview[data-previewId="'+c.getAttribute("data-commentId")+'"]'):a.one(".comment-preview.top-level");b.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML","Preview");b=new a.Anim({node:b.ancestor(".input"),duration:0.3,easing:a.Easing.easeOutStrong,to:{height:b.get("offsetHeight")}});b.on("end",function(){this._node.setStyle("overflow","visible")});
b.run();c&&(b=c.ancestor(".comment-preview-wrapper"),b=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:0}}),b.on("start",function(){this._node.removeClass("open");this._node.addClass("closed")}),b.on("end",function(){this._node.remove(!0)}),b.run())}},getTemplateData:function(b,c){a.Data.get({url:"/api/template/GetTemplateSchema",data:{type:a.Squarespace.BlockType.COMMENTS,componentType:"widget"},success:function(c){this._template=new a.JSONTemplate.Template(c.html);b.call(this)},
failure:c},this)},updateLikedFlaggedState:function(){(this.settings.flagsAllowed||this.settings.likesAllowed)&&this.commentData.getLikesAndFlags({success:function(b){a.one(".comment-list").all(".comment").each(function(a){var d=a.getAttribute("data-commentId");this.settings.flagsAllowed&&(b.flagMap[d]?a.addClass("flagged"):a.removeClass("flagged"));this.settings.likesAllowed&&(b.likeMap[d]?a.addClass("liked"):a.removeClass("liked"))},this)}},this)},create:function(){a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_ACTIVITY_COMMENTS)&&
(this.moderationMode=!0);this.getTemplateData(function(){var b=this.history.get("commentId");a.Lang.isUndefined(b)?(this.onLoading(),this.retrieveComments({onSuccess:function(a){this.fullDataRender(a)},page:1,order:this.sortOrder})):(this.onLoading(),this.retrieveThread({onSuccess:this.threadRender,onFailure:function(a){this.onLoading();this.retrieveComments({onSuccess:function(a){this.fullDataRender(a)},page:1,order:this.sortOrder})},order:this.sortOrder,commentId:b}))},function(){})},updateCommentCounts:function(){var b=
this.renderToFragment({visibleComments:this.commentData.visibleComments,totalComments:this.commentData.totalComments,comments:[]});0===this.commentData.visibleComments?this.containerEl.addClass("empty"):this.containerEl.removeClass("empty");a.one(".comment-count").set("innerHTML",b.one(".comment-count").get("innerHTML"))},truncateAt:function(a,c){if(!a)return"";if(void 0===c)return a;var d=a.split(" ").slice(0,c).join(" ");return d+(d.length>c?"."===d.substr(d.length-1)?"..":"...":"")},formatAccountData:function(b){return{userAvatarUrl:(b.avatarAssetUrl?
b.avatarAssetUrl:"/universal/images-v6/default-avatar.png")+"?format=50w",userHref:b.websiteUrl?"http://"+a.Squarespace.Escaping.escapeForHtml(b.websiteUrl):"",userHtml:b.websiteUrl||"",userName:b.displayName||"",userBio:this.truncateAt(a.Squarespace.Escaping.escapeForHtml(b.bio,60))||""}},buildInfoPane:function(b){var c=this.formatAccountData(b),d=a.Node.create('<div class="squarespace-user-info"></div>'),k=a.Node.create('<div class="user-info-header"></div>'),f=a.Node.create('<div class="avatar"><img src="'+
c.userAvatarUrl+'" /></div>'),g=a.Lang.sub('<div class="info"><div class="name">{userName}</div><a class="website" href="{userHref}">{userHtml}</a></div>',c),g=a.Node.create(g),c=a.Node.create('<div class="user-info-body"><p>'+c.userBio+"</p></div>"),r=a.Node.create('<div class="user-social-opts"><div class="social-leftcol"></div><div class="social-rightcol"></div><div class="clearfix"></div></div>');k.append(f).append(g);d.append(k).append(c).append(r);var h=d.one(".social-leftcol"),u=d.one(".social-rightcol"),
p=function(){var a=function(a,b){return function(b){return"http://"+a+".com/"+b}};return{facebook:a("facebook"),twitter:a("twitter"),foursquare:function(a){return null===/[a-zA-Z]/.exec(a)?"http://www.foursquare.com/user/"+a:"http://www.foursquare.com/"+a}}}();b.socialOptions&&a.Array.each(b.socialOptions,function(b,c){var d=b.type,e=p[d](b.username),d=a.Node.create('<div class="social-widget"><a href="'+e+'"><img class="social-icon" src="/universal/images-v6/'+("foursquare"===d?"member/icon-foursquare-small.png":
"social/"+d+"_16.png")+'" /></a><a href="'+e+'" class="social-name">'+d+"</a></div>");(0===c%2?h:u).append(d)});return d},showClickOverlay:function(){var b=a.one(document),c=b.get("winHeight"),b=b.get("winWidth");this.overlayEl=a.Node.create('<div class="user-profile-overlay"></div>');this.overlayEl.setStyles({position:"fixed",background:"#000",height:c+"px",width:b+"px",opacity:"0",top:"0px",left:"0px",zIndex:999});a.one(a.config.doc.body).append(this.overlayEl);a.on("click",this.hideUserProfileFlyout,
this.overlayEl,this)},showUserProfileFlyout:function(b){if(!b.target.hasClass("squarespace-comment-user-flyout")&&!b.target.ancestor(".squarespace-comment-user-flyout")&&!this.flyoutOpen){var c=b.target.ancestor(".comment").getAttribute("data-commentid"),c=this.commentData.getCommentById(c).memberAccount;if(!c)return;var d=a.Node.create('<div class="squarespace-comment-user-flyout"></div>');d.append(this.buildInfoPane(c));d.append('<div class="squarespace-user-activity"><div class="squarespace-activity-header"><div class="title">Activity"</div><div class="description">Comments and likes across the Squarespace platform</div></div><div class="feed"></div></div>');
d.append('<div class="squarespace-comment-user-clearfix"></div>');a.one(document.body).append(d);d.setStyles({position:"fixed",left:"50%",top:"50%",opacity:0,zIndex:1E3,transform:"scale(.95)"});d.setStyles({marginTop:-(parseInt(d.get("offsetHeight"),10)/2),marginLeft:-(parseInt(d.get("offsetWidth"),10)/2)});d.transition({WebkitTransform:{duration:0.3,easing:"ease-out",value:"scale(1)"},opacity:{duration:0.3,easing:"ease-out",value:1}})}this.flyoutOpen=!0;this.showClickOverlay();b.stopImmediatePropagation()},
hideUserProfileFlyout:function(b){if(this.flyoutOpen){var c=a.one(".squarespace-comment-user-flyout");c&&c.transition({WebkitTransform:{duration:0.3,easing:"ease-out",value:"scale(1.08)"},opacity:{duration:0.4,easing:"ease-out",value:0},on:{end:a.bind(function(){c.remove(!0);b.target.remove(!0);this.flyoutOpen=!1},this)}})}},getThreadNodes:function(b,c){var d=b.getAttribute("data-commentId");c.push(b);a.all('.comment[data-replyTo="'+d+'"]').each(function(a){this.getThreadNodes(a,c)},this)},actualDelete:function(b,
c,d){var k=b.target.ancestor(".comment"),f=k.getAttribute("data-commentId"),g,r,h=this.lastSortTime,u=this.lastHashChangeTime;this.commentData._delete({comments:[f],spam:c,success:function(b){h===this.lastSortTime&&u===this.lastHashChangeTime&&(g=a.Node.create('<div class="delete-anim-wrapper"></div>'),k.insert(g,"after"),d.forEach(function(b){g.append(b);(b=a.one('.reply-area-wrapper[data-commentId="'+b.getAttribute("data-commentId")+'"]'))&&b.remove(!0)}),r=new a.Anim({node:g,duration:0.5,easing:a.Easing.easeOutStrong,
to:{height:0}}),r.on("end",function(){g.remove(!0);1<d.length&&this.commentData.removeCommentsByIds(d.map(function(a){return a.getAttribute("data-commentId")}).filter(function(a){return a!==f}));this.updateCommentCounts()},this),r.run())},failure:function(f){f.loginRequired?(SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.actaulDelete(b,c,d)},this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Delete Comments",
"Delete Comments",!1)):f.authorizationFail&&new a.Squarespace.Widgets.Alert({"strings.title":"Authorization Failure","strings.message":"You are not allowed to perform that action."})}},this)},onDeleteClick:function(b){var c,d=b.target.ancestor(".comment"),k=function(){var a=[];this.getThreadNodes(d,a);return a}.call(this),f=function(){k.forEach(function(b){b.hasClass("unmoderated")?b.removeClass("pending-delete"):(b=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{opacity:1}}),b.on("end",
function(){this._node.removeClass("pending-delete")}),b.run())})};k.forEach(function(b){b.hasClass("unmoderated")?b.addClass("pending-delete"):(b=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{opacity:0.5}}),b.on("end",function(){this._node.addClass("pending-delete")}),b.run())});c=new a.Squarespace.Widgets.Confirmation({style:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,"strings.reject":"Delete","strings.confirm":"Delete & Report Spam","strings.title":1===k.length?
"Delete Comment":"Delete "+k.length+" Comments","strings.message":1<k.length?"Are you sure you wish to delete these comments?":"Are you sure you wish to delete this comment?"});c.on("cancel",function(){f()},this);c.on("reject",function(){f();this.actualDelete(b,!1,k)},this);c.on("confirm",function(){f();this.actualDelete(b,!0,k)},this)},onApproveClick:function(a){var c=a.target.ancestor(".comment");this.approve(c.getAttribute("data-commentId"),c);a.stopImmediatePropagation()},approve:function(a,c){c.removeClass("unmoderated");
this.commentData.approve({comments:[a],success:function(a){this.updateCommentCounts()},failure:function(d){d.loginRequired&&(c.addClass("unmoderated"),SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.approve(a,c)},this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Approve Comments","Approve Comments",!1))}},this)},onUnlikeClick:function(a){var c=a.target.ancestor(".comment");this.unlike(c.getAttribute("data-commentId"),
c);a.stopImmediatePropagation()},unlike:function(a,c){var d=c.one(".likes");c.removeClass("liked");this.commentData.unlike({id:a,success:function(){if(d){var c={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(a).likeCount}}]},c=this.renderToFragment(this.scatterData(c)).one(".likes");d.replace(c)}},failure:function(d){c.addClass("liked");d.loginRequired&&(SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,
function(){this.unlike(a,c)},this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Dislike Comment","Dislike Comment",!1))}},this)},onFlagClick:function(b){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Flag Comment","strings.message":"Are you sure you wish to flag this comment as inappropriate?"})).on("confirm",function(){var a=b.target.ancestor(".comment");this.flag(a.getAttribute("data-commentId"),a)},this);b.stopImmediatePropagation()},flag:function(b,c){c.addClass("flagged");this.commentData.flag({id:b,
success:function(){},failure:function(d){c.removeClass("flagged");if(d.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5});var k;this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.flag(b,c);k.detach()},this);k=SQUARESPACE_LOGIN.once("cancel",function(){c.removeClass("flagged")},this);SQUARESPACE_LOGIN.showCommentLogin("Log In to Flag Comment","Flag Comment",!1)}else d.error&&new a.Squarespace.Widgets.Alert({"strings.title":"Failed to Flag Comment",
"strings.message":d.error})}},this)},onUnflagClick:function(a){var c=a.target.ancestor(".comment");this.unflag(c.getAttribute("data-commentId"),c);a.stopImmediatePropagation()},unflag:function(a,c){c.removeClass("flagged");this.commentData.unflag({id:a,success:function(){},failure:function(d){c.addClass("flagged");d.loginRequired&&(SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,opacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unflag(a,c)},this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Unflag Comment",
"Unflag Comment",!1))}},this)},onLikeClick:function(a){var c=a.target.ancestor(".comment");this.like(c.getAttribute("data-commentId"),c);a.stopImmediatePropagation()},like:function(b,c){var d=c.one(".likes"),k=c.getAttribute("data-commentid");c.addClass("liked");this.commentData.like({id:b,success:function(){if(d&&!a.Lang.isNull(c._node)){var b={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(k).likeCount}}]},b=this.renderToFragment(this.scatterData(b)).one(".likes");d.replace(b)}},
failure:function(d){c.removeClass("liked");d.loginRequired?(SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5}),this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.like(b,c)},this),SQUARESPACE_LOGIN.showCommentLogin("Log In to Like Comment","Like Comment",!1)):d.error&&new a.Squarespace.Widgets.Alert({"strings.title":"Failed to Like Comment","strings.message":d.error})}},this)},addLoadMoreControls:function(b){(b=a.one(".load-more"))&&b.remove(!0);!this.threadState&&
this.commentData.page<this.commentData.numPages&&this.containerEl.append(this.loadMoreNode.cloneNode(!0))},addFullViewControls:function(b){(b=a.one(".full-view-btn"))&&b.remove(!0);this.threadState&&this.containerEl.one(".comment-list").insert(this.fullViewNode.cloneNode(!0),"before")},onReplyToggleClick:function(b){var c=b.target.ancestor(".comment"),d=c.getAttribute("data-commentid"),k=a.one('.reply-area-wrapper[data-commentid="'+d+'"]'),f=a.one(a.config.doc.body),g,r,h=a.bind(function(b,c){b&&
(b.setStyles({overflow:"hidden",height:b.get("offsetHeight")}),b.one(".input").setStyle("height","auto"),a.one('.comment[data-commentid="'+b.getAttribute("data-commentId")+'"]').fire("reply-close"),g=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:0}}),g.on("end",function(){},this),g.run())},this),u=a.bind(function(b){if(b){var d,e;e=b.one(".new-comment-area").cloneNode(!0);e.setStyles({visibility:"hidden",display:"block",position:"absolute"});c.append(e);d=e.get("offsetHeight");
e.remove(!0);a.one('.comment[data-commentid="'+b.getAttribute("data-commentId")+'"]').fire("reply-open");this.hideAllPreviews();r=new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:Math.max(d,190)+15}});r.on("end",function(){this._node.setStyle("height","auto");var b=this._node.getY()+this._node.get("offsetHeight")-(f.get("docScrollY")+f.get("winHeight")),c=f.get("scrollTop");0<=b&&(b=new a.Anim({node:f,duration:0.3,easing:a.Easing.easeOutStrong,to:{scrollTop:c+b}}),b.run())});
r.run()}},this);c.hasClass("reply-open")?(c.removeClass("reply-open"),this.hideAllPreviews(),h(k)):(k.one(".reply-area").setAttribute("replyid",d),a.all(".comment.reply-open").each(function(b){b.removeClass("reply-open");b=a.one('.reply-area-wrapper[data-commentid="'+b.getAttribute("data-commentid")+'"]');h(b)}),d=k.one("textArea"),this.replyCompleteEvents[c.getAttribute("data-commentId")]||(this.replyCompleteEvents[c.getAttribute("data-commentId")]=this.once("reply-complete",function(a){h(k,function(){this.one(".input").setStyle("height",
"auto")});this.replyCompleteEvents[c.getAttribute("data-commentId")]=null},this)),d.on("focus",function(){this.setAttribute("data-edited",!0)}),d.on("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",!1)}),c.addClass("reply-open"),u(k));b.stopImmediatePropagation()},escapeComment:function(b){b.authorName=a.Squarespace.Escaping.escapeForHtml(b.authorName);b.authorUrl=a.Squarespace.Escaping.escapeForHtml(b.authorUrl);b.authorEmail=a.Squarespace.Escaping.escapeForHtml(b.authorEmail);
b.memberAccount&&(b.memberAccount.displayName=a.Squarespace.Escaping.escapeForHtml(b.memberAccount.displayName),b.memberAccount.bio=a.Squarespace.Escaping.escapeForHtml(b.memberAccount.bio))},addReplyArea:function(b){var c=a.one(".reply-area-wrapper");c?(c.one(".preview-comment").setAttribute("data-state","closed").set("innerHTML","Preview"),c=c.cloneNode(!0),c.setAttribute("data-commentId",b.getAttribute("data-commentId")),c.setAttribute("data-depth",b.getAttribute("data-depth"))):(c={comments:[{id:b.getAttribute("data-commentId"),
depth:b.getAttribute("data-depth")}]},c=this.renderToFragment(c),c=c.one(".reply-area-wrapper").cloneNode(!0));c.setStyle("height",null);b.insert(c,"after")},prependComment:function(b){var c=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a.Cookie.get("displayName"))||"Not Logged In";b=a.one(".top-level-comment-area .comment-input");var d=a.one(".top-level.comment-preview"),k=!1;d?(d.one(".author").set("innerHTML",c),c=d.ancestor(".comment-preview-wrapper")):(d=this.generatePreview(b).one(".comment-preview"),
k=!0,d.wrap('<div class="comment-preview-wrapper"></div>'),c=d.ancestor(".comment-preview-wrapper"),a.one(".comment-list").prepend(c));d.removeClass("comment-preview");d.addClass("pending");a.one(".top-level-comment-area .preview-comment").setAttribute("data-state","closed");this.hidePreview(b);k?(b=new a.Anim({node:c,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:d.get("offsetHeight")+parseInt(d.getComputedStyle("marginBottom"),10)}}),b.on("end",function(){d.unwrap()}),b.run()):d.unwrap();
this.containerEl.removeClass("empty");this.makeMostRecent(d);return d},injectReply:function(b,c){var d=c.getAttribute("data-commentId"),k=a.one('.comment-preview-wrapper[data-commentId="'+d+'"]'),d=a.one('.reply-area-wrapper[data-commentId="'+d+'"]').one("textArea"),f=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a.Cookie.get("displayName"))||"Not Logged In",g=!1;k?(k=k.one(".comment-preview"),k.one(".author").set("innerHTML",f)):(k=this.generatePreview(d).one(".comment-preview"),
g=!0,k.wrap('<div class="comment-preview-wrapper"></div>'),k.ancestor(".comment-preivew-wrapper"));c.hasAttribute("data-depth")&&k.setAttribute("data-depth",parseInt(c.getAttribute("data-depth"),10)+1);k.unwrap();k.removeClass("comment-preview");k.addClass("pending");c.removeClass("reply-open");c.fire("reply-complete");g&&(d.ancestor(".reply-area-wrapper").cloneNode(!0),d.ancestor(".reply-area-wrapper").insert(k,"after"));this.makeMostRecent(k);this.fire("reply-complete",{node:k});return k},makeMostRecent:function(b){b.hasClass("comment")&&
(a.all(".comment.pending.most-recent").each(function(a){a.ancestor(".most-recent-anim-wrapper")||a.removeClass("most-recent")}),b.addClass("most-recent"))},fullDataRender:function(){this.render(this.commentData.formatted);this.commentList=a.one(".comment-list")},threadRender:function(){this.render(this.commentData.formattedThread);this.commentList=a.one(".comment-list");this.commentList.one('.comment[data-commentId="'+this.commentData.currentThreadRoot+'"]').addClass("target")},showEmptyText:function(){new a.Squarespace.Widgets.Alert({"strings.title":"Enter Comment Text",
"strings.message":"Enter text in the field above to post a comment."})},showModerationNotification:function(){new a.Squarespace.Widgets.Alert({className:"okay","strings.title":"Comment Awaiting Moderation","strings.message":"Your comment has been successfully posted and is awaiting moderation."})},showCommentSuccessNotification:function(){new a.Squarespace.Widgets.Alert({className:"okay","strings.title":"Comment Posted","strings.message":"Your comment has been successfully posted."})},showPostCommentNotification:function(b){b.status===
a.Squarespace.CommentStatuses.AWAITING_MODERATION&&this.showModerationNotification()},squarespaceAdminOnly:function(){return Static.SQUARESPACE_CONTEXT.website.cloneable&&!a.Squarespace.Utils.isSquarespaceAdmin()},commentBtnOnClick:function(b){var c=a.one(".top-level-comment-area .comment-input"),d=c.get("value");if(""===d.trim())this.showEmptyText();else{var k=this.prependComment(d);this.submitTopLevel(d,k,c)}b.stopImmediatePropagation()},updateWithMemberAccount:function(a,c){if(c&&!SQUARESPACE_LOGIN.account){var d=
a.one(".author");d&&d.setContent(c.displayName);(d=a.one(".avatar img"))&&c.avatarAssetUrl&&d.setAttribute("src",c.avatarAssetUrl)}},submitTopLevel:function(b,c,d){if(a.Squarespace.Utils.areCookiesEnabled()){this.setPosting(c,!this.approvalRequired||!this.moderationMode);var k=d.get("value");d.set("value","");console.log("submitTopLevel");this.addComment({onSuccess:function(b){this.updateCommentCounts();a.Lang.isNull(c._node)||(this.setPosted(c),c.setAttribute("data-commentId",b.comment.id),b.comment.status===
a.Squarespace.CommentStatuses.APPROVED&&c.removeClass("pending"),this.addReplyArea(c),this.updateWithMemberAccount(c,b.comment.memberAccount),this.showPostCommentNotification(b.comment))},onFailure:function(f){d.set("value",k);if(f.errors)if(f.errors.anonEmail||f.errors.authorEmail||f.errors.authorName){var g=c.one(".author");f.errors.anonEmail&&new a.Squarespace.Widgets.Alert({className:"okay","strings.title":"Comment Failed","strings.message":f.errors.anonEmail});SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,
reloadAfterLogin:!1,overlayOpacity:0.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.submitTopLevel(b,c,d);(!a.Lang.isNull(g)||a.Lang.isNull(g._node))&&g.set("innerHTML",SQUARESPACE_LOGIN.account.displayName);SQUARESPACE_LOGIN.account.avatarAssetUrl&&c.one(".avatar").one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl);r.detach()},this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,function(){this.submitTopLevel(b,c,d);var f=a.Cookie.get("displayName");!a.Lang.isNull(g)&&(!a.Lang.isNull(g._node)&&
!a.Lang.isNull(f))&&g.set("innerHTML",f);r.detach()},this);var r=SQUARESPACE_LOGIN.once("cancel",function(){this.removeMostRecentPending()},this);console.log("show login");SQUARESPACE_LOGIN.showCommentLogin("Post Comment","Post Comment",this.settings.allowAnon)}else console.log("failed to send comment",f),this.showPostCommentNotification(f.comment)},body:b},this)}else new a.Squarespace.Widgets.Alert({"strings.title":"Comments disallowed","strings.message":"This browser does not accept cookies, which is a requirement for commenting. You can allow cookies by changing your browser's settings."})},
removeMostRecentPending:function(){var b=a.one(".comment.most-recent"),c;b.ancestor(".comment-preview-wrapper")&&b.unwrap();b.wrap('<div class="most-recent-anim-wrapper"></div>');c=b.ancestor(".most-recent-anim-wrapper");c.setStyles({overflow:"hidden",height:b.get("offsetHeight")});b=new a.Anim({node:c,duration:0.3,easing:a.Easing.easeOutStrong,to:{height:0}});b.on("end",function(){this._node.remove(!0)});b.run()},onLoading:function(){var b=a.one(".comments-content"),c=a.Node.create('<div class="comment-event-capture"></div>');
c.setStyles({position:"absolute",top:b.getY(),left:b.getX(),width:b.get("offsetWidth"),height:b.get("offsetHeight"),zIndex:1E3});c.on("hover",function(a){a.stopImmediatePropagation()});c.on("click",function(a){a.stopImmediatePropagation()});a.one(a.config.doc.body).append(c);(new a.Anim({node:b,duration:0.3,easing:a.Easing.easeOutStrong,to:{opacity:0.3}})).run()},commentIdHashOnChange:function(b){!a.Lang.isNull(b.newVal)&&!a.Lang.isUndefined(b.newVal)&&(this.threadState=!0,this.lastHashChangeTime=
new Date,this.onLoading(),this.retrieveThread({commentId:b.newVal,order:this.sortOrder,onSuccess:function(){this.threadRender()}}))},commentIdHashOnRemove:function(){this.threadState=!1;this.lastHashChangeTime=new Date;this.onLoading();this.retrieveComments({onSuccess:function(a){this.fullDataRender(a)},page:1,order:this.sortOrder},this)},retrieveThread:function(a,c){this.threadState=!0;this.commentData.getThread({order:a.order,commentId:a.commentId,success:a.onSuccess,failure:function(d){this.threadState=
!1;a.onFailure.call(c||this,d)}},c||this)},retrieveComments:function(b,c){var d=a.bind(function(a){this.lastPollTime=new Date;b.onSuccess.call(c||this,a);this.updateLikedFlaggedState()},this);this.commentData.get({order:b.order,page:b.page,since:b.since||"",success:d,failure:b.onFailure},this)},addComment:function(b,c){var d=a.bind(function(d){a.Lang.isFunction(b.onSuccess)&&(b||noop).onSuccess.call(c||this,d);a.Cookie.remove("displayName",{path:"/"})},this);console.log("call commentData.post");this.commentData.post({body:b.body,
replyTo:b.replyTo,name:SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a.Cookie.get("displayName"),email:SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.email:a.Cookie.get("email"),authorUrl:SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.websiteUrl:a.Cookie.get("websiteUrl"),success:d,failure:b.onFailure},c||this)},setPosting:function(a,c){a.all(".posting-text").each(function(a){a.removeClass("visible")});var d=a.one(".posting-text"+(c?".moderated":""));d&&d.addClass("visible")},
setPosted:function(a){(a=a.all(".posting-text"))&&a.each(function(a){a.removeClass("visible")})},replyTo:function(b,c,d,k){this.setPosting(d,!this.approvalRequired||!this.moderationMode);var f=k.get("value");k.set("value","");this.addComment({body:c,replyTo:b,onSuccess:function(b){this.updateCommentCounts();a.Lang.isNull(k._node)||(this.setPosted(d),d.setAttribute("data-commentId",b.comment.id),b.comment.status===a.Squarespace.CommentStatuses.APPROVED&&d.removeClass("pending"),this.addReplyArea(d),
this.updateWithMemberAccount(d,b.comment.memberAccount),this.showPostCommentNotification(b.comment))},onFailure:function(g){k.set("value",f);if(g.errors&&(g.errors.anonEmail||g.errors.authorEmail||g.errors.authorName)){g.errors.anonEmail&&new a.Squarespace.Widgets.Alert({className:"okay","strings.title":"Comment Failed","strings.message":g.errors.anonEmail});SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:0.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.replyTo(b,
c,d,k);a.one('.comment[data-replyTo="'+b+'"] .author').set("innerHTML",SQUARESPACE_LOGIN.account.displayName);d.one(".author").set("innerHTML",SQUARESPACE_LOGIN.account.displayName);SQUARESPACE_LOGIN.account.avatarAssetUrl&&d.one(".avatar").one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl);r.detach()},this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,function(){this.replyTo(b,c,d,k);var f=a.Cookie.get("displayName");a.Lang.isNull(f)||a.one('.comment[data-replyTo="'+b+'"] .author').set("innerHTML",
f);r.detach()},this);var r=SQUARESPACE_LOGIN.once("cancel",function(){this.removeMostRecentPending()},this);SQUARESPACE_LOGIN.showCommentLogin("Log In to Post Reply","Post Reply",this.settings.allowAnon)}}},this)},extendComments:function(){this.currentPage+=1;var a=this.lastSortTime,c=this.lastHashChangeTime;this.retrieveComments({order:this.sortOrder,onSuccess:function(){a===this.lastSortTime&&c===this.lastHashChangeTime&&this.attachComments.call(this)},page:this.currentPage},this)},attachComments:function(){var b=
this.commentData.formatted;b.comments=this.commentData.getFormattedPage(this.currentPage);b=this.renderToFragment(b);this.updateCommentCounts();var c=a.one(".comment-list");b.all(".comment, .reply-area-wrapper").each(function(a){c.append(a)});this.containerEl.one(".load-more").remove(!0);this.addLoadMoreControls()},sort:function(b){var c=this.sortOrderLookup[b];a.Cookie.set("commentSortOrder",b);this.sortOrder=b;this.currentPage=1;this.onLoading();this.retrieveComments({order:this.sortOrder,onSuccess:function(b){this.lastSortTime=
new Date;this.fullDataRender(b);b=a.one(".comment-sort");b.one("span").set("innerHTML",c);b.one("select").set("value",this.sortOrder)},page:this.currentPage})},formatData:function(b,c,d){var k,f={comments:[]},g;c=c||{};d=d||{};var r=this.squarespaceAdminOnly()||this.settings.readOnly;f.noAvatars=this.settings.avatarsHidden;f.likesAllowed=this.settings.likesAllowed;f.newCommentAreaTop={authenticatedAccount:SQUARESPACE_LOGIN.account,readOnly:r};f.commentSortTitle=this.sortOrderLookup[this.sortOrder];
f.sortOldestFirst=this.sortOrder===a.Squarespace.CommentSortTypes.OLDEST_FIRST;f.sortNewestFirst=this.sortOrder===a.Squarespace.CommentSortTypes.NEWEST_FIRST;f.sortMostLiked=this.sortOrder===a.Squarespace.CommentSortTypes.MOST_LIKED;f.sortLeastLiked=this.sortOrder===a.Squarespace.CommentSortTypes.LEAST_LIKED;f.totalComments=this.commentData.totalComments;f.visibleComments=this.commentData.visibleComments;f.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;for(var h=0;h<b.length;h++)g=b[h],g.unmoderated=
g.status===a.Squarespace.CommentStatuses.AWAITING_MODERATION,g.moderationMode=this.moderationMode,g.readOnly=r,g.flagsAllowed=this.settings.flagsAllowed,g.memberAccount&&(g.authorName=g.memberAccount.displayName,g.authorUrl=g.memberAccount.websiteUrl),g.authorUrl&&(!g.authorUrl.startsWith("http://")&&!g.authorUrl.startsWith("https://"))&&(g.authorUrl="http://"+g.authorUrl),k=g.id,this.settings.likesAllowed&&(g.likesAllowed={likeCount:g.likeCount},c[k]&&(g.likesAllowed.liked=!0)),d[k]&&(g.flagged=
!0),g.threaded=this.settings.threaded,f.comments.push(g);return f},scatterData:function(a){var c=this.squarespaceAdminOnly()||this.settings.readOnly;a.noAvatars=this.settings.avatarsHidden;a.likesAllowed=this.settings.likesAllowed;a.newCommentAreaTop={};a.newCommentAreaTop.readOnly=c;a.newCommentAreaTop.authenticatedAccount=SQUARESPACE_LOGIN.account;a.commentSortTitle=this.sortOrderLookup[this.sortOrder];a.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;0===this.commentData.totalComments&&(a.noComments=
!0);for(var d={},k=0;k<a.comments.length;k++)d=a.comments[k],d.flagsAllowed=this.settings.flagsAllowed,d.moderationMode=this.moderationMode,d.memberAccount&&(d.authorName=d.memberAccount.displayName,d.authorUrl=d.memberAccount.websiteUrl),d.authorUrl&&(!d.authorUrl.startsWith("http://")&&!d.authorUrl.startsWith("https://"))&&(d.authorUrl="http://"+d.authorUrl),d.readOnly=c,this.settings.likesAllowed&&(d.likesAllowed||(d.likesAllowed={likeCount:0}),d.likesAllowed.likeCount=0===d.likesAllowed.likeCount?
void 0:d.likesAllowed.likeCount),d.threaded=this.settings.threaded,a.likeMap&&(a.likeMap[d.id]&&void 0!==d.likesAllowed)&&(d.likesAllowed.liked=!0),a.flagMap&&a.flagMap[d.id]&&(d.flagged=!0),a.comments[k]=d;return a},render:function(b){var c=this.renderToFragment(b),d=this.commentsEl,k=a.one(".comment-event-capture");b.comments.length?this.containerEl.removeClass("empty"):this.containerEl.addClass("empty");d.empty();d.append(c);b=new a.Anim({node:d,duration:0.3,easing:a.Easing.easeOutStrong,to:{opacity:1}});
b.on("end",function(){k.remove(!0)});b.run();this.addFullViewControls();switch(this.params.paginationMode){case this.PaginationModes.EXTEND:this.addLoadMoreControls()}this.fire("render")},renderToFragment:function(b){for(var c=0;c<b.comments.length;c++){this.escapeComment(b.comments[c]);var d=b.comments[c].body,d=a.Squarespace.Utils.preFormatMarkdown(d);b.comments[c].body=d}c=a.Node.create(this._template.expand(b));c.all(".comment").each(function(a,c){a.setAttribute("data-commentId",b.comments[c].id)});
return c}});a.augment(a.Squarespace.Comments,a.EventTarget);var d=null;a.config.win.Squarespace.onInitialize(a,function(){var b=a.config.win.Static,c=b.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;if(c){var e=a.one(".squarespace-comments");e&&(c&&""!==c)&&(window.disqus_shortname=c,"disqus_thread"!==e.getAttribute("id")&&e.setAttribute("id","disqus_thread"),a.Get.script("//"+c+".disqus.com/embed.js",{win:a.config.win}))}else{var e=a.one(".squarespace-comments"),k,f,g=b.SQUARESPACE_CONTEXT.websiteSettings;
if(e&&!g.disqusShortname&&(k=b.SQUARESPACE_CONTEXT.itemId||b.SQUARESPACE_CONTEXT.collectionId)){f=b.SQUARESPACE_CONTEXT.itemId?a.Squarespace.CommentTargetTypes.ITEM:a.Squarespace.CommentTargetTypes.COLLECTION;var r=c=!1;if(f===a.Squarespace.CommentTargetTypes.ITEM){var h=b.SQUARESPACE_CONTEXT.item;h&&h.commentState===a.Squarespace.CommentStates.DISABLED&&(0===h.publicCommentCount?c=!0:r=!0)}if(!c){var u=function(){a.use("squarespace-comments","cookie",function(a){d=(new a.Squarespace.Comments({containerEl:e,
identifier:k,type:f,likesAllowed:g.commentLikesAllowed,flagsAllowed:g.commentFlagsAllowed,threaded:g.commentThreaded,approvalRequired:g.commentApprovalRequired,allowAnon:g.commentAnonAllowed,avatarsOn:g.commentAvatarsOn,readOnly:r,sortType:a.Cookie.get("commentSortOrder")||g.commentSortType})).create()})},c=function(){a.use("squarespace-comments","cookie",function(a){var c=function(){a.Data.get({url:"/api/auth/CheckAuthentication",secure:!0,success:function(c){null!==c.member&&a.use("squarespace-management",
function(a){b.SQUARESPACE_CONTEXT.authenticatedAccount=c.member;SQUARESPACE_LOGIN.params=a.merge(SQUARESPACE_LOGIN.params,{redirectAfterCancel:!1,redirectAfterLogin:!1});SQUARESPACE_LOGIN.onLoginComplete(c.member)});u()},failure:u})};a.Data.TRANSPORT_READY?c():(console.warn("Flash cross-domain transport not initialized yet. Delaying comment initialization until flash is ready."),a.once("io:xdrReady",c))})};b.SQUARESPACE_CONTEXT.authenticatedAccount||b.SQUARESPACE_CONTEXT.website.cloneable?u():c()}}}});
a.config.win.Squarespace.onDestroy(a,function(){d&&d.destroy()})},"1.0",{requires:"anim event history node selector-css3 squarespace-comment-data squarespace-dialog squarespace-escaping-utils squarespace-json-template squarespace-login squarespace-markdown squarespace-ui-base squarespace-util squarespace-widgets-alert squarespace-widgets-confirmation squarespace-widgets-information transition".split(" ")})},352:function(m,n,h){YUI.add("squarespace-comment-data",function(a){a.namespace("Squarespace");
a.Squarespace.CommentData=Class.create({initialize:function(a){if(void 0===a)throw Error("You must provide a configuration object.");if(void 0===a.target)throw Error("You must provide a target id.");if(void 0===a.targetType)throw Error("You must provide a target type.");this.settings=a.settings||{approvalRequired:!1,allowAnon:!0,threaded:!0};this.formatter=a.formatter||function(a){return a};this.page=1;this.data={comments:[]};this.visibleComments=this.topLevelComments=0;this.totalComments=Static.SQUARESPACE_CONTEXT.item?
Static.SQUARESPACE_CONTEXT.item.publicCommentCount:Static.SQUARESPACE_CONTEXT.collection?Static.SQUARESPACE_CONTEXT.collection.publicCommentCount:0;this.commentsPerPage=50;this.target=a.target;this.targetType=a.targetType;this.idToIndex={};this.comments=[];this.likeMap={};this.flagMap={};this.formatted={};this.currentThreadRoot="";this.formattedThread={};this.pageIntervals=[]},useSecure:function(){return window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()},getCommentById:function(a){return this.comments[this.idToIndex[a]]},
removeCommentById:function(d){d=this.idToIndex[d];a.Lang.isUndefined(d)||(this.comments.splice(d,1),this.calculatePagination())},removeCommentsByIds:function(d){d.forEach(function(b){b=this.idToIndex[b];a.Lang.isUndefined(b)||(this.comments.splice(b,1),this.visibleComments-=1,this.totalComments-=1)},this);this.calculatePagination()},getFormattedPage:function(a){return(a=this.pageIntervals[a-1])?Array.prototype.slice.apply(this.comments,a):null},fullBookkeeping:function(a){var b=0,c={};this.comments=
[];this.pageIntervals=[];this.idToIndex={};for(b=0;b<a.comments.length;b++)c=a.comments[b],this.idToIndex[c.id]=b,this.comments[b]=c;this.pageIntervals.push([0,void 0]);this.flagMap=a.flagMap;this.likeMap=a.likeMap;this.commentSettings=a.commentSettings;this.visibleComments=a.visibleComments;this.topLevelComments=this.formatted.topLevelComments||this.topLevelComments;this.totalComments=a.totalComments?a.totalComments:this.totalComments;this.reformat();this.topLevelComments=a.topLevelComments;this.numLikes=
a.numLikes;this.numPages=Math.ceil(this.topLevelComments/this.commentsPerPage)},addCommentData:function(a){this.comments.splice((this.idToIndex[a.parentId]||-1)+1,0,a);this.calculatePagination()},calculatePagination:function(){var a=0,b,c;this.idToIndex={};this.pageIntervals=[[0,void 0]];for(c=0;c<this.comments.length;c++)b=this.comments[c],this.idToIndex[b.id]=c,b.parentId||(a+=1,50<a&&(b=this.pageIntervals[this.pageIntervals.length-1],b[1]=a-1,this.pageIntervals.push([b[1],void 0]),a=0))},appendBookkeeping:function(d){var b=
0,c={};this.pageIntervals[this.pageIntervals.length-1][1]=this.comments.length;for(b=0;b<d.comments.length;b++)c=d.comments[b],this.idToIndex[c.id]=this.comments.length+1,this.comments.push(c);this.pageIntervals.push([this.pageIntervals[this.pageIntervals.length-1][1],void 0]);this.likeMap=a.merge(this.likeMap,d.likeMap);this.flagMap=a.merge(this.flagMap,d.flagMap);this.visibleComments+=d.visibleComments;this.reformat()},reformat:function(){this.formatted=this.formatter(this.comments,this.likeMap,
this.flagMap)},like:function(d,b){a.Data.post({url:"/api/comment/LikeComment",secure:!0,data:{commentId:d.id},success:function(a){var e=this.getCommentById(d.id);e&&(e.likeCount+=1,this.reformat());(d.success||noop).call(b||this,a)},failure:function(a){(d.failure||noop).call(b||this,a)}},this)},unlike:function(d,b){a.Data.post({url:"/api/comment/UnlikeComment",secure:!0,data:{commentId:d.id},success:function(a){var e=this.getCommentById(d.id);e&&(e.likeCount=Math.max(e.likeCount-1,0),this.reformat());
(d.success||noop).call(b||this,a)},failure:d.failure},this)},flag:function(d,b){a.Data.post({url:"/api/comment/FlagComment",secure:!0,data:{commentId:d.id},success:function(a){var e=this.getCommentById(d.id);e&&(e.flagCount+=1,this.reformat());(d.success||noop).call(b||this,a)},failure:function(a){(d.failure||noop).call(b||this,a)}},this)},_delete:function(d,b){a.Data.post({url:"/api/comment/admin/DeleteComments",secure:!0,data:{markAsSpam:d.spam,comments:a.Lang.isArray(d.comments)?d.comments:[d.comments]},
success:function(a){d.comments.forEach(function(a){this.removeCommentById(a.id)},this);this.visibleComments-=d.comments.length;this.totalComments-=d.comments.length;(d.success||noop).call(b||this,a)},failure:d.failure?a.bind(d.failure,b||this):void 0},this)},approve:function(d,b){a.Data.post({url:"/api/comment/admin/ApproveComments",secure:!0,data:{comments:a.Lang.isArray(d.comments)?d.comments:[d.comments]},success:function(c){d.comments.forEach(function(b){if(b=this.getCommentById(b.id))b.status=
a.Squarespace.CommentStatuses.APPROVED},this);this.totalComments+=1;(d.success||noop).call(b||this,c)},failure:d.failure?a.bind(d.failure,b||this):void 0},this)},unflag:function(d,b){a.Data.post({url:"/api/comment/UnflagComment",secure:!0,data:{commentId:d.id},success:function(a){var e=this.getCommentById(d.id);e&&(e.flagCount=Math.max(e.flagCount-1,0),this.reformat());(d.success||noop).call(b||this,a)},failure:function(a){(d.failure||noop).call(b||this,a)}},this)},post:function(d,b){var c={targetId:this.target,
targetType:this.targetType,body:d.body,replyToId:d.replyTo,authorName:d.name||"",authorEmail:d.email||"",authorUrl:d.authorUrl||""};console.log("post comment to API");a.Data.post({url:"/api/comment/CreateComment",secure:!!Static.SQUARESPACE_CONTEXT.authenticatedAccount,data:c,success:function(c){c.comment.status===a.Squarespace.CommentStatuses.APPROVED&&(this.addCommentData(c.comment),this.visibleComments+=1,this.totalComments+=1,d.replyTo||(this.topLevelComments+=1),this.reformat());(d.success||
noop).call(b||this,c)},failure:d.failure?a.bind(d.failure,b||this):void 0},this)},getPage:function(a,b,c){b<=this.numPages&&this.get({sortBy:a.order,page:b,success:a.success,failure:a.failure},c)},getSince:function(a,b,c){this.get({since:b,success:a.success,failure:a.failure},c)},getThread:function(d,b){a.Data.get({url:"/api/comment/GetThread",secure:this.useSecure(),data:{sortBy:d.order,commentId:d.commentId},success:function(c){this.currentThreadRoot=d.commentId;var e=c.comments[0].comment.depth;
c.comments=a.Array.map(c.comments,function(a){return a.comment});c.comments.forEach(function(a){a.depth-=e});this.formattedThread=this.formatter(c.comments,{},{});a.Lang.isFunction(d.success)&&d.success.call(b||this,c)},failure:function(c){a.Lang.isFunction(d.failure)&&d.failure.call(b||this,c)}},this)},get:function(d,b){a.Data.get({url:"/api/comment/GetComments",secure:this.useSecure(),data:{targetId:this.target,targetType:this.targetType,since:d.since||"",page:d.page,sortBy:d.order},success:function(a){this.page=
d.page;1>=d.page?this.fullBookkeeping(a):1<d.page&&this.appendBookkeeping(a);d.success&&d.success.call(b||this,a)},failure:d.failure},this)},getLikesAndFlags:function(d,b){var c=a.Array.map(this.comments,function(a){return a.id});a.Data.get({url:"/api/comment/GetLikesFlags",secure:this.useSecure(),data:{ids:c},success:function(c){d.success&&a.Lang.isFunction(d.success)&&d.success.call(b||this,c)},failure:function(c){d.failure&&a.Lang.isFunction(d.failure)&&d.failure.call(b||this,c)}})}})},"1.0",{requires:["squarespace-util"]})},
353:function(m,n,h){YUI.add("squarespace-login",function(a){var d=h(1995),b,c,e,k;switch(!1){case "loginWithSocialAccounts":b=!0;k=e=c=void 0;break;case "commentsLogin":k=e=c=b=!0;break;case "acceptInvitation":e=!0,k=c=b=void 0}a.config.win.SQUARESPACE_LOGIN||(a.config.win.SQUARESPACE_LOGIN=Singleton.create({ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount);this.params=this.defaultParams={redirectAfterCancel:!0,redirectAfterLogin:!0,minimal:!1,
cancelable:!0,overlayOpacity:0.8,disableOverlayCancel:!1,forgotPassword:!0,disableCreateAccount:!0,globalLogin:!0,allowSocialLogins:!0};this.dialogParameters=null},configure:function(b){this.params=this.defaultParams;this.params=a.merge(this.params,b)},reset:function(){this.params=this.defaultParams},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},_getNoLoginDialogParmas:function(){return{style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,
width:400,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:"Squarespace Login",icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This browser does not accept cookies, which is a requirement for login. You can allow cookies by changing your browser's settings."}}]}]}},showCommentLogin:function(a,b,c){this.iFrameCommentLoginShow(a,b,c)},_showCommentLoginIniFrame:function(b,
c,d,e){console.log("show login in frame");try{var k=["squarespace","google","twitter","facebook"],h="squarespace";d&&(k.splice(0,0,"guest"),h="guest");var w=a.Node.create('<div class="login-wrapper-node"></div>'),l=a.one("body");if(l){l.append(w);console.log("srcNode added to body element");var m=new a.Squarespace.Widgets.Login({srcNode:w,render:!0,tabsEnabled:k,activeLoginMethod:h,returnWebsiteList:!1,canCreateAccount:!0,canCancel:!0,title:b,targetIdentifier:e,className:"comments","strings.loginButonTitle":c});
console.log("Login widget created");m.on("loginSuccess",function(a){SQUARESPACE_LOGIN.loginRPCProvider.commentLoginSuccess({type:a.type,displayName:a.displayName,email:a.email,authorUrl:a.authorUrl,account:a.account,website:a.website});SQUARESPACE_LOGIN.loginRPCProvider.remove(!1);m.destroy()},this);m.on("destroy",function(){SQUARESPACE_LOGIN.loginRPCProvider.remove(!1)},this);m.on("cancel",function(){SQUARESPACE_LOGIN.loginRPCProvider.remove(!0)},this);a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")});
a.later(1E3,{},function(){a.one("body .sqs-widgets-login")?console.log("widget in DOM"):console.log("widget not in DOM")})}else console.log("no body element")}catch(v){console.log("ERROR: found error: "+v,v)}},showGoogleWebhostingLogin:function(){var b=a.bind(function(a){this._redirectToWebsite(a,this._getGoogleWebhostingConfirmUrl())},this);this._showSimpleLogin({enableGoogleLoginLink:!0,returnWebsiteList:!0}).then(a.bind(function(c){this._websiteDisambiguation(c.websites,c.account,"Select the website you would like to add the domain to").then(b,
function(a){console.log("Failed to Disambiguate",a)});a.Squarespace.Analytics.trackInternal("engagement_site_disambiguation",{disambiguationType:"domain_linkage"})},this))},_getGoogleWebhostingConfirmUrl:function(){var b=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();return"/auth/google-web-hosting/add-domain-confirmation?domainName="+b.domainName+"&userId="+b.userId},showReferralDisambigLogin:function(b){var c={returnWebsiteList:!0};a.Lang.isString(b)&&(c.email=b,c.disableEmailChange=!0);
this._showSimpleLogin(c).then(a.bind(function(b){var c=b.websites;b=b.account;var d="/auth/referral/"+Static.SQUARESPACE_CONTEXT.referralSecretToken+"/disambiguate",e=a.bind(function(a){this._redirectToWebsite(a,d)},this);this._websiteDisambiguation(c,b,"Select a website to credit with a free month of Squarespace",!1,function(){var b=new a.Squarespace.Widgets.Button({"strings.text":"+&nbsp;&nbsp;Start New Site"});b.on("click",function(){a.Squarespace.Analytics.trackInternal("referral_newsite_selected",
{source:"login"},function(){window.location="http://www.squarespace.com/templates/?sourceIdentifier="+c[0].identifier})});var d=a.Node.create('<div class="create-new-site-btn-wrapper"></div>');a.one(".sqs-website-selector .websites-wrapper").insert(d,"after");b.render(d)}).then(e,function(){console.log("Failed to Disambiguate",error)})},this))},_redirectToWebsite:function(b,c){var d=b.get("loginUrl");a.Lang.isString(c)&&(d+="&redirectUrl="+encodeURIComponent(c));a.config.win.location=d},_showSimpleLogin:function(b){return new a.Promise(function(c,
d){if(a.Squarespace.Utils.areCookiesEnabled()){b=a.merge({render:!0},b);var e=new a.Squarespace.Widgets.Login(b);e.on("loginSuccess",function(a){e.destroy({remove:!0});c(a)},this);a.Squarespace.Analytics.trackInternal("engagement_login_overview_view");a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else{var k=this._getNoLoginDialogParmas();(new a.Squarespace.EditingDialog(k)).show();d()}})},_websiteDisambiguation:function(b,c,d,e,k){a.Lang.isBoolean(e)||(e=!0);return new a.Promise(function(h,
w){var l=new a.Squarespace.Models.ModelList;a.Array.each(b,function(b){l.add(new a.Model(b))});e&&1===l.size()&&h(l.item(0));var m=new a.Squarespace.Widgets.WebsiteSelector({memberAccount:new a.Squarespace.Models.MemberAccount(c),websites:l,title:d});a.Lang.isFunction(k)&&m.after("render",k,this);m.render();m.on("selectedWebsiteChange",function(b){a.Lang.isValue(b.newVal)&&(m.destroy({remove:!0}),h(b.newVal))},this)})},acceptInvitationSignin:function(b){if(a.Squarespace.Utils.areCookiesEnabled()){var c=
Static.SQUARESPACE_CONTEXT.website.identifier;b="<p>You have been invited to manage "+a.Escape.html(Static.SQUARESPACE_CONTEXT.website.authenticUrl)+" by <strong>"+a.Escape.html(b.displayName)+"</strong>. Sign in or create an account below to get started.</p>";var d=new a.Squarespace.Widgets.Login({render:!0,tabsEnabled:[],canCreateAccount:!0,targetIdentifier:c,title:"<h1>Accept Invitation</h1>"+b});d.on("loginSuccess",function(a){d.destroy();a=a.website.loginUrl+"&redirectUrl="+encodeURIComponent(window.location.pathname+
window.location.search);window.location.replace(a)});a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else c=this._getNoLoginDialogParmas(),(new a.Squarespace.EditingDialog(c)).show()},show:function(){if(a.Squarespace.Utils.areCookiesEnabled()){var d=a.Cookie.get("email"),g=!1,h=["squarespace"],m=!0;if(Static.SQUARESPACE_CONTEXT.hasSocialAccounts||b)h=["squarespace","google","twitter","facebook"],m=!1;c&&h.push("guest");var u={};e&&(u.canCreateAccount=!0);k&&(u.canCancel=!0);
var p=new a.Squarespace.Widgets.Login(a.merge({render:!0,enableGoogleLoginLink:m,tabsEnabled:h,returnWebsiteList:!0,email:d},u));p.plug(a.Squarespace.Plugin.V5Login);if(this.loginRPCProvider)p.on("destroy",function(a){this.loginRPCProvider.remove()},this);p.on("loginSuccess",function(b){p.hide();a.one(a.config.doc.body).removeClass("login-visible");a.Lang.isObject(b.account)&&a.Lang.isString(b.account.email)&&(("v6"===b.type||"v5"===b.type)&&a.Cookie.set("email",b.account.email),0<b.account.email.indexOf("@squarespace.com")&&
0>location.pathname.indexOf("squarespace-admin")&&(g=!0));if("v5"===b.type)top.window.location.replace(b.url);else if(a.Lang.isString(b.redirectUrl))top.window.location.replace(b.redirectUrl);else if(g){var c=Static.SQUARESPACE_CONTEXT.website.identifier,d=b.websites.filter(function(a){return c===a.identifier});1===d.length&&(b.websites=d);a.Lang.isArray(b.websites)&&1==b.websites.length?(d=b.websites[0].loginUrl,b="/config",b=location.pathname+location.search+location.hash,b=d+"&redirectUrl="+encodeURIComponent(b),
top.window.location.replace(b)):this._websiteDisambiguation(b.websites,b.account,"Pick one of your websites that you would like to go to").then(function(a){a=a.get("loginUrl")+"&redirectUrl="+encodeURIComponent("/config");top.window.location.replace(a)},function(a){console.error(a)})}else if(a.Lang.isObject(b.website)){d=b.website;b="/config";var e=location.host,e=e.substr(0,e.indexOf("."));d.identifier===e&&(b=location.pathname+location.search+location.hash);b=d.loginUrl+"&redirectUrl="+encodeURIComponent(b);
top.window.location.replace(b)}else new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":"Login Failed","strings.message":"We could not find a website you have access to for the account you signed in with."}),a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})},this);a.soon(function(){a.one(a.config.doc.body).addClass("login-visible");var b=p.get("boundingBox").one(".body.squarespace .mode.squarespace input[name=email]");if(b)a.one(a.config.win).on("click",
function(a){a.target.ancestor(".sqs-widgets-login")||b.focus()})})}else d=this._getNoLoginDialogParmas(),(new a.Squarespace.EditingDialog(d)).show()},onEscape:function(){a.one("body").removeClass("login-visible");a.later(300,this,function(){a.config.win.location.href="http://"+a.config.win.location.host+"/"})},passwordResetConfirmation:function(b){b.invalidRecoveryId?this._showInvalidURLDialog("Reset Password"):(b=new a.Squarespace.Widgets.PasswordReset({title:"Reset Password",message:"Please enter a new password for the account with email: <strong>"+
a.Escape.html(b.email)+"</strong>.",email:b.email,recoveryId:b.recoveryId}),b.on("success",function(){new a.Squarespace.Widgets.Information({"strings.title":"Password set"});a.later(500,document.location,document.location.replace,document.location.pathname)}),b.show())},accountActivationConfirmation:function(b){b.invalidRecoveryId?this._showInvalidURLDialog("Activate Account"):(b=new a.Squarespace.Widgets.PasswordReset({title:"Activate Account",message:"To activate your account, first set your password for the account with email: <strong>"+
a.Escape.html(b.email)+"</strong>.",email:b.email,recoveryId:b.activationId}),b.on("success",function(){new a.Squarespace.Widgets.Information({"strings.title":"Password set"});a.later(500,document.location,document.location.replace,document.location.pathname)}),b.show())},_showInvalidURLDialog:function(b){(new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":b,"strings.message":"This URL is no longer valid, please go back to the login screen and start over.",
"strings.confirm":"Back To Login",escToCancel:!0})).on(["confirm","cancel","hide"],function(){document.location.replace(document.location.pathname)})},onLoginComplete:function(b,c){a.config.win.SQUARESPACE_LOGIN.account=b;a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG);SQUARESPACE_LOGIN.loginRPCProvider&&c?a.config.win.SQUARESPACE_LOGIN.fire("iframeLogin",c):this.params.redirectAfterLogin||this.params.reloadAfterLogin?c?c===a.config.win.location.href?a.config.win.location.reload():
a.config.win.location.replace(c):new a.Squarespace.Widgets.Alert({"strings.title":"No Administrative Privileges","strings.message":"Your Squarespace account is not listed as an administrator on any sites."}):(a.config.win.SQUARESPACE_LOGIN.fire("login"),this.params.globalLogin&&a.Global.fire("squarespace:login"),this.reset())},onCommentLoginSuccess:function(b){if("guest"===b.type){var c=new Date;c.setSeconds(c.getSeconds()+30);a.Cookie.set("email",b.email,{path:"/",expires:c});a.Cookie.set("displayName",
b.displayName,{path:"/",expires:c});a.Cookie.set("websiteUrl",b.authorUrl,{path:"/",expires:c});a.config.win.SQUARESPACE_LOGIN.fire("guestLogin");this.params.globalLogin&&a.Global.fire("squarespace:login")}else{var d=b.account;a.Data.get({url:b.website.loginUrl,secure:!0,success:function(){Static.SQUARESPACE_CONTEXT.authenticatedAccount=d;a.config.win.SQUARESPACE_LOGIN.account=d;a.config.win.SQUARESPACE_LOGIN.fire("login");this.params.globalLogin&&a.Global.fire("squarespace:login")},failure:function(b){new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,
"strings.title":"Login Failed","strings.message":"An unexpected error happened, please try again."});console.error("failed to sign in with token",b)}},this)}},_buildIFrameLoginDialog:function(){this.buildDialog()},_showLoginInIframe:function(b,c,d){this.show();a.Lang.isValue(this.loginRPCProvider)?(b=a.Node.create('<div class="login-overlay"><div class="close-x"></div></div>'),a.one("body").append(b),b.on("click",function(a){SQUARESPACE_LOGIN.loginRPCProvider.remove()},this)):(a.one("html").addClass("squarespace-damask"),
a.one("html").removeClass("squarespace-cameron"),a.one("body").addClass("squarespace-login"))},loadRPCProvider:function(){try{this.loginRPCProvider=new d.Rpc({},{local:{show:function(){SQUARESPACE_LOGIN._showLoginInIframe()},showCommentLogin:SQUARESPACE_LOGIN._showCommentLoginIniFrame},remote:{remove:{},v5LoginRequest:{},commentLoginSuccess:{}}})}catch(a){console.log("failed to load RPC",a)}},_loadRPCConsumer:function(b,c){this.loginRPCConsumer=new d.Rpc({remote:"https://oauth."+Static.SQUARESPACE_CONTEXT.appDomain+
"/config/iframeLogin",container:b,onReady:c,props:{style:{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:30040}}},{local:{remove:function(a){SQUARESPACE_LOGIN.iFrameLoginRemove(a)},v5LoginRequest:function(b,c,d,e){a.Squarespace.Auth.loginV5(b,c).then(d,e)},commentLoginSuccess:a.bind(this.onCommentLoginSuccess,this)},remote:{show:{},showCommentLogin:{}}})},iFrameLoginLoad:function(b){var c=a.Node.create('<div class="login-wrapper hidden" ></div>');a.one("body").append(c);this._loadRPCConsumer(c.getDOMNode(),
b)},_getLoginOverlayNode:function(){var b=a.Node.create('<div class="login-overlay" style="position: fixed; top: 0; right:0; height: 100%; width: 100%; z-index: 30000; background: rgba(204, 204, 204, 0.65);"></div>');this._loginOverlaySpinner=new a.Squarespace.Spinner({render:b,size:"large",color:"dark"});this._loginOverlaySpinner.get("boundingBox").setStyles({position:"fixed",top:"50%",left:"50%",marginLeft:"-11px",marginTop:"-11px"});return b},iFrameLoginShow:function(b){b&&b.preventDefault();b=
this._getLoginOverlayNode();a.one("body").append(b);this.loginRPCConsumer?this._iFrameLoginShow():SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameLoginShow,this))},_iFrameLoginShow:function(){this.loginRPCConsumer.show();a.one(".login-wrapper").removeClass("hidden");this._loginOverlaySpinner&&this._loginOverlaySpinner.destroy();a.one("body").addClass("no-scroll")},iFrameCommentLoginShow:function(b,c,d){var e=this._getLoginOverlayNode();a.one("body").append(e);this.loginRPCConsumer?this._iFrameCommentLoginShow(b,
c,d):SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameCommentLoginShow,this,b,c,d))},_iFrameCommentLoginShow:function(b,c,d){var e=Static.SQUARESPACE_CONTEXT.website.identifier,k=this.loginRPCConsumer.showCommentLogin;a.soon(function(){k(b,c,d,e)});a.one(".login-wrapper").removeClass("hidden");this._loginOverlaySpinner&&this._loginOverlaySpinner.destroy()},iFrameLoginHide:function(){this.overlay.hideScreenOverlay();a.one(".login-wrapper").addClass("hidden")},iFrameLoginRemove:function(b){this.loginRPCConsumer.destroy();
delete this.loginRPCConsumer;a.one(".login-overlay").remove();a.one("body").removeClass("no-scroll");a.one(".login-wrapper").remove();b&&this.fire("cancel")}}),a.augment(a.config.win.SQUARESPACE_LOGIN,a.EventTarget))},"1.0",{requires:"squarespace-dialog squarespace-dialog-check squarespace-dialog-description squarespace-dialog-hidden squarespace-dialog-multi-option squarespace-enum squarespace-external-authentication squarespace-external-authentication squarespace-google-domains-utils squarespace-models-member-account squarespace-plugin-v5login squarespace-spinner squarespace-util squarespace-widgets-alert squarespace-widgets-information squarespace-widgets-login squarespace-widgets-password-reset squarespace-widgets-website-selector squarespace-widgets-website-selector".split(" ")})},
354:function(m,n,h){YUI.add("squarespace-external-authentication",function(a){a.namespace("Squarespace");a.Squarespace.ExternalAuthentication=a.Base.create("externalAuthentication",a.Base,[],{initializer:function(){this.publish("completed")},openPopupWindow:function(d,b,c){d="/auth/ExternalAuthenticationInitiate?"+this._buildQueryParams(d,b,c);this._oauthWindow=window.open(d,"ConnectWithOAuth","location=0,status=0,scrollbars=1,width=1020,height=520");this._checkClosedOnInterval();d=window.addEventListener?
"addEventListener":"attachEvent";(0,window[d])("attachEvent"==d?"onmessage":"message",a.bind(this._receiveMessage,this),!1)},_buildQueryParams:function(d,b,c){var e="serviceProvider="+d;a.Lang.isValue(b)&&a.Lang.isValue(c)&&(e+="&"+b+"="+c);this.get("useLoginFlag")&&(e+="&loginFlag=true");this.get("includeWebsiteList")&&(e+="&includeWebsiteList=true");b=this.get("targetIdentifier");a.Lang.isString(b)&&(e+="&targetIdentifier="+b);b=this.get("authenticationType");a.Lang.isValue(b)&&(e+="&type="+b);
(b=this._getInviteCode())&&(e+="&"+b);this.get("startSubscription")&&(e+="&startSubscription=true");d===a.Squarespace.ExternalServiceProviders.FACEBOOK&&(e+="&redirArgs="+encodeURIComponent("scope"+a.Squarespace.FacebookExtendedPermissions));return e+="&uuid="+this.get("uuid")},_getInviteCode:function(){var d=document.location.search;"?"===d[0]&&(d=d.slice(1));return a.Array.find(d.split("&"),function(a){return 0===a.indexOf("invitation=")},this)},_receiveMessage:function(d){d=JSON.parse(d.data);
a.Lang.isObject(d)&&this.setAttrs({websites:d.websites,website:d.website,memberAccount:d.memberAccount,socialConfig:d.socialConfig,messageReceived:!0})},_checkClosedOnInterval:function(){this._oauthWindow.closed||window.callbackFinished?(window.callbackFinished=!1,this.get("messageReceived")?this.fire("completed"):a.Data.get({url:"/auth/ExternalAuthenticationGetResult?uuid="+this.get("uuid"),success:function(a){this.setAttrs({websites:a.websites,account:a.memberAccount,website:a.website,socialConfig:a.socialConfig});
this.fire("completed")},failure:function(a){this.fire("completed")}},this)):a.later(200,this,this._checkClosedOnInterval)}},{ATTRS:{useLoginFlag:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},includeWebsiteList:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},targetIdentifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},uuid:{value:null,valueFn:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=
(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&7|8).toString(16)})},validator:a.Squarespace.AttrValidators.isNullOrString},authenticationType:{value:null},websites:{value:null},website:{value:null},memberAccount:{value:null},socialConfig:{value:null},messageReceived:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},startSubscription:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-util"]})},
355:function(m,n,h){YUI.add("squarespace-plugin-v5login",function(a){var d=h(1883);a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.V5Login=a.Base.create("V5Login",a.Plugin.Base,[],{initializer:function(b){this._eventHandler=a.Do.before(this._proxyLogin,this.get("host"),"_loginSquarespace",this)},destroy:function(){this._eventHandler.detach();this._eventHandler=null},_proxyLogin:function(){var b=this.get("host"),c=a.Squarespace.FormUtils.getData(b._fields),b=c.email,c=c.password;if(-1===b.indexOf("@"))return new a.Do.Halt("V5 account",
this._v5Login(b,c))},_v5Login:function(b,c){var e=d(c);return SQUARESPACE_LOGIN.loginRPCProvider?new a.Promise(function(a,c){SQUARESPACE_LOGIN.loginRPCProvider.v5LoginRequest(b,e,a,function(a){c(a.message)})}):a.Squarespace.Auth.loginV5(b,e)}},{NS:"v5login"})},"1.0",{requires:["base","squarespace-v5login-utils"]})},356:function(m,n,h){YUI.add("squarespace-v5login-utils",function(a){a.namespace("Squarespace.Auth");a.Squarespace.Auth.loginV5=function(d,b){return new a.Promise(function(c,e){a.Data.post({xdr:{credentials:!0},
url:"http://squarespace5.squarespace.com/process/service/CredentialCheck",data:{A:d,B:b,from6:!0},success:function(k){a.Data.post({xdr:{credentials:!0},url:"http://"+d+".squarespace.com/process/Login",data:{username:d,encryptedPassword:b,from6:!0},success:function(a){"success"===a.result?c({type:"v5",url:"http://"+d+".squarespace.com"}):e({type:"v5",error:"unkown error"})},failure:function(a){a.type="v5";e(a)}},this)},failure:function(b){b.type="v5";b.errors?(a.Object.each(b.errors,function(a,c){b.errors[c]=
a.replace(/support@squarespace.com/g,"customercare@squarespace.com")}),e(b)):e({error:"There was an unexpected error. Please try again later."})}},this)})}},"1.0",{requires:["promise","squarespace-util"]})},357:function(m,n,h){YUI.add("squarespace-widgets-login",function(a){var d=a.Squarespace.ExternalServiceProviders,b={};b[d.FACEBOOK]="Facebook";b[d.TWITTER]="Twitter";b[d.GOOGLEAUTH2]="Google";var c={email:{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",submitOnEnter:!0,className:"large",
strings:{placeholder:"Email Address"}}},password:{ctor:a.Squarespace.DialogFields.Text,config:{name:"password",submitOnEnter:!0,className:"large",strings:{placeholder:"Password"},password:!0}},"stay-logged-in":{ctor:a.Squarespace.DialogFields.Check,config:{name:"stay-logged-in","strings.title":"Stay Logged In",data:!0}},displayName:{ctor:a.Squarespace.DialogFields.Text,config:{name:"displayName",required:!0,submitOnEnter:!0,className:"large",strings:{placeholder:"Your Name"}}},anonEmail:{ctor:a.Squarespace.DialogFields.Email,
config:{name:"anonEmail",required:!1,submitOnEnter:!0,mailcheck:!0,className:"large",strings:{placeholder:"Email (Optional)"}}},authorUrl:{ctor:a.Squarespace.DialogFields.Text,config:{name:"authorUrl",required:!1,submitOnEnter:!0,className:"large",strings:{placeholder:"Website URL (Optional)"}}}};a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.Login=a.Base.create("login",a.Squarespace.SSWidget,[],{delegatedEvents:{'[data-action="submit"]':{click:"_onSubmit"},'[data-action="cancel"]':{click:"_onCancel"},
".tabs:not(.single-tab) .tab-item":{click:"_onTabClick"},".social-login-button":{click:"_onSubmit"},".login-with-google":{click:"_activateGoogleLogin"},'[data-action="login-with-squarespace"]':{click:"_activateSquarespaceLogin"},".password-recovery":{click:"_onPasswordRecoveryClick"},".create-account":{click:"_onCreateAccountClick"}},initializer:function(){console.log("Login widget initializer");this._initializeFields();this.externalAuth=new a.Squarespace.ExternalAuthentication({includeWebsiteList:!0});
this.publish("loginSuccess",{emitFacade:!0});this.publish("cancel",{emitFacade:!1})},_initializeFields:function(){var b=[];a.Object.each(c,function(c,d){var e=new c.ctor(a.merge(c.config));b.push(e)},this);var d=a.Array.find(b,function(a){return"email"===a.get("name")});d&&d.setAttrs({disabled:this.get("disableEmailChange"),data:this.get("email")});this._fields=b},renderUI:function(){e.superclass.renderUI.call(this);var b=this.get("contentBox");a.Squarespace.FormUtils.template(b,this._fields);(new a.Squarespace.Spinner({color:"dark",
size:"large",render:b.one(".loading-spinner")})).spin();this._focusInput();console.log("Login widget rendered")},bindUI:function(){e.superclass.bindUI.call(this);this.after("waitingChange",this.syncUI,this);this.after("activeLoginMethodChange",this._switchTab,this);a.Array.each(this._fields,function(a){if("text"===a.getType())a.on("submit",this._onSubmit,this)},this);this.on("waitingChange",function(b){a.Array.each(this._fields,function(a){a.set("readOnly",b.newVal)})},this)},syncUI:function(){e.superclass.syncUI.call(this);
var a=this.get("contentBox");this.get("contentBox").one(".wait-overlay").toggleClass("hidden",!this.get("waiting"));if(a=a.one(".tabs")){a.toggleClass("single-tabs",1===this.get("tabsEnabled"));a.all(".tab-item.active").removeClass("active");var b=this.get("activeLoginMethod");(a=a.one('.tab-item[data-login-method="'+b+'"]'))&&a.addClass("active")}},_focusInput:function(){var b="email";this.get("disableEmailChange")&&(b="password");a.Array.find(this._fields,function(a){return a.get("name")===b}).focus()},
_activateSquarespaceLogin:function(){this.set("activeLoginMethod","squarespace")},_activateGoogleLogin:function(){this.set("activeLoginMethod","google")},_onPasswordRecoveryClick:function(b){a.Squarespace.FormUtils.hideErrors(this._fields);this.hide();b=a.Squarespace.FormUtils.getData(this._fields);var c=new a.Squarespace.Widgets.PasswordRecovery;c.setInitialData({email:b.email});c.show();c.on("destroy",this.show,this)},_onCancel:function(a){this.fire("cancel");this.destroy()},_onCreateAccountClick:function(b){var c;
b=a.Squarespace.FormUtils.getData(this._fields).email;this.hide();c=new a.Squarespace.Widgets.CreateAccount({render:!0,email:b});c.once("cancel",function(){c.destroy();this.show()},this);c.after("memberAccountChange",function(){var b=c.get("memberAccount"),d=c.get("password");a.Lang.isValue(b)&&(a.Squarespace.FormUtils.setData(this._fields,{email:b.get("email"),password:d}),c.destroy(),this._loginSquarespace().then(a.bind(this._handleLoginSuccess,this),a.bind(this._handleLoginFailure,this)))},this)},
_getHBTemplateContext:function(){var a=e.superclass._getHBTemplateContext.call(this);a.selectMode="thin";1==a.tabsEnabled.length?a.selectMode="single":3>a.tabsEnabled.length&&(a.selectMode="wide");0===a.tabsEnabled.length&&(a.hideTab=!0);return a},_onTabClick:function(a){a=a.target.ancestor(".tab-item",!0).getAttribute("data-login-method");this.set("activeLoginMethod",a)},_switchTab:function(b){var c=this.get("contentBox").all(".body,.footer");c.removeClass(b.prevVal);c.addClass(b.newVal);this.syncUI();
a.Squarespace.FormUtils.hideErrors(this._fields)},_onSubmit:function(){this.set("waiting",!0);var b=this.get("activeLoginMethod");a.Squarespace.FormUtils.hideErrors(this._fields);switch(b){case "squarespace":b=this._loginSquarespace();break;case "guest":b=this._loginGuest();break;case "google":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.GOOGLEAUTH2);break;case "facebook":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.FACEBOOK);break;case "twitter":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.TWITTER);
break;default:console.error("unknown method: "+b);return}b.then(a.bind(this._handleLoginSuccess,this),a.bind(this._handleLoginFailure,this))},_loginSquarespace:function(){var b=a.Squarespace.FormUtils.getData(this._fields),c=b.email,d=b.password,e=b["stay-logged-in"],h=""+this.get("returnWebsiteList"),m=this.get("targetIdentifier");return new a.Squarespace.Promises.create(function(b,k){a.Data.post({url:"/api/auth/Login",secure:!0,data:{email:c,password:d,includeWebsiteList:h,remember:e,targetIdentifier:m},
success:function(a){b({type:"v6",websites:a.websites,account:a.account,website:a.targetWebsite})},failure:k},this)},this)},_loginGuest:function(){var b=a.Squarespace.FormUtils.getData(this._fields),c=b.displayName,d=b.anonEmail,e=b.authorUrl;return new a.Promise(function(b,k){(!a.Lang.isString(c)||1>c.length)&&k({errors:{displayName:"Need to specify display name"}});b({type:"guest",displayName:c,email:d,authorUrl:e})})},_loginOauth:function(c){var d=this.get("returnWebsiteList"),e=this.get("targetIdentifier");
return new a.Promise(function(h,m){var u=new a.Squarespace.ExternalAuthentication({includeWebsiteList:d,useLoginFlag:!0,targetIdentifier:e});u.on("completed",function(d){d=u.get("websites");var e=u.get("memberAccount"),f=u.get("website");a.Lang.isObject(e)?h({websites:d,account:e,website:f}):m({type:"oauth",error:"Authentication failed with "+b[c]+", please try again."})},this);u.openPopupWindow(c)})},_handleLoginSuccess:function(a){this.set("waiting",!1);this.fire("loginSuccess",a)},_handleLoginFailure:function(b){this.set("waiting",
!1);b.twoFactorAuthException?this._handleTwoFactorAuthRequired():a.Lang.isObject(b.errors)?a.Squarespace.FormUtils.showErrors(this._fields,b.errors):a.Lang.isString(b.error)&&new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":"Login Failed","strings.message":b.error})},_handleTwoFactorAuthRequired:function(){var b=this._getField(this._fields,"email").get("data");this.hide();b=new a.Squarespace.Widgets.TwoFactorAuth({email:b});b.show();b.on("close",
function(a){this.show();a=this._getField(this._fields,"password");a.set("data","");a.focus()},this);b.on("success",function(a){this.show();this._onSubmit()},this)},_getField:function(b,c){return a.Array.find(b,function(a){return a.get("name")===c})}},{CSS_PREFIX:"sqs-widgets-login",HANDLEBARS_TEMPLATE:"widgets-login.html",ATTRS:{activeLoginMethod:{value:"squarespace",validator:a.Squarespace.AttrValidators.isValueIn(["squarespace","google","twitter","facebook","guest"])},tabsEnabled:{value:["squarespace"],
validator:a.Squarespace.AttrValidators.isArray,writeOnce:"initOnly"},enableGoogleLoginLink:{value:!1,writeOnce:"initOnly"},returnWebsiteList:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},targetIdentifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},canCancel:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},email:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},
disableEmailChange:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},canCreateAccount:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},useLoginFlag:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},title:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},waiting:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},strings:{value:{loginButonTitle:"Login"}}}})},"1.0",{requires:"base squarespace-dialog-check squarespace-dialog-text squarespace-external-authentication squarespace-form-utils squarespace-promises squarespace-ss-widget squarespace-widgets-create-account squarespace-widgets-login-template squarespace-widgets-password-recovery squarespace-widgets-two-factor-auth".split(" ")})},
358:function(m,n,h){YUI.add("squarespace-widgets-create-account",function(a){var d={firstName:{ctor:a.Squarespace.DialogFields.Text,config:{name:"firstName",submitOnEnter:!0,className:"large",strings:{placeholder:"First Name"}}},lastName:{ctor:a.Squarespace.DialogFields.Text,config:{name:"lastName",submitOnEnter:!0,className:"large",strings:{placeholder:"Last Name"}}},email:{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",submitOnEnter:!0,className:"large",strings:{placeholder:"Email Address"}}},
password:{ctor:a.Squarespace.DialogFields.Password,name:"password",config:{required:!0,name:"password",className:"large","strings.placeholder":"Password",submitOnEnter:!0,strengthMeterVisible:!0}}};a.namespace("Squarespace.Widgets");var b=a.Squarespace.Widgets.CreateAccount=a.Base.create("create-account",a.Squarespace.SSWidget,[],{delegatedEvents:{'[data-action="submit"]':{click:"_onSubmit"},'[data-action="cancel"]':{click:"_onCancel"}},initializer:function(a){this._initializeFields();this.publish("cancel",
{emitFacade:!1})},_initializeFields:function(){var b=[];a.Object.each(d,function(d,k){d.config.errorFlyoutRenderTarget=this.get("boundingBox");var f=new d.ctor(a.merge(d.config));b.push(f)},this);a.Squarespace.FormUtils.setData(b,{email:this.get("email")});this._fields=b},renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("contentBox");a.Squarespace.FormUtils.template(c,this._fields);(new a.Squarespace.Spinner({color:"dark",size:"large",render:c.one(".loading-spinner")})).spin();
this._focusInput()},bindUI:function(){b.superclass.bindUI.call(this);this.after("waitingChange",this.syncUI,this);a.Array.each(this._fields,function(a){if("text"===a.getType())a.on("submit",this._onSubmit,this)},this)},syncUI:function(){b.superclass.syncUI.call(this);this.get("contentBox").one(".wait-overlay").toggleClass("hidden",!this.get("waiting"))},_focusInput:function(){a.Array.find(this._fields,function(a){return"firstName"===a.get("name")}).focus()},_onCancel:function(a){this.fire("cancel")},
_onSubmit:function(){this.set("waiting",!0);var b=a.Squarespace.FormUtils.getData(this._fields);a.Data.post({data:b,secure:!0,url:"/api/auth/CreateSquarespaceAccount",success:function(d){this.set("password",b.password);this.set("memberAccount",new a.Squarespace.Models.MemberAccount(d.memberAccount))},failure:function(b){this.set("waiting",!1);a.Squarespace.FormUtils.showErrors(this._fields,b.errors)}},this)}},{CSS_PREFIX:"sqs-widgets-create-account",HANDLEBARS_TEMPLATE:"widgets-create-account.html",
ATTRS:{memberAccount:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.MemberAccount)},password:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},email:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},waiting:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},strings:{value:{description:"Below you can sign up for a Squarespace account. Squarespace accounts let you keep a profile for editing and commenting on Squarespace websites."}}}})},
"1.0",{requires:"base squarespace-ss-widget squarespace-dialog-text squarespace-widgets-create-account-template squarespace-form-utils squarespace-attr-validators squarespace-dialog-password squarespace-models-member-account".split(" ")})},359:function(m,n,h){YUI.add("squarespace-widgets-password-reset",function(a){var d={name:"password-reset",loadingText:"Loading...",savingText:"",closingText:"",style:"minimal",width:400,closeOthers:!1,closeable:!1,disableOverlayCancel:!0,buttons:[{type:"saveAndClose",
title:"Save"}],title:{$value:"title"},initialData:{email:{$value:"email"},recoveryId:{$value:"recoveryId"}},fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:{$value:"message"}}},{ctor:a.Squarespace.DialogFields.Password,config:{name:"password","strings.placeholder":"New Password",submitOnEnter:!0,strengthMeterVisible:!0}}]};a.namespace("Squarespace.Widgets");var b=a.Squarespace.Widgets.PasswordReset=a.Base.create("PasswordReset",a.Squarespace.EditingDialog,[],{initialize:function(c){b.superclass.initialize.call(this);
c=a.merge({},c);c=a.Squarespace.ObjectBuilder.make(d,{},c);this.setParams(c);this.on("send-requested",this._submit,this);this.publish("success",{emitFacade:!0})},_submit:function(b){a.Lang.isObject(b)&&b.halt();var d=this.getData();a.Squarespace.Promises.create(function(b,c){a.Data.post({url:"/api/auth/password-reset",secure:!0,json:!0,data:d,success:b,failure:c})}).then(a.bind(this._handleSuccess,this),a.bind(this._handleFailure,this))},_handleSuccess:function(){this.fire("success")},_handleFailure:function(b){b.twoFactorAuthException?
this._handleTwoFactorAuthRequired():a.Lang.isValue(b.errors)&&this.showErrors(b.errors)},_handleTwoFactorAuthRequired:function(){this.temporaryHide();var b=this.getData(),b=new a.Squarespace.Widgets.TwoFactorAuth({email:b.email});b.show();b.on("close",function(a){this.temporaryShow();this.hideSaveOverlay();this.focusTab()},this);b.on("success",function(a){this._submit()},this)}})},"1.0",{requires:["base","squarespace-dialog","squarespace-object-builder","squarespace-promises","squarespace-widgets-two-factor-auth"]})},
360:function(m,n,h){YUI.add("squarespace-widgets-website-selector",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.WebsiteSelector=a.Base.create("WebsiteSelector",a.Squarespace.Widgets.DialogField2,[],{initializer:function(){},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("title"),c=this.get("websites");c.isEmpty()&&(b=this.get("strings.noWebsitesError"));var e=this.get("contentBox");a.Lang.isString(b)&&e.append(a.Node.create('<div class="select-title">'+
b+"</div>"));b=a.Node.create('<div class="member-account"></div><div class="websites-wrapper"><div class="websites"></div></div>');e.append(b);(new a.Squarespace.Widgets.MemberAccount({model:this.get("memberAccount"),boundingBox:e.one(".member-account")})).render();var c=this._segmentWebsites(c),k=e.one(".websites");a.Array.each(c,function(b){if(0<b.websites.size()){var c=a.Node.create('<div class="website-sublist"></div>');k.append(c);b=new a.Squarespace.Widgets.WebsiteList({models:b.websites,boundingBox:c,
"strings.title":b.name});b.render(k);this.add(b)}},this);this._set("errorFlyoutAnchor",k)},bindUI:function(){d.superclass.bindUI.call(this);this.on("WebsiteList:selectedWebsiteChange",function(b){a.Lang.isValue(b.newVal)&&this.set("selectedWebsite",b.newVal)},this)},_segmentWebsites:function(b){var c=new a.Squarespace.Models.ModelList,d=new a.Squarespace.Models.ModelList,k=new a.Squarespace.Models.ModelList,f=new a.Squarespace.Models.ModelList;b.each(function(b){var h=b.get("siteStatus");switch(a.Lang.isNumber(h)?
h:a.Object.getValue(h,["value"])){case a.Squarespace.StatusConstants.PASTDUE:case a.Squarespace.StatusConstants.COMPED:case a.Squarespace.StatusConstants.ACTIVE:c.add(b);break;case a.Squarespace.StatusConstants.EXPIRED:d.add(b);break;case a.Squarespace.StatusConstants.TRIAL:k.add(b);break;case a.Squarespace.StatusConstants.INTERNAL:f.add(b)}b.get("faviconURL")||b.set("faviconURL",b.get("authenticUrl")+"/favicon.ico")});return[{name:"Internal",websites:f},{name:"Active",websites:c},{name:"Trial",websites:k},
{name:"Expired",websites:d}]},isEmpty:function(){return!this.get("selectedWebsite")}},{CSS_PREFIX:"sqs-website-selector",ATTRS:{strings:{value:{noWebsitesError:"You do not have any existing websites, is this the right account?"}},title:{validator:a.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},memberAccount:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount),writeOnce:"initOnly"},websites:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList),
writeOnce:"initOnly"},selectedWebsite:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Model)},data:{getter:function(){return this.get("selectedWebsite")}},required:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:"base model squarespace-widgets-website-list squarespace-widgets-member-account squarespace-widgets-model-list squarespace-models-member-account widget-parent".split(" ")})},361:function(m,n,h){YUI.add("squarespace-widgets-website-list",function(a){a.namespace("Squarespace.Widgets");
var d=a.Squarespace.Widgets.WebsiteList=a.Base.create("WebsiteList",a.Squarespace.Widgets.ModelList,[a.WidgetChild],{syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("strings.title");a.Lang.isString(b)&&this.get("contentBox").insert(a.Node.create('<div class="list-title">'+b+"</div>"),0)},bindUI:function(){this.after("selectionChange",function(b){b=b.newVal;a.Lang.isNull(b)?this.set("selectedWebsite",null):this.set("selectedWebsite",b.get("model"))},this)}},{CSS_PREFIX:"sqs-website-list",
ATTRS:{selectedWebsite:{value:null},defaultChildType:{value:a.Squarespace.Widgets.Website}}})},"1.0",{requires:["base","squarespace-widgets-website","squarespace-widgets-model-list","widget-child"]})},362:function(m,n,h){YUI.add("squarespace-widgets-website",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.Website=a.Base.create("Website",a.Squarespace.Widgets.Model,[],{renderUI:function(){d.superclass.renderUI.call(this)},bindUI:function(){d.superclass.bindUI.call(this);
this.get("boundingBox").on("click",function(){this.set("selected",1)},this)},_getHBTemplateContext:function(){var b=this.get("model").toJSON();a.Lang.isValue(b.authenticUrl)&&!a.Lang.isValue(b.url)&&(b.url=b.authenticUrl);return b}},{CSS_PREFIX:"sqs-website",HANDLEBARS_TEMPLATE:"widgets-website.html"})},"1.0",{requires:["base","squarespace-util","squarespace-widgets-model","squarespace-widgets-website-template"]})},363:function(m,n,h){YUI.add("squarespace-widgets-model",function(a){a.namespace("Squarespace.Widgets");
var d=a.Squarespace.Widgets.Model=a.Base.create("Model",a.Squarespace.Widgets.SSWidget,[a.WidgetChild],{bindUI:function(){d.superclass.bindUI.call(this);this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var a=d.superclass._getHBTemplateContext.call(this);a.model=a.model.toJSON();return a}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new a.Model},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Model),writeOnce:"initOnly"}}})},
"1.0",{requires:["base","model","widget-child","squarespace-attr-validators","squarespace-ss-widget"]})},364:function(m,n,h){YUI.add("squarespace-widgets-model-list",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.ModelList=a.Base.create("ModelList",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},bindUI:function(){d.superclass.bindUI.call(this);this._bindModels();this.after("modelsChange",
function(){this._bindModels();this.syncUI()},this)},syncUI:function(){d.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_bindModels:function(){var a=this.get("models");this._registerEvent([a.after("add",function(c){1===a.size()&&this._empty();this._addWidgetForModel(c.model)},this),a.after("remove",function(c){this._removeWidgetForModel(c.model);a.isEmpty()&&this._renderEmptyState()},this),a.after("reset",this._renderLoadedState,this)])},_renderLoadingState:function(){this._loadingTimer&&
this._loadingTimer.cancel();this._loadingTimer=a.later(500,this,function(){this._empty();new a.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._empty();var a=this.get("models");a.isEmpty()?this._renderEmptyState():a.each(this._addWidgetForModel,this)},_renderEmptyState:function(){var b=this.get("emptyStateIconSrc"),c=this.get("strings.modelName")+"s",d=a.Node.create('<div class="no-models"></div>');
a.Lang.isValue(b)&&""!==b&&d.append('<img class="icon large" src="'+b+'" />');d.append('<div class="no-models-text">'+this.getEmptyStateMessage(c)+"</div>");this.get("contentBox").append(d)},getEmptyStateMessage:function(a){return"There are no "+a+"."},_empty:function(){this.removeAll().each(function(a){a.destroy()});this._childrenContainer.empty()},_addWidgetForModel:function(a){var c=this.get("models").indexOf(a);this.add({model:a},c)},_removeWidgetForModel:function(a){var c;this.some(function(d){if(d.get("model")===
a)return c=d,!0})&&c.destroy()}},{CSS_PREFIX:"sqs-model-list",ATTRS:{models:{valueFn:function(){return new a.Squarespace.Models.ModelList},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList)},emptyStateIconSrc:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},loadable:{getter:function(){return this.get("models")},readOnly:!0},strings:{value:{modelName:"model"},validator:function(b){return!a.Lang.isObject(b)?(console.error('ModelList: Invalid "strings" attribute. Must be an object.'),
!1):!a.Object.hasKey(b,"modelName")?(console.error('ModelList: Invalid "strings" attribute. Must have key "modelName".'),!1):!0},writeOnce:"initOnly"},defaultChildType:{value:a.Squarespace.Widgets.Model,writeOnce:"initOnly"}}})},"1.0",{requires:"base event-custom squarespace-attr-validators squarespace-mixins-loadable squarespace-models-model-list squarespace-spinner squarespace-ss-widget squarespace-widgets-model widget-parent".split(" ")})},365:function(m,n,h){YUI.add("squarespace-mixins-loadable",
function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Loadable=a.Base.create("Loadable",a.Base,[],{initializer:function(){var d=this.get("loadable"),b=this.get("loadOnInitialize");a.Lang.isValue(d)?(this._bindLoadable(),b&&d.load()):b&&console.error("Squarespace.Mixins.Loadable: You set loadOnInitialize to true, but the loadable was not defined in the initializer.");this.after("loadableChange",this._bindLoadable,this)},destructor:function(){this._beforeLoadHandler&&this._beforeLoadHandler.detach();
this._afterLoadHandler&&this._afterLoadHandler.detach();this._afterBindHandler&&this._afterBindHandler.detach()},_bindLoadable:function(){var d=this.get("loadable");this._beforeLoadHandler=a.Do.before(function(){this._set("loading",!0)},d,"load",this);this._afterLoadHandler=d.after(["load","error"],function(){this.get("destroyed")||this._set("loading",!1)},this);this._afterBindHandler=a.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},
loading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},loadOnInitialize:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]})},366:function(m,n,h){YUI.add("squarespace-models-model-list",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.ModelList=a.Base.create("ModelList",a.ModelList,[a.Squarespace.ModelSync.REST],{parse:function(b){b=d.superclass.parse.call(this,
b);var c=this._getResponseAttrs(b);a.Object.each(c,function(a,b){this._set(b,a)},this);return b.results},_getResponseAttrs:function(a){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]})},367:function(m,n,h){YUI.add("squarespace-widgets-member-account",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.MemberAccount=a.Base.create("MemberAccount",a.Squarespace.Widgets.Model,[],{renderUI:function(){d.superclass.renderUI.call(this)},syncUI:function(){d.superclass.syncUI.apply(this,
arguments);var b=this.get("contentBox"),c=this.get("model"),b=b.one(".profile-image");a.Lang.isString(c.get("avatarId"))?b.setStyle("backgroundImage","url("+c.get("avatarAssetUrl")+")"):b.setStyle("backgroundImage",null)},_getHBTemplateContext:function(){return this.get("model").toJSON()}},{CSS_PREFIX:"sqs-member-account",HANDLEBARS_TEMPLATE:"widgets-member-account.html",ATTRS:{model:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount)}}})},"1.0",{requires:["base",
"squarespace-util","squarespace-widgets-model","squarespace-widgets-member-account-template","squarespace-models-member-account"]})},1088:function(m,n,h){YUI.add("squarespace-domains-models-google-domain",function(a){a.namespace("Squarespace.Domains.Models");a.Squarespace.Domains.Models.GoogleDomain=a.Base.create("googleDomain",a.Squarespace.Domains.Models.Domain,[],{root:a.Squarespace.REST_API_ROOT+"domains/google",isNew:function(){return a.Lang.isValue(this.get("googleAuthRequestId"))}},{ATTRS:{googleAuthRequestId:{validator:a.Squarespace.AttrValidators.isString}}})},
"1.0",{requires:["base","squarespace-domains-models-domain"]})},1089:function(m,n,h){YUI.add("squarespace-domains-models-domain",function(a){a.namespace("Squarespace.Domains.Models");a.Squarespace.Domains.Models.Domain=a.Base.create("Domain",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"domains"},{ATTRS:{id:{validator:a.Squarespace.AttrValidators.isString},autoRenew:{validator:a.Squarespace.AttrValidators.isBoolean},renewsOn:{validator:a.Squarespace.AttrValidators.isNullOrNumber},
createdOn:{validator:a.Squarespace.AttrValidators.isNumber},discountExpiresOn:{setter:function(d){return d instanceof Date?d:a.Lang.isNumber(d)?new Date(d):null}},dnsActive:{validator:a.Squarespace.AttrValidators.isBoolean},googleDnsActive:{validator:a.Squarespace.AttrValidators.isBoolean},isVerified:{validator:a.Squarespace.AttrValidators.isBoolean},locked:{validator:a.Squarespace.AttrValidators.isBoolean},managedDomainExpiration:{validator:a.Squarespace.AttrValidators.isNullOrNumber},name:{validator:a.Squarespace.AttrValidators.isString},
price:{validator:a.Squarespace.AttrValidators.isString},providerId:{validator:a.Squarespace.AttrValidators.isNumber},purchasedGoogleApps:{validator:a.Squarespace.AttrValidators.isBoolean},revokable:{validator:a.Squarespace.AttrValidators.isBoolean},subscriptionState:{validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.DomainSubscriptionState)},type:{validator:a.Squarespace.AttrValidators.isNumber},verficationCode:{validator:a.Squarespace.AttrValidators.isNullOrString},withinPropagationWindow:{validator:a.Squarespace.AttrValidators.isBoolean},
whoisPrivacy:{validator:a.Squarespace.AttrValidators.isNullOrBoolean}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-attr-validators","squarespace-enum"]})},1629:function(m,n,h){YUI.add("datatype-number-parse",function(a,d){var b=a.Escape.regex;a.mix(a.namespace("Number"),{_buildParser:a.cached(function(a,d,k,f){var g=[],h;a&&g.push("^\\s*"+b(a)+"\\s*");d&&g.push("\\s*"+b(d)+"\\s*$");k&&g.push(b(k)+"(?=\\d)");h=RegExp("(?:"+g.join("|")+")","g");"."===f&&(f=null);return function(a){a=
a.replace(h,"");return f?a.replace(f,"."):a}}),parse:function(b,d){var k;d&&"string"===typeof b&&(k=this._buildParser(d.prefix,d.suffix,d.thousandsSeparator,d.decimalSeparator),b=k(b));"string"===typeof b&&""!==a.Lang.trim(b)&&(b=+b);if("number"!==typeof b||!isFinite(b))b=null;return b}});a.namespace("Parsers").number=a.Number.parse;a.namespace("DataType");a.DataType.Number=a.Number},"3.17.2",{requires:["escape"]})},1706:function(m,n,h){YUI.add("squarespace-dialog-check-template",function(a){var d=
a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-check.html"]=a(function(a,b,d,f,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};var h,m=this.escapeExpression;a='<div class="check-element ';if((f=d["if"].call(b,b.data,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"active"},g),data:g}))||0===f)a+=f;a+='">\n  ';if((h=d["if"].call(b,(f=b.strings,null==f||!1===f?f:f.title),{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,
d;return c=""+('\n    <div class="title">'+m((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===typeof d?d.apply(a):d))+"</div>\n  ")},g),data:g}))||0===h)a+=h;a+="\n  ";if((h=d["if"].call(b,(f=b.strings,null==f||!1===f?f:f.description),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d,e;c='\n    <div class="description">';if((e=(d=(d=a.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(a):d))||0===e)c+=e;return c+"</div>\n  "},g),data:g}))||0===h)a+=h;return a+
"\n</div>\n"})})();a.Handlebars.registerPartial("dialog-check.html".replace("/","."),d.templates["dialog-check.html"])},"1.0",{requires:["handlebars-base"]})},1707:function(m,n,h){YUI.add("squarespace-dialog-text-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-text.html"]=a(function(a,b,d,f,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};a="";var h,m=this.escapeExpression;if((f=d["if"].call(b,(h=b.strings,null==h||!1===
h?h:h.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;return c=""+('\n  <div class="title">'+m((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===typeof d?d.apply(a):d))+"</div>\n")},g),data:g}))||0===f)a+=f;a+='\n\n<input type="text" ';if((f=d["if"].call(b,b.maxLength,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;c='maxlength="';(e=d.maxLength)?e=e.call(a,{hash:{},data:b}):(e=a.maxLength,e="function"===typeof e?e.apply(a):e);return c+=m(e)+'"'},
g),data:g}))||0===f)a+=f;a+="\n       ";if((f=d["if"].call(b,b.readOnly,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'readonly="readonly"'},g),data:g}))||0===f)a+=f;a+="\n       ";if((f=d["if"].call(b,b.selectAllOnFocus,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){return'onClick="this.select()"'},g),data:g}))||0===f)a+=f;a+="/>\n\n";if((f=d["if"].call(b,(h=b.strings,null==h||!1===h?h:h.description),{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var c,
d,e;c='\n\n\t<div class="description">\n    ';if((e=(d=(d=a.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(a):d))||0===e)c+=e;return c+"\n  </div>\n\n"},g),data:g}))||0===f)a+=f;return a+"\n"})})();a.Handlebars.registerPartial("dialog-text.html".replace("/","."),d.templates["dialog-text.html"])},"1.0",{requires:["handlebars-base"]})},1718:function(m,n,h){YUI.add("squarespace-widgets-create-account-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=
d.templates||{})["widgets-create-account.html"]=a(function(a,b,d,f,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};f=this.escapeExpression;a='<div class="wait-overlay ';if((d=d.unless.call(b,b.waiting,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"hidden"},g),data:g}))||0===d)a+=d;return a+='">\n\t<div class="loading-spinner"></div>\n</div>\n<div class="title-block">\n\t<div class="title-text">Create Squarespace Account</div>\n</div>\n\n<div class="body-block">\n\t<div class="description">'+
f((d=(d=b.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(b):d))+'</div>\n\t<div class="name">\n\t\t<div class="display-first-name-field-wrapper" data-field-name="firstName"></div>\n\t\t<div class="display-last-name-field-wrapper" data-field-name="lastName"></div>\n\t</div>\n\t<div class="display-email-field-wrapper" data-field-name="email"></div>\n\t<div class="display-password-field-wrapper" data-field-name="password"></div>\n</div>\n\n<div class="controls-block">\n\t<div class="button-holder">\n\t\t<div class="cancel-block" data-action="cancel">Cancel</div>\n\t\t<div class="saveAndClose" data-action="submit">Create Account</div>\n\t</div>\n</div>'})})();
a.Handlebars.registerPartial("widgets-create-account.html".replace("/","."),d.templates["widgets-create-account.html"])},"1.0",{requires:["handlebars-base"]})},1719:function(m,n,h){YUI.add("squarespace-widgets-login-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["widgets-login.html"]=a(function(a,b,d,f,g){function h(a,b,d){var c;return a=""+('\n          <span data-login-method="'+w(typeof a===p?a.apply(a):a)+'" class="tab-item '+w(typeof a===p?
a.apply(a):a)+" "+w((c=d.selectMode,typeof c===p?c.apply(a):c))+'"></span>\n        ')}function m(a,b){return"arrow"}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};var n,p="function",w=this.escapeExpression,l=this,t=d.blockHelperMissing;a='<div class="login-wrapper">\n  <div class="wait-overlay ';if((f=d.unless.call(b,b.waiting,{hash:{},inverse:l.noop,fn:l.program(1,function(a,b){return"hidden"},g),data:g}))||0===f)a+=f;a+='">\n    <div class="loading-spinner"></div>\n  </div>\n\n  <div class="header ';
n={hash:{},inverse:l.noop,fn:l.program(3,function(a,b){return"has-title"},g),data:g};(f=d.title)?f=f.call(b,n):(f=b.title,f=typeof f===p?f.apply(b):f);d.title||(f=t.call(b,f,n));if(f||0===f)a+=f;a+='">\n    ';if((f=d["if"].call(b,b.title,{hash:{},inverse:l.noop,fn:l.program(5,function(a,b){var c,e;c='\n      <div class="title">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===p?e.apply(a):e);if(e||0===e)c+=e;return c+"</div>\n    "},g),data:g}))||0===f)a+=f;a+='\n  </div>\n\n  <div class="body ';
(f=d.activeLoginMethod)?f=f.call(b,{hash:{},data:g}):(f=b.activeLoginMethod,f=typeof f===p?f.apply(b):f);a+=w(f)+'">\n    ';if((f=d.unless.call(b,b.hideTab,{hash:{},inverse:l.noop,fn:l.program(7,function(a,b){var c,e;c='\n    <div class="login-selector select-mode-';(e=d.selectMode)?e=e.call(a,{hash:{},data:b}):(e=a.selectMode,e=typeof e===p?e.apply(a):e);c+=w(e)+'">\n      <div class="tabs">\n        ';if((e=d.each.call(a,a.tabsEnabled,{hash:{},inverse:l.noop,fn:l.programWithDepth(8,h,b,a),data:b}))||
0===e)c+=e;return c+"\n      </div>\n    </div>\n    "},g),data:g}))||0===f)a+=f;a+='\n\n    <div class="mode squarespace">\n      <div class="email-field-wrapper" data-field-name="email"></div>\n\n      <div class="password-field-wrapper">\n        <div data-field-name="password"></div>\n\n        <div class="password-recovery" data-action="password-recovery">Forgot?</div>\n      </div>\n\n      <div class="primordial-options">\n        <div class="stay-logged-in" data-field-name="stay-logged-in"></div>\n\n        ';
if((f=d["if"].call(b,b.enableGoogleLoginLink,{hash:{},inverse:l.noop,fn:l.program(10,function(a,b){return'\n          <div class="login-with-google" data-action="login-with-google">Login with Google+</div>\n        '},g),data:g}))||0===f)a+=f;a+="\n\n        ";if((f=d.unless.call(b,b.enableGoogleLoginLink,{hash:{},inverse:l.noop,fn:l.program(12,function(a,b){var c,e,f;c='\n          <div class="submit button ';if((f=d.unless.call(a,(e=a.strings,null==e||!1===e?e:e.loginButonTitle),{hash:{},inverse:l.noop,
fn:l.program(13,m,b),data:b}))||0===f)c+=f;return c+='" data-action="submit">'+w((e=(e=a.strings,null==e||!1===e?e:e.loginButonTitle),typeof e===p?e.apply(a):e))+"</div>\n        "},g),data:g}))||0===f)a+=f;a+='\n      </div>\n    </div>\n    <div class="mode google social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode facebook social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode twitter social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode guest">\n      <div class="display-name-field-wrapper" data-field-name="displayName"></div>\n      <div class="anon-email-field-wrapper" data-field-name="anonEmail"></div>\n      <div class="author-url-field-wrapper" data-field-name="authorUrl"></div>\n      <div class="buttons">\n        ';
if((f=d["if"].call(b,b.canCancel,{hash:{},inverse:l.noop,fn:l.program(15,function(a,b){return'\n          <div class="cancel" data-action="cancel">Cancel</div>\n        '},g),data:g}))||0===f)a+=f;a+='\n        <div class="submit button" data-action="submit">'+w((f=(f=b.strings,null==f||!1===f?f:f.loginButonTitle),typeof f===p?f.apply(b):f))+'</div>\n      </div>\n    </div>\n  </div>\n\n  <div class="footer ';(f=d.activeLoginMethod)?f=f.call(b,{hash:{},data:g}):(f=b.activeLoginMethod,f=typeof f===
p?f.apply(b):f);a+=w(f)+'">\n    <div class="buttons">\n      ';if((f=d["if"].call(b,b.canCancel,{hash:{},inverse:l.noop,fn:l.program(17,function(a,b){return'\n        <div class="cancel" data-action="cancel">Cancel</div>\n      '},g),data:g}))||0===f)a+=f;a+="\n\n      ";if((f=d["if"].call(b,b.canCreateAccount,{hash:{},inverse:l.noop,fn:l.program(19,function(a,b){return'\n        <div class="create-account" data-action="create-account">Create Squarespace Account</div>\n      '},g),data:g}))||0===
f)a+=f;a+="\n\n      ";if((f=d["if"].call(b,b.enableGoogleLoginLink,{hash:{},inverse:l.noop,fn:l.program(21,function(a,b){var c,e,f;c='\n        <div class="submit button ';if((f=d.unless.call(a,(e=a.strings,null==e||!1===e?e:e.loginButonTitle),{hash:{},inverse:l.noop,fn:l.program(13,m,b),data:b}))||0===f)c+=f;return c+='" data-action="submit">'+w((e=(e=a.strings,null==e||!1===e?e:e.loginButonTitle),typeof e===p?e.apply(a):e))+"</div>\n      "},g),data:g}))||0===f)a+=f;return a+"\n    </div>\n  </div>\n</div>\n"})})();
a.Handlebars.registerPartial("widgets-login.html".replace("/","."),d.templates["widgets-login.html"])},"1.0",{requires:["handlebars-base"]})},1720:function(m,n,h){YUI.add("squarespace-widgets-website-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["widgets-website.html"]=a(function(a,b,d,f,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};f=this.escapeExpression;a='<div class="website" data-site-id="';(d=d.id)?d=d.call(b,{hash:{},
data:g}):(d=b.id,d="function"===typeof d?d.apply(b):d);return a+=f(d)+'">\n\n  <div class="favicon"><img src="'+f((d=b.faviconURL,"function"===typeof d?d.apply(b):d))+'" alt="'+f((d=b.siteTitle,"function"===typeof d?d.apply(b):d))+' favicon">\n  </div>\n\n  <div class="site-desc">\n    <span class="title">'+f((d=b.siteTitle,"function"===typeof d?d.apply(b):d))+'</span>\n    <span class="url">'+f((d=b.url,"function"===typeof d?d.apply(b):d))+"</span>\n  </div>\n\n</div>\n"})})();a.Handlebars.registerPartial("widgets-website.html".replace("/",
"."),d.templates["widgets-website.html"])},"1.0",{requires:["handlebars-base"]})},1721:function(m,n,h){YUI.add("squarespace-widgets-member-account-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["widgets-member-account.html"]=a(function(a,b,d,f,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);g=g||{};var h=this.escapeExpression;a='  <div class="profile-image"></div>\n\n  <div class="profile-info">\n    <span class="name">';(f=d.displayName)?
f=f.call(b,{hash:{},data:g}):(f=b.displayName,f="function"===typeof f?f.apply(b):f);a+=h(f)+'</span>\n    <span class="email">';(f=d.email)?f=f.call(b,{hash:{},data:g}):(f=b.email,f="function"===typeof f?f.apply(b):f);return a+=h(f)+"</span>\n  </div>\n"})})();a.Handlebars.registerPartial("widgets-member-account.html".replace("/","."),d.templates["widgets-member-account.html"])},"1.0",{requires:["handlebars-base"]})},1881:function(m,n,h){function a(a){return a.replace(/^\s+|\s+$/g,"")}function d(a,
b){return 0==a.indexOf(b)}var b=h(2022);m.exports=function(c,e){function k(){var a="";if(t)for(var b=0;b<t.length-1;b++)a+="  ";return a+=g(t)}function f(a){var b={},d;for(d in a){var c=a[d];b[c.name]=c}return b}function g(a){return a&&0<a.length?a.slice(-1)[0]:""}function h(a){if(!a)return"";for(var b=a.length-1;0<=b;b--)if(""!=a[b])return a[b];return""}function m(a){var b=!1;if(a==h(l)){for(;g(l)!=a;)l.pop();l.pop();b=!0}return b}function n(a){for(var b=[];0<l.length&&g(l)!=a;){var d=l.pop();b.unshift(d)}return b.join("")}
function p(a){var b=l.pop();b&&(a?(l.push(b),"\n"!=b.match("\n$")&&l.push("\n\n")):(/\s*\n\n\s*$/.test(b)?(b=b.replace(/\s*\n\n\s*$/,"\n\n"),a=""):/\s*\n\s*$/.test(b)?(b=b.replace(/\s*\n\s*$/,"\n"),a="\n"):(/\s+$/.test(b),a="\n\n"),l.push(b),l.push(a)))}function w(){0<l.length?"\n"!=g(l).match("\n$")&&l.push("\n"):l.push("\n")}e=e||{};var l=[],t=[],v=[],A=[],I=[],x=[],H=[],y=e.inlineStyle||!1,G=e.parser,D={hr:"- - -\n\n",br:"  \n",title:"# ",h1:"# ",h2:"## ",h3:"### ",h4:"#### ",h5:"##### ",h6:"###### ",
b:"**",strong:"**",i:"_",em:"_",dfn:"_","var":"_",cite:"_",span:" ",ul:"* ",ol:"1. ",dl:"- ",blockquote:"> ",code:"`"};!G&&"undefined"!==typeof b&&(G=b);G(c,{preserve:function(a,b){var d="\n"+a.outerHTML.replace(RegExp(" "+b+'="true"',"g"),"")+"\n";l.push(d)},start:function(b,c,e){b=b.toLowerCase();if(!e||!("br"!=b&&"hr"!=b&&"img"!=b))switch(b){case "br":l.push(D[b]);break;case "hr":p();l.push(D[b]);break;case "title":case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":p();l.push(D[b]);break;
case "b":case "strong":case "i":case "em":case "dfn":case "var":case "cite":l.push(D[b]);break;case "code":if(0<I.length||0<x.length)break;l.push(D[b]);x.push(!0);break;case "span":if(0<I.length||0<x.length)break;else/\s+$/.test(g(l))||l.push(D[b]);break;case "p":case "div":case "table":case "tbody":case "tr":case "td":p();break;case "ul":case "ol":case "dl":t.push(D[b]);1<t.length?w():p();break;case "li":case "dt":var m=k();l.push(m);break;case "a":b=f(c);v.push(b);l.push("[");break;case "img":b=
f(c);var L,z;b.src?z=b.src.value:z="";if(!z)break;b.alt?m=a(b.alt.value):m="";b.title?L=a(b.title.value):L="";!y&&!d(h(l),"[")?(b=H.indexOf(z),-1==b&&(H.push(z),b=H.length-1),p(),l.push("!["),""!=m?l.push(m):null!=L&&l.push(L),l.push("]["+b+"]"),p()):(d(h(l),"[")||p(),l.push("!["+m+"]("+z+(L?' "'+L+'"':"")+")"),d(h(l),"[")||p(!0));break;case "blockquote":p();A.push(D[b]);break;case "pre":p();I.push(!0);l.push("    ");break;case "table":l.push("<table>");break;case "thead":l.push("<thead>");break;
case "tbody":l.push("<tbody>");break;case "tr":l.push("<tr>");break;case "td":l.push("<td>")}},chars:function(b){if(0===x.length)if(0<I.length)b=b.replace(/\n/g,"\n    ");else if(""!=a(b)){b=b.replace(/\s+/g," ");var d=h(l);/\s+$/.test(d)&&(b=b.replace(/^\s+/g,""))}else{l.push("");return}0<A.length&&l.push(A.join(""));l.push(b)},end:function(b){b=b.toLowerCase();switch(b){case "title":case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":m(D[b])||p(!0);break;case "p":case "div":case "table":case "tbody":case "tr":case "td":for(;0<
l.length&&""==a(g(l));)l.pop();p(!0);break;case "b":case "strong":case "i":case "em":case "dfn":case "var":case "cite":m(D[b])||(l.push(a(n(D[b]))),l.push(D[b]));break;case "a":var c=n("["),c=c.replace(/\s+/g," "),c=a(c);if(""==c){l.pop();break}b=v.pop();var e;b.href&&""!=b.href.value?e=b.href.value:e="";if(""==e){l.pop();l.push(c);break}l.push(c);!y&&!d(g(l),"!")?(c=H.indexOf(e),-1==c&&(H.push(e),c=H.length-1),l.push("]["+c+"]")):(d(g(l),"!")&&(c=l.pop(),c=l.pop()+c,p(),l.push(c)),c=b.title,l.push("]("+
e+(c?' "'+a(c.value).replace(/\s+/g," ")+'"':"")+")"),d(g(l),"!")&&p(!0));break;case "ul":case "ol":case "dl":w();t.pop();break;case "li":case "dt":e=k();m(e)||(c=a(n(e)),d(c,"[![")?(l.pop(),p(),l.push(c),p(!0)):(l.push(c),w()));break;case "blockquote":A.pop();break;case "pre":p(!0);I.pop();break;case "code":x.pop();case "span":if(0<I.length)break;else""==a(g(l))?l.pop():(c=l.pop(),l.push(a(c))),l.push(D[b]);break;case "table":l.push("</table>");break;case "thead":l.push("</thead>");break;case "tbody":l.push("</tbody>");
break;case "tr":l.push("</tr>");break;case "td":l.push("</td>")}}},{nodesToPreserve:"script noscript object iframe frame head style label".split(" ")});if(!y)for(G=0;G<H.length;G++)if(0==G){var Q=l.pop();l.push(Q.replace(/\s+$/g,""));l.push("\n\n["+G+"]: "+H[G])}else l.push("\n["+G+"]: "+H[G]);return l.join("")}},1882:function(m,n,h){m.exports={converter:function(){var a,d,b,c=0;this.makeHtml=function(c){a=[];d=[];b=[];c=c.replace(/~/g,"~T");c=c.replace(/\$/g,"~D");c=c.replace(/\r\n/g,"\n");c=c.replace(/\r/g,
"\n");c=T("\n\n"+c+"\n\n");c=c.replace(/^[ \t]+$/mg,"");c=k(c);c=e(c);c=g(c);c=Q(c);c=c.replace(/~D/g,"$$");return c=c.replace(/~T/g,"~")};var e=function(b){return b=b.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)[ \t]+["'(](.+?)["')][ \t]*)?(?:\n+|$)/gm,function(b,c,e,f,g){c=c.toLowerCase();a[c]=y(e);if(f)return f+g;g&&(d[c]=g.replace(/"/g,"&quot;"));return""})},k=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,
f);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,f);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,f);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,f);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,f);return a=a.replace(/\n\n/g,"\n")},f=function(a,d){var c;c=d.replace(/\n\n/g,"\n");c=c.replace(/^\n/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+
(b.push(c)-1)+"K\n\n"},g=function(a){a=w(a);var c=A("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,c);a=t(a);a=v(a);a=H(a);a=k(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var d=a.split(/\n{2,}/g);a=[];for(var c=d.length,e=0;e<c;e++){var f=d[e];0<=f.search(/~K(\d+)K/g)?a.push(f):0<=f.search(/\S/)&&(f=h(f),f=f.replace(/^([ \t]*)/g,"<p>"),f+="</p>",a.push(f))}c=a.length;for(e=0;e<
c;e++)for(;0<=a[e].search(/~K(\d+)K/);)d=b[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[e]=a[e].replace(/~K\d+K/,d);return a=a.join("\n\n")},h=function(a){a=I(a);a=m(a);a=a.replace(/\\(\\)/g,s);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,s);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,n);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
n);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,n);a=G(a);a=y(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},m=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=K(a,"\\`*_")})},n=function(b,c,e,f,g,k,h,l){void 0==l&&(l="");b=f.toLowerCase();if(""==g)if(""==b&&(b=e.toLowerCase().replace(/ ?\n/g,
" ")),void 0!=a[b])g=a[b],void 0!=d[b]&&(l=d[b]);else if(-1<c.search(/\(\s*\)$/m))g="";else return c;g=K(g,"*_");c='<a href="'+g+'"';""!=l&&(l=l.replace(/"/g,"&quot;"),l=K(l,"*_"),c+=' title="'+l+'"');return c+(">"+e+"</a>")},p=function(b,c,e,f,g,k,h,l){b=e;f=f.toLowerCase();l||(l="");if(""==g)if(""==f&&(f=b.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[f])g=a[f],void 0!=d[f]&&(l=d[f]);else return c;b=b.replace(/"/g,"&quot;");g=K(g,"*_");c='<img src="'+g+'" alt="'+b+'"';l=l.replace(/"/g,"&quot;");
l=K(l,"*_");return c=c+(' title="'+l+'"')+" />"},w=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return A('<h1 id="'+b(c)+'">'+h(c)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return A('<h2 id="'+b(c)+'">'+h(c)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){a=c.length;return A("<h"+a+' id="'+b(d)+'">'+h(d)+"</h"+a+">")})},l,t=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
c?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=l(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=l(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};l=function(a){c++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,
function(a,b,c,d,e){a=e;b||-1<a.search(/\n{2,}/)?a=g(R(a)):(a=t(R(a)),a=a.replace(/\n$/,""),a=h(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");c--;return a};var v=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=x(R(b));a=T(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return A(a)+c});return a=a.replace(/~0/,"")},A=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(b.push(a)-1)+
"K\n\n"},I=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=x(a);return b+"<code>"+a+"</code>"})},x=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=K(a,"*_{}[]\\",!1)},H=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=g(c);
c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return A("<blockquote>\n"+c+"\n</blockquote>")})},y=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},G=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return D(Q(b))})},
D=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=0.9<c?b[2](a):0.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},Q=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=
parseInt(b);return String.fromCharCode(c)})},R=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},T=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},K=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),s)},s=function(a,b){return"~E"+b.charCodeAt(0)+
"E"}}}},1883:function(m,n,h){function a(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}m.exports=function(d){for(var b=[],c=0;c<8*d.length;c+=8)b[c>>5]|=(d.charCodeAt(c/8)&255)<<24-c%32;d=8*d.length;b[d>>5]|=128<<24-d%32;b[(d+64>>9<<4)+15]=d;d=Array(80);for(var c=1732584193,e=-271733879,k=-1732584194,f=271733878,g=-1009589776,h=0;h<b.length;h+=16){for(var m=c,n=e,p=k,w=f,l=g,t=0;80>t;t++){d[t]=16>t?b[h+t]:(d[t-3]^d[t-8]^d[t-14]^d[t-16])<<1|(d[t-3]^d[t-8]^d[t-14]^d[t-16])>>>
31;var v=c<<5|c>>>27,A;A=20>t?e&k|~e&f:40>t?e^k^f:60>t?e&k|e&f|k&f:e^k^f;v=a(a(v,A),a(a(g,d[t]),20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514));g=f;f=k;k=e<<30|e>>>2;e=c;c=v}c=a(c,m);e=a(e,n);k=a(k,p);f=a(f,w);g=a(g,l)}b=[c,e,k,f,g];d="";for(c=0;c<4*b.length;c+=3){e=(b[c>>2]>>8*(3-c%4)&255)<<16|(b[c+1>>2]>>8*(3-(c+1)%4)&255)<<8|b[c+2>>2]>>8*(3-(c+2)%4)&255;for(k=0;4>k;k++)d=8*c+6*k>32*b.length?d+"=":d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-
k)&63)}return d}},1995:function(m,n,h){(function(a,d,b,c,e,k){function f(a,b){var c=typeof a[b];return"function"==c||!!("object"==c&&a[b])||"unknown"==c}function g(){if(!t(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!t(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(B=a.match(/\d+/g))}if(!B){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
B=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(c){}}if(!B)return!1;a=parseInt(B[0],10);b=parseInt(B[1],10);N=9<a&&0<b;return!0}function h(){if(!q){q=!0;for(var a=0;a<O.length;a++)O[a]();O.length=0}}function m(a,b){q?a.call(b):O.push(function(){a.call(b)})}function n(){var a=parent;if(""!==K)for(var b=0,c=K.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function p(a){var b=a.toLowerCase().match(Q);a=b[2];var c=b[3],b=b[4]||"";if("http:"==a&&":80"==
b||"https:"==a&&":443"==b)b="";return a+"//"+c+b}function w(a){a=a.replace(T,"$1/");if(!a.match(/^(http||https):\/\//)){var c="/"===a.substring(0,1)?"":b.pathname;"/"!==c.substring(c.length-1)&&(c=c.substring(0,c.lastIndexOf("/")+1));a=b.protocol+"//"+b.host+c+a}for(;R.test(a);)a=a.replace(R,"");return a}function l(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e+"="+k(b[e]));return a+(S?"#":-1==a.indexOf("?")?"?":"&")+
d.join("&")+c}function t(a){return"undefined"===typeof a}function v(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"===typeof d?v(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function A(a){if(t(M)){var b=d.body.appendChild(d.createElement("form")),c=b.appendChild(d.createElement("input"));c.name=z+"TEST"+G;M=c!==b.elements[c.name];d.body.removeChild(b)}M?b=d.createElement('<iframe name="'+a.props.name+'"/>'):(b=d.createElement("IFRAME"),b.name=a.props.name);b.id=b.name=a.props.name;
delete a.props.name;"string"==typeof a.container&&(a.container=d.getElementById(a.container));a.container||(v(b.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=d.body);c=a.props.src;a.props.src="javascript:false";v(b,a.props);b.border=b.frameBorder=0;b.allowTransparency=!0;a.container.appendChild(b);a.onLoad&&J(b,"load",a.onLoad);if(a.usePost){var e=a.container.appendChild(d.createElement("form")),f;e.target=b.name;e.action=c;e.method="POST";if("object"===typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&
(M?f=d.createElement('<input name="'+g+'"/>'):(f=d.createElement("INPUT"),f.name=g),f.value=a.usePost[g],e.appendChild(f));e.submit();e.parentNode.removeChild(e)}else b.src=c;a.props.src=c;return b}function I(c){var e=c.protocol,k;c.isHost=c.isHost||t(F.xdm_p);S=c.hash||!1;c.props||(c.props={});if(c.isHost)c.remote=w(c.remote),c.channel=c.channel||"default"+G++,c.secret=Math.random().toString(16).substring(2),t(e)&&(e=p(b.href)==p(c.remote)?"4":f(a,"postMessage")||f(d,"postMessage")?"1":c.swf&&f(a,
"ActiveXObject")&&g()?"6":"Gecko"===navigator.product&&"frameElement"in a&&-1==navigator.userAgent.indexOf("WebKit")?"5":c.remoteHelper?"2":"0");else{c.channel=F.xdm_c.replace(/["'<>\\]/g,"");c.secret=F.xdm_s;c.remote=F.xdm_e.replace(/["'<>\\]/g,"");var e=F.xdm_p,h;if(h=c.acl){a:{h=c.acl;var m=c.remote;"string"==typeof h&&(h=[h]);for(var n,V=h.length;V--;)if(n=h[V],n=RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),n.test(m)){h=!0;break a}h=!1}h=!h}if(h)throw Error("Access denied for "+
c.remote);}c.protocol=e;switch(e){case "0":v(c,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(c.isHost){if(!c.local){e=b.protocol+"//"+b.host;k=d.body.getElementsByTagName("img");for(m=k.length;m--;)if(h=k[m],h.src.substring(0,e.length)===e){c.local=h.src;break}c.local||(c.local=a)}e={xdm_c:c.channel,xdm_p:0};c.local===a?(c.usePolling=!0,c.useParent=!0,c.local=b.protocol+"//"+b.host+b.pathname+b.search,e.xdm_e=c.local,e.xdm_pa=1):e.xdm_e=w(c.local);c.container&&(c.useResize=
!1,e.xdm_po=1);c.remote=l(c.remote,e)}else v(c,{channel:F.xdm_c,remote:F.xdm_e,useParent:!t(F.xdm_pa),usePolling:!t(F.xdm_po),useResize:c.useParent?!1:c.useResize});k=[new s.stack.HashTransport(c),new s.stack.ReliableBehavior({}),new s.stack.QueueBehavior({encode:!0,maxLength:4E3-c.remote.length}),new s.stack.VerifyBehavior({initiate:c.isHost})];break;case "1":k=[new s.stack.PostMessageTransport(c)];break;case "2":c.remoteHelper=w(c.remoteHelper);k=[new s.stack.NameTransport(c),new s.stack.QueueBehavior,
new s.stack.VerifyBehavior({initiate:c.isHost})];break;case "3":k=[new s.stack.NixTransport(c)];break;case "4":k=[new s.stack.SameOriginTransport(c)];break;case "5":k=[new s.stack.FrameElementTransport(c)];break;case "6":B||g(),k=[new s.stack.FlashTransport(c)]}k.push(new s.stack.QueueBehavior({lazy:c.lazy,remove:!0}));return k}function x(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},
destroy:function(){this.down.destroy()}},d=0,e=a.length;d<e;d++)b=a[d],v(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function H(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var y=this,G=Math.floor(1E4*Math.random()),D=Function.prototype,Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,R=/[\-\w]+\/\.\.\//,T=/([^:])\/\//g,K="",s={},L=a.easyXDM,z="easyXDM_",M,S=!1,B,N,J,C;if(f(a,"addEventListener"))J=function(a,b,c){a.addEventListener(b,c,!1)},C=function(a,b,c){a.removeEventListener(b,
c,!1)};else if(f(a,"attachEvent"))J=function(a,b,c){a.attachEvent("on"+b,c)},C=function(a,b,c){a.detachEvent("on"+b,c)};else throw Error("Browser not supported");var q=!1,O=[],E;"readyState"in d?(E=d.readyState,q="complete"==E||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==E||"interactive"==E)):q=!!d.body;if(!q){if(f(a,"addEventListener"))J(d,"DOMContentLoaded",h);else if(J(d,"readystatechange",function(){"complete"==d.readyState&&h()}),d.documentElement.doScroll&&a===top){var P=function(){if(!q){try{d.documentElement.doScroll("left")}catch(a){c(P,
1);return}h()}};P()}J(a,"load",h)}var F=function(a){a=a.substring(1).split("&");for(var b={},c,d=a.length;d--;)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(b.search)?b.search:b.hash),U=function(){var a={},b={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(b).replace(/\s/g,""))return JSON;Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&
(b='{"a":[1,2,3]}'.evalJSON(),b.a&&(3===b.a.length&&3===b.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(U=function(){return a},a):null};v(s,{version:"2.4.16.3",query:F,stack:{},apply:v,getJSONObject:U,whenReady:m,noConflict:function(b){a.easyXDM=L;(K=b)&&(z="easyXDM_"+K.replace(".","_")+"_");return s}});s.DomHelper={on:J,un:C,requiresJSON:function(b){"object"==typeof a.JSON&&a.JSON||d.write('<script type="text/javascript" src="'+b+'">\x3c/script>')}};(function(){var a=
{};s.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];c&&delete a[b];return d}}})();s.Socket=function(a){var b=x(I(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=p(a.remote);this.origin=p(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};s.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"===typeof d&&(b.local[c]={method:d})}var e=
x(I(a).concat([new s.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=p(a.remote);this.destroy=function(){e.destroy()};e.init()};s.stack.SameOriginTransport=function(a){var d,e,f,g;return d={outgoing:function(a,b,c){f(a);c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=p(a.remote);a.isHost?(v(a.props,{src:l(a.remote,{xdm_e:b.protocol+"//"+b.host+b.pathname,xdm_c:a.channel,xdm_p:4}),name:z+a.channel+"_provider"}),
e=A(a),s.Fn.set(a.channel,function(a){f=a;c(function(){d.up.callback(!0)},0);return function(a){d.up.incoming(a,g)}})):(f=n().Fn.get(a.channel,!0)(function(a){d.up.incoming(a,g)}),c(function(){d.up.callback(!0)},0))},init:function(){m(d.onDOMReady,d)}}};s.stack.FlashTransport=function(a){function e(a,b){c(function(){g.up.incoming(a,k)},0)}function f(b){var c=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1E4*Math.random());s.Fn.set("flash_loaded"+b.replace(/[\-.]/g,"_"),function(){s.stack.FlashTransport[b].swf=
n=r.firstChild;for(var a=s.stack.FlashTransport[b].queue,c=0;c<a.length;c++)a[c]();a.length=0});a.swfContainer?r="string"==typeof a.swfContainer?d.getElementById(a.swfContainer):a.swfContainer:(r=d.createElement("div"),v(r.style,N&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),d.body.appendChild(r));var g="callback=flash_loaded"+b.replace(/[\-.]/g,"_")+"&proto="+y.location.protocol+"&domain="+
y.location.href.match(Q)[3]+"&port="+(y.location.href.match(Q)[4]||"")+"&ns="+K;r.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+c+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+c+"'></param><param name='flashvars' value='"+g+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+g+"' allowScriptAccess='always' wmode='transparent' src='"+c+"' height='1' width='1'></embed></object>"}
var g,h,k,n,r;return g={outgoing:function(b,c,d){n.postMessage(a.channel,b.toString());d&&d()},destroy:function(){try{n.destroyChannel(a.channel)}catch(b){}n=null;h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=a.remote;s.Fn.set("flash_"+a.channel+"_init",function(){c(function(){g.up.callback(!0)})});s.Fn.set("flash_"+a.channel+"_onMessage",e);a.swf=w(a.swf);var d=a.swf.match(Q)[3],m=function(){s.stack.FlashTransport[d].init=!0;n=s.stack.FlashTransport[d].swf;n.createChannel(a.channel,
a.secret,p(a.remote),a.isHost);a.isHost&&(N&&a.swfNoThrottle&&v(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),v(a.props,{src:l(a.remote,{xdm_e:p(b.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:z+a.channel+"_provider"}),h=A(a))};s.stack.FlashTransport[d]&&s.stack.FlashTransport[d].init?m():s.stack.FlashTransport[d]?s.stack.FlashTransport[d].queue.push(m):(s.stack.FlashTransport[d]={queue:[m]},f(d))},init:function(){m(g.onDOMReady,g)}}};s.stack.PostMessageTransport=function(d){function e(a){var c;
if(a.origin)c=p(a.origin);else if(a.uri)c=p(a.uri);else if(a.domain)c=b.protocol+"//"+a.domain;else throw"Unable to retrieve the origin of the event";c==k&&a.data.substring(0,d.channel.length+1)==d.channel+" "&&f.up.incoming(a.data.substring(d.channel.length+1),c)}var f,g,h,k;return f={outgoing:function(a,b,c){h.postMessage(d.channel+" "+a,b||k);c&&c()},destroy:function(){C(a,"message",e);g&&(h=null,g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=p(d.remote);if(d.isHost){var m=function(b){b.data==
d.channel+"-ready"&&(h="postMessage"in g.contentWindow?g.contentWindow:g.contentWindow.document,C(a,"message",m),J(a,"message",e),c(function(){f.up.callback(!0)},0))};J(a,"message",m);v(d.props,{src:l(d.remote,{xdm_e:p(b.href),xdm_c:d.channel,xdm_p:1}),name:z+d.channel+"_provider"});g=A(d)}else J(a,"message",e),h="postMessage"in a.parent?a.parent:a.parent.document,h.postMessage(d.channel+"-ready",k),c(function(){f.up.callback(!0)},0)},init:function(){m(f.onDOMReady,f)}}};s.stack.FrameElementTransport=
function(e){var f,g,h,k;return f={outgoing:function(a,b,c){h.call(this,a);c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=p(e.remote);e.isHost?(v(e.props,{src:l(e.remote,{xdm_e:p(b.href),xdm_c:e.channel,xdm_p:5}),name:z+e.channel+"_provider"}),g=A(e),g.fn=function(a){delete g.fn;h=a;c(function(){f.up.callback(!0)},0);return function(a){f.up.incoming(a,k)}}):(d.referrer&&p(d.referrer)!=F.xdm_e&&(a.top.location=F.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,
k)}),f.up.callback(!0))},init:function(){m(f.onDOMReady,f)}}};s.stack.NameTransport=function(a){function b(c){k.contentWindow.sendMessage(c,a.remoteHelper+(h?"#_3":"#_2")+a.channel)}function d(){h?(2===++r||!h)&&g.up.callback(!0):(b("ready"),g.up.callback(!0))}function e(a){g.up.incoming(a,t)}function f(){q&&c(function(){q(!0)},0)}var g,h,k,n,r,q,t,u;return g={outgoing:function(a,c,d){q=d;b(a)},destroy:function(){k.parentNode.removeChild(k);k=null;h&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){h=
a.isHost;r=0;t=p(a.remote);a.local=w(a.local);h?(s.Fn.set(a.channel,function(b){h&&"ready"===b&&(s.Fn.set(a.channel,e),d())}),u=l(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),v(a.props,{src:u+"#"+a.channel,name:z+a.channel+"_provider"}),n=A(a)):(a.remoteHelper=a.remote,s.Fn.set(a.channel,e));var b=function(){var e=k||this;C(e,"load",b);s.Fn.set(a.channel+"_load",f);(function Y(){"function"==typeof e.contentWindow.sendMessage?d():c(Y,50)})()};k=A({props:{src:a.local+"#_4"+a.channel},onLoad:b})},
init:function(){m(g.onDOMReady,g)}}};s.stack.HashTransport=function(b){function d(){if(n){var a=n.location.href,b="",c=a.indexOf("#");-1!=c&&(b=a.substring(c));b&&b!=k&&(k=b,e.up.incoming(k.substring(k.indexOf("_")+1),s))}}var e,f,g,h,k,l,n,r,q,s;return e={outgoing:function(a,c){if(r){var d=b.remote+"#"+l++ +"_"+a;(f||!q?r.contentWindow:r).location=d}},destroy:function(){a.clearInterval(g);(f||!q)&&r.parentNode.removeChild(r);r=null},onDOMReady:function(){f=b.isHost;h=b.interval;k="#"+b.channel;l=
0;q=b.useParent;s=p(b.remote);if(f){v(b.props,{src:b.remote,name:z+b.channel+"_provider"});if(q)b.onLoad=function(){n=a;g=setInterval(d,h);e.up.callback(!0)};else{var m=0,t=b.delay/50;(function X(){if(++m>t)throw Error("Unable to reference listenerwindow");try{n=r.contentWindow.frames[z+b.channel+"_consumer"]}catch(a){}n?(g=setInterval(d,h),e.up.callback(!0)):c(X,50)})()}r=A(b)}else n=a,g=setInterval(d,h),q?(r=parent,e.up.callback(!0)):(v(b,{props:{src:b.remote+"#"+b.channel+new Date,name:z+b.channel+
"_consumer"},onLoad:function(){e.up.callback(!0)}}),r=A(b))},init:function(){m(e.onDOMReady,e)}}};s.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),k=a.substring(0,h).split(",");a=a.substring(h+1);k[0]==d&&(f="",c&&(c(!0),c=null));0<a.length&&(b.down.outgoing(k[1]+","+d+"_"+f,g),e!=k[1]&&(e=k[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a;c=h;b.down.outgoing(e+","+ ++d+"_"+a,g)}}};s.stack.QueueBehavior=function(a){function b(){if(a.remove&&
0===f.length)H(d);else if(!g&&!(0===f.length||l)){g=!0;var e=f.shift();d.down.outgoing(e.data,e.origin,function(a){g=!1;e.callback&&c(function(){e.callback(a)},0);b()})}}var d,f=[],g=!0,h="",l,m=0,n=!1,r=!1;return d={init:function(){t(a)&&(a={});a.maxLength&&(m=a.maxLength,r=!0);a.lazy?n=!0:d.down.init()},callback:function(a){g=!1;var c=d.up;b();c.callback(a)},incoming:function(b,c){if(r){var f=b.indexOf("_"),g=parseInt(b.substring(0,f),10);h+=b.substring(f+1);0===g&&(a.encode&&(h=e(h)),d.up.incoming(h,
c),h="")}else d.up.incoming(b,c)},outgoing:function(c,e,g){a.encode&&(c=k(c));var h=[],l;if(r){for(;0!==c.length;)l=c.substring(0,m),c=c.substring(l.length),h.push(l);for(;l=h.shift();)f.push({data:h.length+"_"+l,origin:e,callback:0===h.length?g:null})}else f.push({data:c,origin:e,callback:g});n?d.down.init():b()},destroy:function(){l=!0;d.down.destroy()}}};s.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2);c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,
g){var h=f.indexOf("_");-1===h?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}};s.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";f.down.outgoing(g.stringify(a))}function d(a,b){var e=Array.prototype.slice;return function(){var d=arguments.length,f,g={method:b};0<d&&"function"===typeof arguments[d-1]?(1<d&&"function"===
typeof arguments[d-2]?(f={success:arguments[d-2],error:arguments[d-1]},g.params=e.call(arguments,0,d-2)):(f={success:arguments[d-1]},g.params=e.call(arguments,0,d-1)),k[""+ ++h]=f,g.id=h):g.params=e.call(arguments,0);a.namedParams&&1===g.params.length&&(g.params=g.params[0]);c(g)}}function e(a,b,d,f){if(d){var g,h;b?(g=function(a){g=D;c({id:b,result:a})},h=function(a,d){h=D;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d);c(e)}):g=h=D;"[object Array]"!==Object.prototype.toString.call(f)&&
(f=[f]);try{var k=d.method.apply(d.scope,f.concat([g,h]));t(k)||g(k)}catch(l){h(l.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}var f,g=b.serializer||U(),h=0,k={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=k[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result);delete k[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&
(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}};y.easyXDM=s})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);m.exports=window.easyXDM},2009:function(m,n,h){var a={mailcheck:{threshold:3,defaultDomains:"yahoo.com google.com hotmail.com gmail.com me.com aol.com mac.com live.com comcast.net googlemail.com msn.com hotmail.co.uk yahoo.co.uk facebook.com verizon.net sbcglobal.net att.net gmx.com mail.com outlook.com icloud.com".split(" "),
defaultTopLevelDomains:"co.jp co.uk com net org info edu gov mil ca".split(" "),run:function(d){d.domains=d.domains||a.mailcheck.defaultDomains;d.topLevelDomains=d.topLevelDomains||a.mailcheck.defaultTopLevelDomains;d.distanceFunction=d.distanceFunction||a.sift3Distance;var b=function(a){return a},c=d.suggested||b,b=d.empty||b;return(d=a.mailcheck.suggest(encodeURI(d.email),d.domains,d.topLevelDomains,d.distanceFunction))?c(d):b()},suggest:function(a,b,c,e){a=a.toLowerCase();a=this.splitEmail(a);
if(b=this.findClosestDomain(a.domain,b,e)){if(b!=a.domain)return{address:a.address,domain:b,full:a.address+"@"+b}}else if(c=this.findClosestDomain(a.topLevelDomain,c),a.domain&&c&&c!=a.topLevelDomain)return b=a.domain,b=b.substring(0,b.lastIndexOf(a.topLevelDomain))+c,{address:a.address,domain:b,full:a.address+"@"+b};return!1},findClosestDomain:function(a,b,c){var e,h=99,f=null;if(!a||!b)return!1;c||(c=this.sift3Distance);for(var g=0;g<b.length;g++){if(a===b[g])return a;e=c(a,b[g]);e<h&&(h=e,f=b[g])}return h<=
this.threshold&&null!==f?f:!1},sift3Distance:function(a,b){if(null==a||0===a.length)return null==b||0===b.length?0:b.length;if(null==b||0===b.length)return a.length;for(var c=0,e=0,h=0,f=0;c+e<a.length&&c+h<b.length;){if(a.charAt(c+e)==b.charAt(c+h))f++;else for(var g=h=e=0;5>g;g++){if(c+g<a.length&&a.charAt(c+g)==b.charAt(c)){e=g;break}if(c+g<b.length&&a.charAt(c)==b.charAt(c+g)){h=g;break}}c++}return(a.length+b.length)/2-f},splitEmail:function(a){a=a.split("@");if(2>a.length)return!1;for(var b=
0;b<a.length;b++)if(""===a[b])return!1;var c=a.pop(),e=c.split("."),h="";if(0==e.length)return!1;if(1==e.length)h=e[0];else{for(b=1;b<e.length;b++)h+=e[b]+".";2<=e.length&&(h=h.substring(0,h.length-1))}return{topLevelDomain:h,domain:c,address:a.join("@")}}}};"undefined"!==typeof m&&m.exports&&(m.exports=a.mailcheck);"undefined"!==typeof window&&window.jQuery&&function(d){d.fn.mailcheck=function(b){var c=this;if(b.suggested){var d=b.suggested;b.suggested=function(a){d(c,a)}}if(b.empty){var h=b.empty;
b.empty=function(){h.call(null,c)}}b.email=this.val();a.mailcheck.run(b)}}(jQuery)},2022:function(m,n,h){var a=function(d,b,c){c=c||{};var e=document.createElement("div");e.innerHTML=d;d=c.nodesToIgnore||[];for(var h=c.parseHiddenNodes||"false",f=c.nodesToPreserve||[],g=c.preserveAttribute||"data-preserve-html-node",e=e.childNodes,m=0;m<e.length;m++)try{for(var n=!1,u=0;u<d.length;u++)if(e[m].nodeName.toLowerCase()==d[u]){n=!0;break}for(var u=!1,p=0;p<f.length;p++)if(e[m].nodeName.toLowerCase()==
f[p]){u=!0;break}var w;if(!(w=n)){var l;if(l=!h)a:{var t=e[m];if("title"==t.nodeName.toLowerCase())l=!1;else if(window.getComputedStyle){try{var v=window.getComputedStyle(t,null);if(v.getPropertyValue&&"none"==v.getPropertyValue("display")){l=!0;break a}}catch(A){}l=!1}else l=void 0}w=l}if(!w)if("#text"!=e[m].nodeName.toLowerCase()&&"#comment"!=e[m].nodeName.toLowerCase()){n=[];if(e[m].hasAttributes()){for(var I=e[m].attributes,p=0;p<I.length;p++){var x=I.item(p);n.push({name:x.nodeName,value:x.nodeValue})}void 0!==
e[m].attributes[g]&&(u=!0)}if(b.preserve&&u)b.preserve(e[m],g);else if(b.start)if(e[m].hasChildNodes()){b.start(e[m].nodeName,n,!1);if("iframe"==e[m].nodeName.toLowerCase()||"frame"==e[m].nodeName.toLowerCase()){if(e[m].contentDocument&&e[m].contentDocument.documentElement)return a(e[m].contentDocument.documentElement,b,c)}else a(e[m].innerHTML,b,c);b.end&&b.end(e[m].nodeName)}else b.start(e[m].nodeName,n,!0)}else"#text"==e[m].nodeName.toLowerCase()?b.chars&&b.chars(e[m].nodeValue):"#comment"==e[m].nodeName.toLowerCase()&&
b.comment&&b.comment(e[m].nodeValue)}catch(H){console.error(H),console.log("error while parsing node: "+e[m].nodeName.toLowerCase())}};m.exports=a}});
